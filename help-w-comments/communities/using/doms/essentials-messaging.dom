<?xml version="1.1" encoding="UTF-8" standalone="yes"?> 
<html> 
 <head> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/COMMUNITIES;topic_tags:developing;content_type:reference" name="cq:tags" /> 
  <meta content="" name="jcr:versionHistory" /> 
  <meta content="en_us" name="jcr:language" /> 
  <meta content="Guillaume Carlino" name="contentOwner" /> 
  <meta content="carlino@adobe.com" name="lr_lastReplicatedBy" /> 
  <meta content="2017-10-12T21:46:58.665-0400" name="qaDate" /> 
  <meta content="help/components/pages/article-3" name="sling:resourceType" /> 
  <meta content="Messaging Essentials" name="navTitle" /> 
  <meta content="admin" name="jcr:createdBy" /> 
  <meta content="Messaging Essentials" name="jcr:title" /> 
  <meta content="2018-04-03T07:42:31.913-0400" name="lastPublishExternalDate" /> 
  <meta content="carlino" name="cq:lastReplicatedBy" /> 
  <meta content="true" name="jcr:isCheckedOut" /> 
  <meta content="2018-04-03T07:42:31.913-0400" name="publishExternalDate" /> 
  <meta content="false" name="isReadyForLocalization" /> 
  <meta content="2017-10-12T21:46:58.665-0400" name="mwpw_migration_script_version" /> 
  <meta content="2018-05-17T05:56:32.717-0400" name="locHandOffDate" /> 
  <meta content="/etc/designs/help" name="cq:designPath" /> 
  <meta content="Messaging Essentials" name="seoTitle" /> 
  <meta content="mix:versionable" name="jcr:mixinTypes" /> 
  <meta content="2018-04-03T07:42:31.913-0400" name="topicBrowsingSortDate" /> 
  <meta content="carlino" name="cq:lastModifiedBy" /> 
  <meta content="f4186b4f-1dca-491b-bb0a-1b6390fa5e48" name="jcr:predecessors" /> 
  <meta content="/content/docs/en/aem/6-3/develop/communities/essentials/messaging" name="qaNotes" /> 
  <meta content="2018-04-03T07:42:33.097-0400" name="cq:lastReplicated" /> 
  <meta content="Activate" name="cq:lastReplicationAction" /> 
  <meta content="Messaging component overview" name="seoDescription" /> 
  <meta content="2017-12-01T19:01:35.971-0500" name="jcr:created" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/COMMUNITIES" name="primaryProductTag" /> 
  <meta content="2018-05-17T05:56:32.717-0400" name="cq:lastModified" /> 
  <meta content="2017-10-31T16:33:38.536-0400" name="firstPublishExternalDate" /> 
  <meta content="/content/help/en/experience-manager/6-4/communities/morehelp/developing;/content/help/en/experience-manager/6-4/communities/morehelp/developing" name="moreHelpPaths" /> 
  <meta content="" name="jcr:primaryType" /> 
  <meta content="" name="jcr:baseVersion" /> 
  <meta content="422fbb22-8478-4764-b9e4-3d084c49966b" name="jcr:uuid" /> 
  <meta content="https://helpx.adobe.com/experience-manager/6-4/communities/using/essentials-messaging.html" name="publishExternalURL" /> 
  <meta content="/apps/help/templates/article-3" name="cq:template" /> 
 </head> 
 <body> 
  <p>This page documents the details of working with using the Messaging component to include a messaging feature on a website.</p> 
  <h2>Essentials for Client-Side</h2> 
  <table border="1" cellpadding="4" cellspacing="4" width="100%"> 
   <tbody> 
    <tr> 
     <th colspan="2" style="text-align: center;">Compose Message</th> 
    </tr> 
    <tr> 
     <td style="text-align: center;"> <strong>resourceType</strong></td> 
     <td><p>social/messaging/components/hbs/composemessage</p> </td> 
    </tr> 
    <tr> 
     <td style="text-align: center;"> <a href="../../communities/using/client-customize.md#clientlibsforscf"><strong>clientllibs</strong></a></td> 
     <td><p>cq.social.hbs.messaging</p> </td> 
    </tr> 
    <tr> 
     <td style="text-align: center;"> <strong>templates</strong></td> 
     <td>/libs/social/messaging/components/hbs/composemessage/composemessage.hbs</td> 
    </tr> 
    <tr> 
     <td style="text-align: center;"><strong>css</strong></td> 
     <td>/libs/social/messaging/components/hbs/composemessage/clientlibs/composemessage.css</td> 
    </tr> 
    <tr> 
     <td style="text-align: center;"><strong>properties</strong></td> 
     <td>see <a href="../../communities/using/configure-messaging.md">Confiiguring Messaging</a></td> 
    </tr> 
    <tr> 
     <td style="text-align: center;"><strong>admin configuration</strong></td> 
     <td><a href="../../communities/using/messaging.md">Configuring Messaging</a></td> 
    </tr> 
   </tbody> 
  </table> 
  <p> </p> 
  <table border="1" cellpadding="4" cellspacing="4" width="100%"> 
   <tbody> 
    <tr> 
     <th colspan="2" style="text-align: center;">Message List</th> 
    </tr> 
    <tr> 
     <td colspan="2" style="text-align: center;">(for Inbox, Sent, and Trash)</td> 
    </tr> 
    <tr> 
     <td style="text-align: center;"> <strong>resourceType</strong></td> 
     <td><p>social/messaging/components/hbs/messagebox</p> </td> 
    </tr> 
    <tr> 
     <td style="text-align: center;"> <a href="../../communities/using/client-customize.md#clientlibsforscf"><strong>clientllibs</strong></a></td> 
     <td><p>cq.social.hbs.messaging</p> </td> 
    </tr> 
    <tr> 
     <td style="text-align: center;"> <strong>templates</strong></td> 
     <td>/libs/social/messaging/components/hbs/messagebox/messagebox.hbs</td> 
    </tr> 
    <tr> 
     <td style="text-align: center;"><strong>css</strong></td> 
     <td>/libs/social/messaging/components/hbs/messagebox/clientlibs/messagebox.css</td> 
    </tr> 
    <tr> 
     <td style="text-align: center;"><strong>properties</strong></td> 
     <td>see <a href="../../communities/using/configure-messaging.md">Confiiguring Messaging</a></td> 
    </tr> 
    <tr> 
     <td style="text-align: center;"><strong>admin configuration</strong></td> 
     <td><a href="../../communities/using/messaging.md">Configuring Messaging</a></td> 
    </tr> 
   </tbody> 
  </table> 
  <p>See also <a href="../../communities/using/client-customize.md">Client-side Customizations</a></p> 
  <h2>Essentials for Server-Side</h2> 
  <ul> 
   <li><a href="../../communities/using/configure-messaging.md">Configuring Messaging</a></li> 
  </ul> 
  <ul> 
   <li><a href="/sites/developing/using/reference-materials/javadoc/com/adobe/cq/social/messaging/client/api/package-summary">Messaging client APIs</a> for SCF components</li> 
  </ul> 
  <ul> 
   <li><a href="/sites/developing/using/reference-materials/javadoc/com/adobe/cq/social/messaging/api/package-summary">Messaging APIs</a> for the service</li> 
  </ul> 
  <ul> 
   <li><a href="/sites/developing/using/reference-materials/javadoc/com/adobe/cq/social/messaging/client/endpoints/package-summary">Messaging Endpoints</a></li> 
  </ul> 
  <ul> 
   <li><a href="../../communities/using/server-customize.md">Server-side Customizations</a></li> 
  </ul> 
  <note> 
   <p>The String parameter must <i>not </i>contain a trailing slash "/" for the following MessageBuilder methods :</p> 
   <ul> 
    <li><span class="code">setInboxPath</span>()</li> 
    <li><span class="code">setSentItemsPath</span>()</li> 
   </ul> 
   <p>For example :</p> 
   <p><code class="code"> valid : mb.setInboxPath( "/mail/inbox" );
     <discoiqbr /> not valid : mb.setInboxPath( "/mail/inbox/" );</code></p> 
  </note> 
  <h3>Community Site</h3> 
  <p>A community site structure, created using the wizard, will include the messaging feature when selected. See <span class="code">User Management</span> settings of <a href="../../communities/using/sites-console.md#usermanagement">Community Sites Console</a>.</p> 
  <h3>Sample Code : Message Received Notification</h3> 
  <p>The Social Messaging feature throw events for operations, for example <span class="code">send</span>, <span class="code">marking read</span>, <span class="code">marking delete</span>. These events can be caught and actions taken on the data contained in the event.</p> 
  <p>The following example is of an event handler which listens for the <span class="code">message sent</span> event and sends an email to all message recipients using the <span class="code">Day CQ Mail Service</span>.<br /> </p> 
  <p>To try the server-side sample script, you will need a development environment and the ability to build an OSGi bundle.<br /> </p> 
  <ol> 
   <li>login as an administrator to <span class="code"><a href="http://localhost:4502/crx/de">CRXDE|Lite</a></span></li> 
   <li>create a <span class="code">bundle node </span>in <span class="code">/apps/engage/install</span> with arbitrary names, such as<br /> 
    <ul> 
     <li>Symbolic Name : com.engage.media.social.messaging.MessagingNotification</li> 
     <li>Name : Getting Started Tutorial Message Notificaton<br /> </li> 
     <li>Description : a sample service for sending an email notification to users when they receive a message</li> 
     <li>Package : com.engage.media.social.messaging.notification</li> 
    </ul> </li> 
   <li>navigate to /apps/engage/install/com.engage.media.social.messaging.MessagingNotification/src/main/java/com/engage/media/social/messaging/notification 
    <ol> 
     <li>delete the Activator.java class automatically created</li> 
     <li>create class MessageEventHandler.java</li> 
     <li>copy/paste the code below into MessageEventHandler.java</li> 
    </ol> </li> 
   <li>click <strong>Save All</strong></li> 
   <li>navigate to /apps/engage/install/com.engage.media.social.messaging.MessagingNotification/com.engage.media.social.messaging.MessagingNotification.bnd and add all the import statements as written in the MessageEventHandler.java code.</li> 
   <li>build the bundle</li> 
   <li>ensure <span class="code">Day CQ Mail Service </span>OSGi service is configured</li> 
   <li>login as one demo user and send email to another</li> 
   <li>the recipient should receive an email regarding a new message</li> 
  </ol> 
  <h4>MessageEventHandler.java</h4> 
  <codeblock gutter="true" class="syntax java">
    package&amp;nbsp;com.engage.media.social.messaging.notification;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Component;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Properties;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Property;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Service;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Reference;!!discoiqbr!!import&amp;nbsp;org.apache.sling.api.resource.ResourceResolver;!!discoiqbr!!import&amp;nbsp;org.apache.sling.api.resource.ResourceResolverFactory;!!discoiqbr!!import&amp;nbsp;org.apache.sling.api.resource.Resource;!!discoiqbr!!import&amp;nbsp;org.apache.commons.mail.Email;!!discoiqbr!!import&amp;nbsp;org.apache.commons.mail.EmailException;!!discoiqbr!!import&amp;nbsp;org.apache.commons.mail.SimpleEmail;!!discoiqbr!!import&amp;nbsp;org.apache.commons.mail.HtmlEmail;!!discoiqbr!!import&amp;nbsp;java.util.List;!!discoiqbr!!import&amp;nbsp;org.osgi.service.event.Event;!!discoiqbr!!import&amp;nbsp;org.osgi.service.event.EventHandler;!!discoiqbr!!import&amp;nbsp;org.slf4j.Logger;!!discoiqbr!!import&amp;nbsp;org.slf4j.LoggerFactory;!!discoiqbr!!import&amp;nbsp;com.adobe.cq.social.messaging.api.Message;!!discoiqbr!!import&amp;nbsp;com.adobe.cq.social.messaging.api.MessagingEvent;!!discoiqbr!!import&amp;nbsp;com.day.cq.mailer.MessageGatewayService;!!discoiqbr!!import&amp;nbsp;com.day.cq.mailer.MessageGateway;!!discoiqbr!!!!discoiqbr!!@Component(immediate=true)!!discoiqbr!!@Service(EventHandler.class)!!discoiqbr!!@Properties({!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;@Property(name&amp;nbsp;=&amp;nbsp;"event.topics",&amp;nbsp;value&amp;nbsp;=&amp;nbsp;"com/adobe/cq/social/message")!!discoiqbr!!})!!discoiqbr!!public&amp;nbsp;class&amp;nbsp;MessagingEventHandler&amp;nbsp;implements&amp;nbsp;EventHandler&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;Logger&amp;nbsp;logger&amp;nbsp;=&amp;nbsp;LoggerFactory.getLogger(MessagingEventHandler.class);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ResourceResolverFactory&amp;nbsp;resourceResolverFactory;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;MessageGatewayService&amp;nbsp;messageGatewayService;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ResourceResolver&amp;nbsp;resourceResolver=null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;MessageGateway&amp;nbsp;messageGateway=null;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;void&amp;nbsp;sendMail(String&amp;nbsp;from,&amp;nbsp;String&amp;nbsp;to,String&amp;nbsp;subject,&amp;nbsp;String&amp;nbsp;content){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Email&amp;nbsp;email&amp;nbsp;=&amp;nbsp;new&amp;nbsp;SimpleEmail();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;messageGateway&amp;nbsp;=&amp;nbsp;messageGatewayService.getGateway(SimpleEmail.class);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;email.addTo(to);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;email.addReplyTo(from);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;email.setFrom(from);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;email.setMsg(content);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;email.setSubject(subject);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;messageGateway.send(email);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;catch(EmailException&amp;nbsp;ex)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;logger.error("MessageNotificaiton&amp;nbsp;:&amp;nbsp;Error&amp;nbsp;sending&amp;nbsp;email&amp;nbsp;:&amp;nbsp;"+ex.getMessage());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;logger.info("****&amp;nbsp;MessageNotification&amp;nbsp;****&amp;nbsp;&amp;nbsp;Mail&amp;nbsp;sent&amp;nbsp;to&amp;nbsp;"&amp;nbsp;+&amp;nbsp;to);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;void&amp;nbsp;handleEvent(Event&amp;nbsp;event)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Get&amp;nbsp;Message&amp;nbsp;Path&amp;nbsp;and&amp;nbsp;originator&amp;nbsp;User's&amp;nbsp;ID&amp;nbsp;from&amp;nbsp;event!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;messagePath&amp;nbsp;=&amp;nbsp;(String)&amp;nbsp;event.getProperty("path");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;senderId&amp;nbsp;=&amp;nbsp;(String)&amp;nbsp;event.getProperty("userId");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;MessagingEvent.MessagingActions&amp;nbsp;action&amp;nbsp;=&amp;nbsp;(MessagingEvent.MessagingActions)&amp;nbsp;event.getProperty("action");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(MessagingEvent.MessagingActions.MessageSent.equals(action)){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resourceResolver&amp;nbsp;=&amp;nbsp;resourceResolverFactory.getAdministrativeResourceResolver(null);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Read&amp;nbsp;message!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Resource&amp;nbsp;resource&amp;nbsp;=&amp;nbsp;resourceResolver.getResource(messagePath);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Message&amp;nbsp;msg&amp;nbsp;=&amp;nbsp;resource.adaptTo(Message.class);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Get&amp;nbsp;list&amp;nbsp;of&amp;nbsp;recipient&amp;nbsp;Ids&amp;nbsp;from&amp;nbsp;message!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//For&amp;nbsp;Getting&amp;nbsp;Started&amp;nbsp;Tutorial,&amp;nbsp;Id&amp;nbsp;is&amp;nbsp;same&amp;nbsp;as&amp;nbsp;email.&amp;nbsp;If&amp;nbsp;that&amp;nbsp;is&amp;nbsp;not&amp;nbsp;the&amp;nbsp;case&amp;nbsp;in&amp;nbsp;your&amp;nbsp;site,&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//an&amp;nbsp;additional&amp;nbsp;step&amp;nbsp;is&amp;nbsp;needed&amp;nbsp;to&amp;nbsp;retrieve&amp;nbsp;the&amp;nbsp;email&amp;nbsp;for&amp;nbsp;the&amp;nbsp;Id!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;List&lt;String&gt;&amp;nbsp;reclist&amp;nbsp;=&amp;nbsp;msg.getRecipientIdList();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for(int&amp;nbsp;i=0;i&lt;reclist.size();i++){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Send&amp;nbsp;Email&amp;nbsp;using&amp;nbsp;Mailing&amp;nbsp;Service!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sendMail("admin@cqadmin.qqq",reclist.get(i),"New&amp;nbsp;message&amp;nbsp;on&amp;nbsp;Getting&amp;nbsp;Started&amp;nbsp;Tutorial",&amp;nbsp;"Hi\nYou&amp;nbsp;have&amp;nbsp;received&amp;nbsp;a&amp;nbsp;new&amp;nbsp;message&amp;nbsp;from&amp;nbsp;&amp;nbsp;"&amp;nbsp;+&amp;nbsp;&amp;nbsp;senderId&amp;nbsp;+&amp;nbsp;".&amp;nbsp;To&amp;nbsp;read&amp;nbsp;it,&amp;nbsp;sign&amp;nbsp;in&amp;nbsp;to&amp;nbsp;Getting&amp;nbsp;Started&amp;nbsp;Tutorial.\n\n-Engage&amp;nbsp;Admin");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;catch(Exception&amp;nbsp;ex){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;logger.error("Error&amp;nbsp;getting&amp;nbsp;message&amp;nbsp;info&amp;nbsp;:&amp;nbsp;"&amp;nbsp;+&amp;nbsp;ex.getMessage());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;finally&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resourceResolver.close();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!} 
  </codeblock> 
 </body> 
</html>