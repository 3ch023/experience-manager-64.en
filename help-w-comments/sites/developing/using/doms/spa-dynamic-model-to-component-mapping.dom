<?xml version="1.1" encoding="UTF-8" standalone="yes"?>
<html>
 <head>
  <meta content="en" name="pageCreatedAt" />
  <meta content="false" name="doNotLocalize" />
  <meta content="/content/help/en/experience-manager/6-4/sites/developing/morehelp/spa;/content/help/en/experience-manager/6-4/sites/developing/morehelp/spa" name="moreHelpPaths" />
  <meta content="en_us" name="jcr:language" />
  <meta content="2018-12-11T04:52:18.411-0500" name="topicBrowsingSortDate" />
  <meta content="light" name="heroGradient" />
  <meta content="2019-01-15T15:39:01.278-0500" name="jcr:created" />
  <meta content="video" name="pageLayout" />
  <meta content="Activate" name="cq:lastReplicationAction" />
  <meta content="" name="jcr:versionHistory" />
  <meta content="2018-12-11T04:52:18.411-0500" name="lastPublishExternalDate" />
  <meta content="/apps/help/templates/article-3" name="cq:template" />
  <meta content="2018-09-07T12:31:20.080-0400" name="firstPublishExternalDate" />
  <meta content="" name="jcr:baseVersion" />
  <meta content="left" name="sideColumn" />
  <meta content="7e06d1e2-cb4c-4d32-8755-b7e1e5e092d9" name="jcr:uuid" />
  <meta content="not_checked" name="acrolinxStatus" />
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES;topic_tags:spa;content_type:reference" name="cq:tags" />
  <meta content="2018-12-11T04:52:18.427-0500" name="cq:lastModified" />
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES" name="primaryProductTag" />
  <meta content="bohnert" name="contentOwner" />
  <meta content="" name="jcr:primaryType" />
  <meta content="mix:versionable" name="jcr:mixinTypes" />
  <meta content="Dynamic Model to Component Mapping for SPAs" name="seoTitle" />
  <meta content="/etc/designs/help" name="cq:designPath" />
  <meta content="95c0c968-9b67-4b6d-96ab-b78b12e300b6" name="jcr:predecessors" />
  <meta content="bohnert@adobe.com" name="lr_lastReplicatedBy" />
  <meta content="Dynamic Model to Component Mapping for SPAs" name="jcr:title" />
  <meta content="admin" name="jcr:createdBy" />
  <meta content="gknob" name="cq:lastModifiedBy" />
  <meta content="https://helpx.adobe.com/experience-manager/6-4/sites/developing/using/spa-dynamic-model-to-component-mapping.html" name="publishExternalURL" />
  <meta content="true" name="jcr:isCheckedOut" />
  <meta content="This article describes how the dynamic model to component mapping occurs in the Javascript SPA SDK for AEM." name="seoDescription" />
  <meta content="2018-12-11T04:52:18.813-0500" name="cq:lastReplicated" />
  <meta content="2018-12-11T04:52:18.411-0500" name="publishExternalDate" />
  <meta content="help/components/pages/article-3" name="sling:resourceType" />
  <meta content="bohnert" name="cq:lastReplicatedBy" />
  <meta content="audience:developing" name="primaryAudienceTag" />
 </head>
 <body>
  <p>This document describes how the dynamic model to component mapping occurs in the Javascript SPA SDK for AEM.</p> 
  <h2>ComponentMapping Module</h2>
  <p>The <span class="code">ComponentMapping</span> module is provided as an NPM package to the front-end project. It stores front-end components and provides a way for the Single Page Application to map front-end components to AEM resource types. This enables a dynamic resolution of components when parsing the JSON model of the application. </p> 
  <p>Each items present in the model contains a <span class="code">:type</span> field that exposes an AEM resource type. When mounted, the front-end component can render itself using the fragment of model it has received from the underlying libraries. </p> 
  <p>Please refer to the <a href="../../../sites/developing/using/spa-blueprint.md">SPA Blueprint</a> document for more information about model parsing and the front-end component access to the model.</p> 
  <p>Also see the npm package: <a href="https://www.npmjs.com/package/@adobe/cq-spa-component-mapping">https://www.npmjs.com/package/@adobe/cq-spa-component-mapping</a></p> 
  <h2>Model-Driven Single Page Application</h2>
  <p>Single Page Applications leveraging the Javascript SPA SDK for AEM are model-driven:<br /> </p> 
  <ol> 
   <li>Front-end components register themselves to the <a href="../../../sites/developing/using/spa-dynamic-model-to-component-mapping.md#main-pars-header-396526892">Component Mapping Store</a>.</li> 
   <li>Then the <a href="../../../sites/developing/using/spa-blueprint.md#main-pars-header-496071810">Container</a>, once provided with a model by the <a href="../../../sites/developing/using/spa-blueprint.md#main-pars-header-451661207">Model Provider</a>, iterates over its model content (<span class="code">:items</span>).</li> 
   <li>In the case of a page, its children (<span class="code">:children</span>) first get a component class from the <a href="../../../sites/developing/using/spa-blueprint.md#main-pars-header-906602219">Component Mapping</a> and then instantiate it.</li> 
  </ol> 
  <h2>App Initialization</h2>
  <p>Each component is extended with the capabilities of the <a href="../../../sites/developing/using/spa-blueprint.md#main-pars-header-451661207"><span class="code">ModelProvider</span></a>. Initialization therefore take the following general form:</p> 
  <ol> 
   <li>Each model provider initializes itself and listens for changes made to the piece of model that corresponds to its inner component. </li> 
   <li>The <a href="../../../sites/developing/using/spa-blueprint.md#main-pars-header-249430796"><span class="code">PageModelManager</span></a> must be initialized as represented by the <a href="../../../sites/developing/using/spa-blueprint.md#main-pars-text-1679624069">initialization flow</a>. </li> 
   <li>Once stored, the page model manager returns the complete model of the app. </li> 
   <li>This model is then passed to the front-end root <a href="../../../sites/developing/using/spa-blueprint.md#main-pars-header-496071810">Container</a> component of the application. </li> 
   <li>Pieces of the model are finally propagated to each individual child component.</li> 
  </ol> 
  <img imageRotate="0" src="assets/app_model_initialization.png" />
 </body>
</html>