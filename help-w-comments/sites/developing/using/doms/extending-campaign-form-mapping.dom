<?xml version="1.1" encoding="UTF-8" standalone="yes"?> 
<html> 
 <head> 
  <meta content="false" name="isReadyForLocalization" /> 
  <meta content="2017-10-12T21:46:58.665-0400" name="qaDate" /> 
  <meta content="2017-10-12T21:46:58.665-0400" name="mwpw_migration_script_version" /> 
  <meta content="carlino" name="cq:lastModifiedBy" /> 
  <meta content="Creating Custom Form Mappings" name="seoTitle" /> 
  <meta content="admin" name="jcr:createdBy" /> 
  <meta content="2018-05-08T12:43:17.795-0400" name="locHandOffDate" /> 
  <meta content="" name="jcr:baseVersion" /> 
  <meta content="2019-01-25T10:36:04.632-0500" name="publishExternalDate" /> 
  <meta content="Activate" name="cq:lastReplicationAction" /> 
  <meta content="/content/help/en/experience-manager/6-4/sites/developing/morehelp/extending-aem;/content/help/en/experience-manager/6-4/sites/developing/morehelp/extending-aem" name="moreHelpPaths" /> 
  <meta content="User" name="contentOwner" /> 
  <meta content="/apps/help/templates/article-3" name="cq:template" /> 
  <meta content="c76a363b-5004-4f3d-a906-638d29827a55" name="jcr:predecessors" /> 
  <meta content="en_us" name="jcr:language" /> 
  <meta content="2019-01-25T10:36:04.632-0500" name="topicBrowsingSortDate" /> 
  <meta content="" name="jcr:versionHistory" /> 
  <meta content="When you create a custom table in Adobe Campaign, you may want to build a form in AEM that maps to that custom table" name="seoDescription" /> 
  <meta content="/content/docs/en/aem/6-3/develop/extending/extending-adobe-campaign/creating-custom-form-mappings" name="qaNotes" /> 
  <meta content="mix:versionable" name="jcr:mixinTypes" /> 
  <meta content="" name="jcr:primaryType" /> 
  <meta content="2017-12-01T19:05:28.974-0500" name="jcr:created" /> 
  <meta content="/etc/designs/help" name="cq:designPath" /> 
  <meta content="https://helpx.adobe.com/experience-manager/6-4/sites/developing/using/extending-campaign-form-mapping.html" name="publishExternalURL" /> 
  <meta content="3c1da593-6443-457e-b0c7-0664e48eca28" name="jcr:uuid" /> 
  <meta content="carlino@adobe.com" name="lr_lastReplicatedBy" /> 
  <meta content="help/components/pages/article-3" name="sling:resourceType" /> 
  <meta content="true" name="jcr:isCheckedOut" /> 
  <meta content="Creating Custom Form Mappings" name="jcr:title" /> 
  <meta content="2019-01-25T10:36:04.650-0500" name="cq:lastReplicated" /> 
  <meta content="Creating Custom Form Mappings" name="navTitle" /> 
  <meta content="carlino" name="cq:lastReplicatedBy" /> 
  <meta content="2017-10-31T16:16:44.916-0400" name="firstPublishExternalDate" /> 
  <meta content="2019-01-25T10:36:04.635-0500" name="cq:lastModified" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES;topic_tags:extending-aem;content_type:reference" name="cq:tags" /> 
  <meta content="audience:developing" name="primaryAudienceTag" /> 
  <meta content="2019-01-25T10:36:04.632-0500" name="lastPublishExternalDate" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES" name="primaryProductTag" /> 
 </head> 
 <body> 
  <p>When you create a custom table in Adobe Campaign, you may want to build a form in AEM that maps to that custom table.</p> 
  <p>This document describes how to create custom form mappings. When you complete the steps in this document, you will be providing your users with an event page where they can sign up for an upcoming event. You then follow up with these users via Adobe Campaign. </p> 
  <h2>Prerequisites</h2> 
  <p>You need to have the following installed:</p> 
  <ul> 
   <li>Adobe Experience Manager</li> 
   <li>Adobe Campaign Classic</li> 
  </ul> 
  <p>See <a href="../../../sites/administering/using/campaignonpremise.md">Integrating AEM with Adobe Campaign Classic</a> for more information.</p> 
  <draft-comment type="draft"> 
   <ul> 
    <li>Featurepack 6576 available on Package Share</li> 
   </ul> 
  </draft-comment> 
  <h2>Creating Custom Form Mappings</h2> 
  <p>In order to create custom form mappings, you need to follow these high-level steps, which are described in detail in the following sections:</p> 
  <ol> 
   <li>Create a custom table.</li> 
   <li>Extend the <strong>seed</strong> table.</li> 
   <li>Create a custom mapping.</li> 
   <li>Create a delivery based on the custom mapping.</li> 
   <li>Build the form in AEM, which will use the created delivery.</li> 
   <li>Submit the form to test it.</li> 
  </ol> 
  <h3>Creating the Custom Table in Adobe Campaign</h3> 
  <p>Start by creating a custom table in Adobe Campaign. In this example, we are using the following definition to create an event table: </p> 
  <codeblock class="syntax xml">
    &lt;element&amp;nbsp;autopk="true"&amp;nbsp;label="Event"&amp;nbsp;labelSingular="Event"&amp;nbsp;name="event"&gt;!!discoiqbr!!&amp;nbsp;&lt;attribute&amp;nbsp;label="Event&amp;nbsp;Date"&amp;nbsp;name="eventdate"&amp;nbsp;type="date"/&gt;!!discoiqbr!!&amp;nbsp;&lt;attribute&amp;nbsp;label="Event&amp;nbsp;Name"&amp;nbsp;name="eventname"&amp;nbsp;type="string"/&gt;!!discoiqbr!!&amp;nbsp;&lt;attribute&amp;nbsp;label="Email"&amp;nbsp;name="email"&amp;nbsp;type="string"/&gt;!!discoiqbr!!&amp;nbsp;&lt;attribute&amp;nbsp;label="Number&amp;nbsp;of&amp;nbsp;Seats"&amp;nbsp;name="seats"&amp;nbsp;type="long"/&gt;!!discoiqbr!!&lt;/element&gt; 
  </codeblock> 
  <p>After you create the event table, run the <strong>Update database structure wizard</strong> to create the table.</p> 
  <h3>Extending the Seed Table</h3> 
  <p>In Adobe Campaign, tap/click <strong>Add</strong> to create a new extension of the <strong>Seed addresses (nms)</strong> table.</p> 
  <img imageRotate="0" src="assets/chlimage_1-212.png" /> 
  <p>Now, use the fields from the <strong>event</strong><i> </i>table to extend the <strong>seed</strong> table:</p> 
  <codeblock class="syntax xml">
    &lt;element&amp;nbsp;label="Event"&amp;nbsp;name="custom_cus_event"&gt;!!discoiqbr!!&amp;nbsp;&lt;attribute&amp;nbsp;name="eventname"&amp;nbsp;template="cus:event:event/@eventname"/&gt;!!discoiqbr!!&amp;nbsp;&lt;attribute&amp;nbsp;name="eventdate"&amp;nbsp;template="cus:event:event/@eventdate"/&gt;!!discoiqbr!!&amp;nbsp;&lt;attribute&amp;nbsp;name="email"&amp;nbsp;template="cus:event:event/@email"/&gt;!!discoiqbr!!&amp;nbsp;&lt;attribute&amp;nbsp;name="seats"&amp;nbsp;template="cus:event:event/@seats"/&gt;!!discoiqbr!!&amp;nbsp;&lt;/element&gt; 
  </codeblock> 
  <p>After this, run <strong>Update database wizard</strong> to apply the changes.</p> 
  <h3>Creating Custom Target Mapping</h3> 
  <p>In <strong>Administration/Campaign Managemen</strong>t, go to <strong>Target Mappings</strong> and add a new T<strong>arget Mapping.</strong></p> 
  <note> 
   <p>Make sure you use a meaningful name for <strong>Internal name</strong>.</p> 
  </note> 
  <img imageRotate="0" src="assets/chlimage_1-213.png" /> 
  <h3>Creating a Custom Delivery Template</h3> 
  <p>In this step, you are adding a delivery template that uses the created <strong>Target mapping</strong>.</p> 
  <p>In <strong>Resources/Templates</strong>, navigate to the Delivery Template and duplicate the existing AEM delivery. When you click <strong>To</strong>, select the create event <strong>Target mapping</strong>.</p> 
  <img imageRotate="0" src="assets/chlimage_1-214.png" /> 
  <h3>Building the Form in AEM</h3> 
  <p>In AEM, make sure you have configured a Cloud Service in <strong>Page Properties</strong>.</p> 
  <p>Then, in the <strong>Adobe Campaign</strong> tab, select the delivery that was created in <a href="#creatingacustomdeliverytemplate">Creating a Custom Delivery Template</a>.</p> 
  <img imageRotate="0" src="assets/chlimage_1-215.png" /> 
  <p>When configuring the fields, make sure you specify unique element-names for the form-fields.</p> 
  <p>After the fields are configured, you need to manually change the mapping.</p> 
  <p>In CRXDE-lite, go the <strong>jcr:content</strong> (of the page) node and change the <strong>acMapping</strong> value to the internal name of the <strong>Target mapping</strong>.</p> 
  <img imageRotate="0" src="assets/chlimage_1-216.png" /> 
  <p>In the configuration of the form, make sure you check the checkbox to create if non existing</p> 
  <img imageRotate="0" src="assets/chlimage_1-217.png" /> 
  <h3>Submitting the Form</h3> 
  <p>You can now submit the form and validate on the Adobe Campaign side whether the values are saved.</p> 
  <img imageRotate="0" src="assets/chlimage_1-218.png" /> 
  <h2>Troubleshooting</h2> 
  <p><strong>"Invalid type for value '02/02/2015' from element '@eventdate' (document of type 'Event (<a href="http://adbevent/">adb:event</a>)')"</strong></p> 
  <p>When submitting the form, this error is logged in the <strong>error.log</strong> in AEM.</p> 
  <p>This is due to an invalid format for the date field. The workaround is to supply <strong>yyyy-mm-dd</strong> as the value.</p> 
  <p> </p> 
 </body> 
</html>