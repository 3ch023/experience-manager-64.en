<?xml version="1.1" encoding="UTF-8" standalone="yes"?> 
<html> 
 <head> 
  <meta content="2018-05-03T13:57:22.431-0400" name="lastPublishExternalDate" /> 
  <meta content="AEM components are used to hold, format, and render the content made available on your webpages." name="seoDescription" /> 
  <meta content="2018-05-03T13:57:22.431-0400" name="publishExternalDate" /> 
  <meta content="https://helpx.adobe.com/experience-manager/6-4/sites/developing/using/developing-components.html" name="publishExternalURL" /> 
  <meta content="bohnert" name="cq:lastModifiedBy" /> 
  <meta content="4d13e6ac-2588-46f2-bf9c-b2e2c8b245c1" name="jcr:uuid" /> 
  <meta content="Developing AEM Components" name="navTitle" /> 
  <meta content="2018-05-03T13:57:22.431-0400" name="topicBrowsingSortDate" /> 
  <meta content="help/components/pages/article-3" name="sling:resourceType" /> 
  <meta content="dist5" name="distType" /> 
  <meta content="Developing AEM Components" name="seoTitle" /> 
  <meta content="/etc/designs/help" name="cq:designPath" /> 
  <meta content="" name="jcr:versionHistory" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES;topic_tags:components;content_type:reference" name="cq:tags" /> 
  <meta content="/content/docs/en/aem/6-3/develop/components/developing-components" name="qaNotes" /> 
  <meta content="2018-05-08T12:42:06.764-0400" name="locHandOffDate" /> 
  <meta content="" name="jcr:primaryType" /> 
  <meta content="admin" name="jcr:createdBy" /> 
  <meta content="audience:developing" name="primaryAudienceTag" /> 
  <meta content="071b485a-2822-4e0b-a872-5d0cc4c24195" name="jcr:predecessors" /> 
  <meta content="2017-10-12T21:46:00.000-0400" name="qaDate" /> 
  <meta content="2018-10-08T09:59:05.773-0400" name="cq:lastModified" /> 
  <meta content="jsyal" name="cq:lastReplicatedBy" /> 
  <meta content="/apps/help/templates/article-3" name="cq:template" /> 
  <meta content="Activate" name="cq:lastReplicationAction" /> 
  <meta content="2018-02-16T08:01:34.302-0500" name="jcr:created" /> 
  <meta content="/content/docs/en/aem/6-2/develop/components/components-touch-optimized" name="legacyPath" /> 
  <meta content="2017-10-12T21:46:58.665-0400" name="mwpw_migration_script_version" /> 
  <meta content="2018-10-27T23:47:25.791-0400" name="cq:lastReplicated" /> 
  <meta content="true" name="jcr:isCheckedOut" /> 
  <meta content="User" name="contentOwner" /> 
  <meta content="trushton@adobe.com" name="lr_lastReplicatedBy" /> 
  <meta content="false" name="isReadyForLocalization" /> 
  <meta content="/content/help/en/experience-manager/6-4/sites/developing/morehelp/components;/content/help/en/experience-manager/6-4/sites/developing/morehelp/components" name="moreHelpPaths" /> 
  <meta content="mix:versionable" name="jcr:mixinTypes" /> 
  <meta content="en_us" name="jcr:language" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES" name="primaryProductTag" /> 
  <meta content="" name="jcr:baseVersion" /> 
  <meta content="2017-10-31T16:17:01.908-0400" name="firstPublishExternalDate" /> 
  <meta content="Developing AEM Components" name="jcr:title" /> 
  <meta content="light" name="gnavTheme" /> 
 </head> 
 <body> 
  <p>AEM components are used to hold, format, and render the content made available on your webpages.</p> 
  <ul> 
   <li>When <a href="../../../sites/authoring/using/default-components.md">authoring pages</a>, the components allow the authors to edit and configure the content.<br /> 
    <ul> 
     <li>When constructing a <a href="../../../sites/administering/using/ecommerce.md">Commerce</a> site the components can, for example, collect and render information from the catalog.<br /> See <a href="../../../sites/developing/using/ecommerce.md">Developing eCommerce</a> for more information.<br /> </li> 
     <li>When constructing a <a href="../../../communities/using/author-communities.md">Communities</a> site the components can provide information to and collect information from your visitors.<br /> See <a href="../../../communities/using/communities.md">Developing Communities</a> for more information.</li> 
    </ul> </li> 
   <li>On the publish instance the components render your content, presenting it as you require to your website visitors.<br /> </li> 
  </ul> 
  <note> 
   <p>This page is a continuation of the document <a href="../../../sites/developing/using/components-basics.md">AEM Components - The Basics</a>. </p> 
  </note> 
  <note> 
   <p>Components below <span class="code">/libs/cq/gui/components/authoring/dialog</span> are meant to be used only in the Editor (component dialogs in Authoring). If they are used elsewhere (such as in a wizard dialog for instance), they may not behave as expected.</p> 
  </note> 
  <h2>Code Samples</h2> 
  <p>This page provides the reference documentation (or links to reference documentation) required to develop new components for AEM. See <a href="../../../sites/developing/using/developing-components-samples.md">Developing AEM Components - Code Samples</a> for some practical examples.<br /> </p> 
  <h2>Structure</h2> 
  <p>The basic structure of a component is covered on the page <a href="../../../sites/developing/using/components-basics.md#structure">AEM Components - The Basics</a>. That document covers both the touch-enabled and classic UIs. Even if you do not need to use the classic settings in your new component it can help to be aware of them when inheriting from existing components.<br /> </p> 
  <h2>Extending Existing Components and Dialogs</h2> 
  <p>Depending on the component you want to implement it might be possible to extend or customize an existing instance, rather than defining and developing the entire <a href="#structure">structure</a> from scratch.</p> 
  <p>When extending or customing an existing component or dialog, you can copy or replicate either the entire structure or the structure required for the dialog before making your changes.</p> 
  <h3>Extending an Existing Component</h3> 
  <draft-comment color="blue" lastModifiedBy="ims-author-57F1056A4CD116590A746C15@AdobeID" lastModifiedDate="2018-01-18T11:19:11.200-0500" prevFirstName="unknown" prevLastName="unknown" type="remark"> 
   <p>need more info - or link to an example (from RnD)?</p> 
   <p>CM: The Foundation Carousel extends from the Foundation List, but I wouldn't mention it here since we're not properly leveraging the Sling Resource Merger in the Carousel dialog (we redefined everything instead of just the diff)</p> 
  </draft-comment> 
  <p>Extending an existing component can be achieved with <a href="../../../sites/developing/using/components-basics.md#componenthierarchyandinheritance">Resource Type Hierarchy</a> and the related inheritance mechanisms.</p> 
  <note> 
   <p>Components can also be redefined with an overlay based on the search path logic. However in such case, the <a href="../../../sites/developing/using/sling-resource-merger.md">Sling Resource Merger</a> will not be triggered and <span class="code">/apps</span> must define the entire overlay.</p> 
  </note> 
  <note> 
   <p>The <a href="../../../sites/developing/using/customizing-content-fragments.md">content fragment component</a> can also be customized and extended, though the full structure and relationships with Assets must be considered.</p> 
  </note> 
  <h3>Customizing a Existing Component Dialog</h3> 
  <p>It is also possible to override a <i>component dialog</i> using the <a href="../../../sites/developing/using/sling-resource-merger.md">Sling Resource Merger</a> and defining the property <span class="code">sling:resourceSuperType</span>.</p> 
  <p>This means you only need to redefine the required differences, as opposed to redefining the entire dialog (using <span class="code">sling:resourceSuperType</span>). This is now recommended method for extending a component dialog</p> 
  <p>See the <a href="../../../sites/developing/using/sling-resource-merger.md">Sling Resource Merger</a> for more details.</p> 
  <h2>Defining the Markup</h2> 
  <p>Your component will be rendered with <a href="http://www.w3schools.com/htmL/html_intro.asp">HTML</a>. Your component needs to define the HTML needed to take the required content and then render it as required, on both the author and publish environments.<br /> </p> 
  <h3>Using the HTML Template Language</h3> 
  <p>The <a href="/content/help/en/experience-manager/htl/user-guide">HTML Templating Language (HTL)</a>, introduced with AEM 6.0, takes the place of JSP (JavaServer Pages) as the preferred and recommended server-side template system for HTML. For web developers who need to build robust enterprise websites, HTL helps to achieve increased security and development efficiency.</p> 
  <note> 
   <p>Although both HTL and JSP can be used for developing components, we will illustrate development with HTL on this page, as it is the recommended scripting language for AEM.</p> 
  </note> 
  <h2>Developing the Content Logic</h2> 
  <p>This optional logic selects and/or computes the content to be rendered. It is invoked from HTL expressions with the appropriate Use-API pattern.</p> 
  <p>The mechanism to separate logic from appearance helps clarify what is called for a given view. It also allows differing logic for different views of the same resource.</p> 
  <h3>Using Java</h3> 
  <p><a href="/content/help/en/experience-manager/htl/using/use-api-java">The HTL Java Use-API enables a HTL file to access helper methods in a custom Java class</a>. This allows you to use Java code to implement the logic for selecting and configuring the component content.</p> 
  <h3>Using JavaScript</h3> 
  <p><a href="/content/help/en/experience-manager/htl/using/use-api-javascript">The HTL JavaScript Use-API enables a HTL file to access helper code written in JavaScript</a>. This allows you to use JavaScript code to implement the logic for selecting and configuring the component content.</p> 
  <h3>Using Client-Side HTML Libraries</h3> 
  <p>Modern websites rely heavily on client-side processing driven by complex JavaScript and CSS code. Organizing and optimizing the serving of this code can be a complicated issue.</p> 
  <p>To help deal with this issue, AEM provides <strong>Client-side Library Folders</strong>, which allow you to store your client-side code in the repository, organize it into categories and define when and how each category of code is to be served to the client. The client-side library system then takes care of producing the correct links in your final web page to load the correct code.</p> 
  <p>Read <a href="../../../sites/developing/using/clientlibs.md">Using Client-Side HTML Libraries</a> for more information.</p> 
  <h2>Configuring the Edit Behavior</h2> 
  <p>You can configure the edit behavior of a component including attributes such as actions available for the component, characteristics of the inplace editor, and the listeners related to events on the component. The configuration is common to both the touch-enabled and classic UI, albeit with certain, specific differences.</p> 
  <p>The <a href="../../../sites/developing/using/components-basics.md#editbehavior">edit behavior of a component is configured</a> by adding a <span class="code">cq:editConfig</span> node of type <span class="code">cq:EditConfig</span> below the component node (of type <span class="code">cq:Component</span>) and by adding specific properties and child nodes. </p> 
  <h2>Configuring the Preview Behavior</h2> 
  <p>The <a href="/sites/developing/using/reference-materials/javadoc/com/day/cq/wcm/api/WCMMode">WCM Mode</a> cookie is set when switching to <strong>Preview</strong> mode even when the page is not refreshed.</p> 
  <p>For components with a rendering that are sensitive to the WCM Mode, they need to be defined to refresh themselves specifically, then rely on the value of the cookie.</p> 
  <note> 
   <p>In the touch-enabeld UI only the values <span class="code">EDIT</span> and <span class="code">PREVIEW</span> are used for the <a href="/sites/developing/using/reference-materials/javadoc/com/day/cq/wcm/api/WCMMode">WCM Mode</a> cookie.<br /> </p> 
  </note> 
  <h2>Creating and Configuring a Dialog</h2> 
  <p>Dialogs are used to allow author to interact with the component. Using a dialog allows authors and/or administrators to edit content, configure the component or define design parameters (using a <a href="#creatingandconfiguringadesigndialog">Design Dialog</a>) </p> 
  <h3>Coral UI and Granite UI</h3> 
  <p><a href="/sites/developing/using/reference-materials/coral-ui/coralui3/index">Coral UI</a> and <a href="/sites/developing/using/reference-materials/granite-ui/api/index">Granite UI</a> define the modern look and feel of AEM.</p> 
  <p><a href="/sites/developing/using/reference-materials/granite-ui/api/index">Granite UI provides a large range of the basic components (widgets)</a> needed to create your dialog on the authoring environment. When necessary you can extend this selection and <a href="#creatinganewwidget">create your own widget</a>.</p> 
  <p>For more information on developing components using Coral and Granite resource types see: <a href="https://helpx.adobe.com/experience-manager/using/aem64_coral_resourcetypes.html">Building Experience Manager components using Coral/Granite resource types</a>.</p> 
  <p>For full details see:</p> 
  <ul> 
   <li>Coral UI 
    <ul> 
     <li>Provides a consistent UI across all cloud solutions<br /> </li> 
     <li><a href="../../../sites/developing/using/touch-ui-concepts.md#coralui">Concepts of the AEM Touch-Enabled UI - Coral UI</a></li> 
     <li><a href="/sites/developing/using/reference-materials/coral-ui/coralui3/index">Coral UI Guide</a></li> 
    </ul> </li> 
   <li>Granite UI 
    <ul> 
     <li>Provides Coral UI markup wrapped into Sling components for building UI consoles and dialogs<br /> </li> 
     <li><a href="../../../sites/developing/using/touch-ui-concepts.md#coralui">Concepts of the AEM Touch-Enabled UI - Granite UI</a> </li> 
     <li><a href="/sites/developing/using/reference-materials/granite-ui/api/index">Granite UI Documentation</a></li> 
    </ul> </li> 
  </ul> 
  <note> 
   <p>Due to the nature of the Granite UI components (and differences to the ExtJS widgets), there are some differences between how components interact with the touch-enabled UI and the <a href="../../../sites/developing/using/developing-components-classic.md">classic UI</a>.</p> 
  </note> 
  <h3>Creating a New Dialog</h3> 
  <p>Dialogs for the touch-enabled UI:</p> 
  <ul> 
   <li>are named <span class="code">cq:dialog</span>.</li> 
   <li>are defined as an <span class="code">nt:unstructured</span> node with the <span class="code">sling:resourceType</span> property set.</li> 
   <li>are located under their <span class="code">cq:Component</span> node and next to their component definition.</li> 
   <li>are rendered on the server-side (as Sling components), based on their content structure and the <span class="code">sling:resourceType</span> property.</li> 
   <li>use the Granite UI framework.</li> 
   <li>contain a node structure describing the fields within the dialog. 
    <ul> 
     <li>these nodes are <span class="code">nt:unstructured</span> with the required <span class="code">sling:resourceType</span> property.<br /> </li> 
    </ul> </li> 
  </ul> 
  <p>An example node structure might be:</p> 
  <codeblock gutter="true" class="syntax xml">
    newComponent&amp;nbsp;(cq:Component)!!discoiqbr!!&amp;nbsp;&amp;nbsp;cq:dialog&amp;nbsp;(nt:unstructured)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;content&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;layout&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;items&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;column&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;items&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;file&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;description&amp;nbsp;&amp;nbsp; 
  </codeblock> 
  <p>Customizing a dialog is similar to developing a component as the dialog is itself a component (i.e. markup rendered by a component script together with behavior/style provided by a client library).<br /> </p> 
  <p>For examples, see:</p> 
  <ul> 
   <li><span class="code">/libs/foundation/components/text/cq:dialog</span></li> 
   <li><span class="code">/libs/foundation/components/download/cq:dialog</span></li> 
  </ul> 
  <note> 
   <p>If a component has no dialog defined for the touch-enabled UI, then the classic UI dialog is used as a fallback inside of a compatibility layer. To customize such a dialog you need to customize the classic UI dialog. See <a href="../../../sites/developing/using/developing-components-classic.md">AEM Components for the Classic UI</a>.<br /> </p> 
  </note> 
  <h3>Customizing Dialog Fields</h3> 
  <note> 
   <p>See:</p> 
   <ul> 
    <li>the AEM Gems session on <a href="http://docs.adobe.com/content/ddc/en/gems/customizing-dialog-fields-in-touch-ui.html">Customizing Dialog Fields</a>.</li> 
    <li>the related sample code covered under <a href="../../../sites/developing/using/developing-components-samples.md#codesamplehowtocustomizedialogfields">Code Sample - How to Customize Dialog Fields</a>.<br /> </li> 
   </ul> 
  </note> 
  <h4>Creating a New Field</h4> 
  <p>Widgets for the touch-enabled UI are implemented as Granite UI components.</p> 
  <p>To create a new widget for use in a component dialog for the touch-enabled UI requires you to <a href="../../../sites/developing/using/granite-ui-component.md">create a new Granite UI field component</a>.</p> 
  <note> 
   <p>For full details about the Granite UI, please see the <a href="/sites/developing/using/reference-materials/granite-ui/api/index">Granite UI documentation</a>.</p> 
  </note> 
  <p>If you consider your dialog as a simple container for a form element, then you can also see the primary content of your dialog content as form fields. Creating a new form field requires you to create a resource type; this is equivalent to creating a new component. To help you in that task, Granite UI offers a generic field component to inherit from (using <span class="code">sling:resourceSuperType</span>):</p> 
  <p style="margin-left: 40px;"><span class="code">/libs/granite/ui/components/coral/foundation/form/field</span></p> 
  <p>More specifically Granite UI provides a range of field components that are suitable for use in dialogs (or, more generally speaking, in <a href="/sites/developing/using/reference-materials/granite-ui/api/jcr_root/libs/granite/ui/components/foundation/form/index">forms</a>).<br /> </p> 
  <note> 
   <p>This differs from the classic UI, where widgets are represented by <span class="code">cq:Widgets</span> nodes, each with a particular <span class="code">xtype</span> to establish the relation with their corresponding ExtJS widget. From an implementation viewpoint, these widgets were rendered on the client-side by the ExtJS framework.</p> 
  </note> 
  <p>Once you have created your resource type, you can instantiate your field by adding a new node in your dialog, with the property <span class="code">sling:resourceType</span> referring to the resource type you have just introduced.</p> 
  <h4>Creating a Client Library for Style and Behavior</h4> 
  <p>If you want to define styling and behavior for your component, you can create a dedicated <a href="../../../sites/developing/using/clientlibs.md">client library</a> that defines your custom CSS/LESS and JS.</p> 
  <p>To have your client library loaded solely for your component dialog (i.e. it will not be loaded for another component) you need to set the property <span class="code">extraClientLibs</span><strong> </strong>of your dialog to the category name of the client library you have just created. This is advisable if your client library is quite big and/or your field is specific to that dialog and will not be needed in other dialogs.</p> 
  <p>To have your client library loaded for all dialogs, set the category property of your client library to <span class="code">cq.authoring.dialog</span>. This is the category name of the client library that is included by default when rendering all dialogs. You want to do that if you client library is small and/or your field is generic and could be reused in other dialogs.</p> 
  <p>For an example, see:</p> 
  <ul> 
   <li><span class="code">cqgems/customizingfield/components/colorpicker/clientlibs</span> <br /> 
    <ul> 
     <li>provided by the <a href="../../../sites/developing/using/developing-components-samples.md#codesamplehowtocustomizedialogfields">Code Sample</a></li> 
    </ul> </li> 
  </ul> 
  <h4>Extending (Inheriting from) a Field</h4> 
  <p>Depending on your requirements, you can either:</p> 
  <ul> 
   <li>Extend a given Granite UI field by component inheritance (<span class="code">sling:resourceSuperType</span>)</li> 
   <li>Extend a given widget from the underlying widget library (in the case of Granite UI, this is Coral UI), by following the widget library API (JS/CSS inheritance)</li> 
  </ul> 
  <h4>Access to Dialog Fields</h4> 
  <p>You can also use render conditions (<span class="code">rendercondition</span>) to control who has access to specific tabs/fields in your dialog; for example:</p> 
  <codeblock gutter="true" class="syntax xml">
    +&amp;nbsp;mybutton!!discoiqbr!!&amp;nbsp;&amp;nbsp;-&amp;nbsp;sling:resourceType&amp;nbsp;=&amp;nbsp;granite/ui/components/coral/foundation/button!!discoiqbr!!&amp;nbsp;&amp;nbsp;+&amp;nbsp;rendercondition!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;sling:resourceType&amp;nbsp;=&amp;nbsp;myapp/components/renderconditions/group!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;groups&amp;nbsp;=&amp;nbsp;["administrators"] 
  </codeblock> 
  <h3>Handling Field Events</h3> 
  <p>The method of handling events on dialog fields is now done with <a href="#listenersinacustomclientlibrary">listeners in a custom client library</a>. This is a change from the older method of having <a href="#listenersinthecontentstructureclassicui">listeners in the content structure</a>.</p> 
  <h4>Listeners in a Custom Client Library</h4> 
  <p>To inject logic into your field, you should:</p> 
  <ol> 
   <li>Have your field marked with a given CSS class (the <i>hook</i>).</li> 
   <li>Define, in your client library a JS listener hooked on that CSS class name (this ensures that your custom logic is scoped to your field only, and does not affect other fields of the same type).</li> 
  </ol> 
  <p>To achieve this you need to know about the underlying widget library with which you want to interact. See the <a href="/sites/developing/using/reference-materials/coral-ui/coralui3/index">Coral UI documentation</a> to identify to which event you want to react. This is very similar to the process that you had to perform with ExtJS in the past: find the documentation page of a given widget, then check the details of its event API.</p> 
  <p>For an example, see:</p> 
  <ul> 
   <li><span class="code">cqgems/customizingfield/components/clientlibs/customizingfield</span><br /> 
    <ul> 
     <li>provided by the <a href="../../../sites/developing/using/developing-components-samples.md#codesamplehowtocustomizedialogfields">Code Sample</a></li> 
    </ul> </li> 
  </ul> 
  <h4>Listeners in the Content Structure</h4> 
  <p>In the classic UI with ExtJS, it was usual to have listeners for a given widget in the content structure. Achieving the same in the touch-enabled UI is different as JS listener code (or any code at all) is no longer defined in the content.</p> 
  <p>The content structure describes the semantic structure; it should (must) not imply the nature of the underlying widget. By not having JS code in the content structure, you can change the implementation details without having to change the content structure. In other words, you can change the widget library without needing to touch the content structure.</p> 
  <h3>Field Validation</h3> 
  <h4>Mandatory Field</h4> 
  <p>To mark a given field as mandatory set the following property on the content node of your field:</p> 
  <ul> 
   <li>Name: <span class="code">required</span></li> 
   <li>Type: <span class="code">Boolean</span><br /> </li> 
  </ul> 
  <p>For an example, see:</p> 
  <codeblock class="syntax xml">
    /libs/foundation/components/page/cq:dialog/content/items/tabs/items/basic/items/column/items/title/items/title 
  </codeblock> 
  <h4>Field Validation (Granite UI)</h4> 
  <p>Field validation in Granite UI and the Granite UI Components (equivalent to widgets), is done by using the <span class="code">foundation-validation</span> API. <a href="/sites/developing/using/reference-materials/granite-ui/api/jcr_root/libs/granite/ui/components/coral/foundation/clientlibs/foundation/js/validation/index">See the <span class="code">foundation-valdiation</span> Granite documentation for details.</a></p> 
  <p>For examples, see:</p> 
  <ul> 
   <li><span class="code">cqgems/customizingfield/components/clientlibs/customizingfield/js/validations.js</span><br /> 
    <ul> 
     <li>provided by the <a href="../../../sites/developing/using/developing-components-samples.md#codesamplehowtocustomizedialogfields">Code Sample</a></li> 
    </ul> </li> 
   <li><span class="code">/libs/cq/gui/components/authoring/dialog/clientlibs/dialog/js/validations.js</span></li> 
  </ul> 
  <h2>Creating and Configuring a Design Dialog</h2> 
  <p>The Design dialog is provided when a component has design details that can be edited in <a href="../../../sites/authoring/using/default-components-designmode.md">Design Mode</a>.<br /> </p> 
  <p>The definition is very similar to that of a <a href="#creatinganewdialog">dialog used for editing content</a>, with the difference that it is defined as a node:</p> 
  <ul> 
   <li>Node name: <span class="code">cq:design_dialog</span></li> 
   <li>Type: <span class="code">nt:unstructured</span></li> 
  </ul> 
  <h2>Creating and Configuring an Inplace Editor</h2> 
  <p>An inplace editor allows the user to edit content directly in the paragraph flow, without the need to open a dialog. For example, the standard Text and Title components both have an inplace editor.</p> 
  <p>An inplace editor is not necessary/meaningful for every component type.</p> 
  <p>See <a href="../../../sites/developing/using/customizing-page-authoring-touch.md#addnewinplaceeditor">Extending Page Authoring - Add New Inplace Editor</a> for more information.</p> 
  <h2>Customizing the Component Toolbar</h2> 
  <p>The <a href="../../../sites/developing/using/touch-ui-structure.md#componenttoolbar">Component Toolbar</a> gives the user access to a range of actions for the component such as edit, configure, copy, and delete.</p> 
  <p>See <a href="../../../sites/developing/using/customizing-page-authoring-touch.md#addnewactiontoacomponenttoolbar">Extending Page Authoring - Add New Action to a Component Toolbar</a> for more information.</p> 
  <h2>Configuring a Component for the References Rail (Borrowed/Lent)</h2> 
  <p>If your new component references content from other pages then you can consider whether you want it to impact the <strong>Borrowed Content</strong> and <strong>Lent Content</strong> sections of the <a href="../../../sites/authoring/using/basic-handling.md#references"><strong>References</strong></a> Rail.</p> 
  <p>Out-of-the-box AEM only checks the Reference component. To add your component you need to configure the OSGi bundle <strong>WCM Authoring Content Reference Configuration</strong>.<br /> </p> 
  <p>Create a new entry in the definition, specifying your component, together with the property to be checked. For example:</p> 
  <p style="margin-left: 40px;"><span class="code">/apps/&amp;lt;<i>your-Project</i>&amp;gt;/components/reference@parentPath</span></p> 
  <note> 
   <p>When working with AEM there are several methods of managing the configuration settings for such services. See <a href="../../../sites/deploying/using/configuring-osgi.md">Configuring OSGi</a> for more details and the recommended practices.</p> 
  </note> 
  <h2>Enabling and Adding Your Component to the Paragraph System</h2> 
  <p>After the component has been developed it needs to be enabled for use in an appropriate paragraph system, so it can be used on the required pages.</p> 
  <p>This can be done by either:</p> 
  <ul> 
   <li>using <a href="../../../sites/authoring/using/default-components-designmode.md">Design mode</a> when editing a specific page.</li> 
   <li><a href="../../../sites/developing/using/components-basics.md#addingyourcomponenttotheparagraphsystem">defining the <span class="code">components</span> property on the paragraph system of a template</a>.<br /> </li> 
  </ul> 
  <h2>Configuring a Paragraph System so that Dragging an Asset Creates a Component Instance</h2> 
  <p>AEM offers the possibility to configure a paragraph system on your page so that <a href="../../../sites/authoring/using/editing-content.md#insertingacomponenttouchoptimizedui">an instance of your new component is automatically created when a user drags an (appropriate) asset onto an instance of that page</a> (instead of always having to drag an empty component to the page).</p> 
  <p>This behavior, and the required asset-to-component relationship can be configured:</p> 
  <ol> 
   <li><p>Under the paragraph definition of your page design. For example:</p> 
    <ul> 
     <li><span class="code">/etc/designs/&amp;lt;myApp&amp;gt;/page/par</span></li> 
    </ul> <p>Create a new node:</p> 
    <ul> 
     <li>Name: <span class="code">cq:authoring</span></li> 
     <li>Type: <span class="code">nt:unstructured</span></li> 
    </ul> </li> 
   <li><p>Under this create a new node to hold all the asset-to-component mappings:</p> 
    <ul> 
     <li>Name: <span class="code">assetToComponentMapping</span></li> 
     <li>Type: <span class="code">nt:unstructured</span></li> 
    </ul> </li> 
   <li><p>For each asset-to-component mapping create a node:</p> 
    <ul> 
     <li>Name: text; it is recommended that the name indicate the asset and related component type; for example, image<br /> </li> 
     <li>Type: <span class="code">nt:unstructured</span></li> 
    </ul> <p>Each with the following properties:</p> 
    <ul> 
     <li><span class="code">assetGroup</span>: 
      <ul> 
       <li>Type: <span class="code">String</span></li> 
       <li>Value: the group that the related asset belongs to; for example, <span class="code">media</span></li> 
      </ul> </li> 
     <li><span class="code">assetMimetype</span>: 
      <ul> 
       <li>Type: <span class="code">String</span></li> 
       <li>Value: the mime type of the related asset; for example <span class="code">image/*</span><br /> </li> 
      </ul> </li> 
     <li><span class="code">droptarget</span>: 
      <ul> 
       <li>Type: <span class="code">String</span></li> 
       <li>Value: the drop target; for example, <span class="code">image</span><br /> </li> 
      </ul> </li> 
     <li><span class="code">resourceType</span>: 
      <ul> 
       <li>Type: <span class="code">String</span></li> 
       <li>Value: the related component resource; for example, <span class="code">foundation/components/image</span><br /> </li> 
      </ul> </li> 
     <li><span class="code">type</span>: 
      <ul> 
       <li>Type: <span class="code">String</span></li> 
       <li>Value: the type, for example, <span class="code">Images</span><br /> </li> 
      </ul> </li> 
    </ul> </li> 
  </ol> 
  <p>For examples see:</p> 
  <ul> 
   <li><span class="code">/etc/designs/geometrixx/jcr:content/page/par/cq:authoring</span></li> 
   <li><span class="code">/etc/designs/geometrixx-outdoors/jcr:content/page/par/cq:authoring</span></li> 
   <li><span class="code">/etc/designs/geometrixx-media/jcr:content/article/article-content-par/cq:authoring</span></li> 
  </ul> 
  <p>CODE ON GITHUB</p> 
  <p>You can find the code of this page on GitHub</p> 
  <ul> 
   <li><a href="https://github.com/Adobe-Marketing-Cloud/aem-project-archetype">Open aem-project-archetype project on GitHub</a></li> 
   <li>Download the project as <a href="https://github.com/Adobe-Marketing-Cloud/aem-project-archetype/archive/master.zip">a ZIP file</a></li> 
  </ul> 
  <note> 
   <p>The automatic creation of component instances can now be configured easily within the UI when using <a href="/content/help/en/experience-manager/core-components/user-guide">Core Components</a> and Editable Templates. See <a href="../../../sites/authoring/using/templates.md#main-pars-title-1754153843">Creating Page Templates</a> for more information about defining which components are automatically associated with given media types.</p> 
  </note> 
  <h2>Using the AEM Brackets Extension</h2> 
  <draft-comment color="blue" lastModifiedBy="ims-author-57F1056A4CD116590A746C15@AdobeID" lastModifiedDate="2018-01-18T11:19:14.143-0500" prevFirstName="unknown" prevLastName="unknown" type="remark"> 
   <p>still applicable?</p> 
  </draft-comment> 
  <p>The <a href="../../../sites/developing/using/aem-brackets.md">AEM Brackets Extension</a> provides a smooth workflow to edit AEM components and client libraries. It is based on the <a href="http://brackets.io/">Brackets</a> code editor.</p> 
  <p>The extension:</p> 
  <ul> 
   <li>Eases synchronization (no Maven or File Vault required) to help increase developer efficiency and also helps front-end developers with limited AEM knowledge to participate on projects.<br /> </li> 
   <li>Provides some <a href="/content/help/en/experience-manager/htl/user-guide">HTL</a> support, the template language designed to simplify component development and increase security.</li> 
  </ul> 
  <note> 
   <p>Brackets is the recommended mechanism for creating components. It replaces the CRXDE Lite - Create Component functionality, which was designed for the classic UI.</p> 
  </note> 
  <h2>Migrating from a Classic Component</h2> 
  <draft-comment color="yellow" lastModifiedBy="ims-author-57F1056A4CD116590A746C15@AdobeID" lastModifiedDate="2018-01-18T11:19:14.259-0500" prevFirstName="unknown" prevLastName="unknown" type="remark"> 
   <p><a href="https://wiki.corp.adobe.com/display/~meyer/TouchUI+Migration+Guide">https://wiki.corp.adobe.com/display/~meyer/TouchUI+Migration+Guide</a></p> 
   <p><a href="https://wiki.corp.adobe.com/pages/viewpage.action?pageId=1011600299">https://wiki.corp.adobe.com/pages/viewpage.action?pageId=1011600299</a></p> 
  </draft-comment> 
  <p>When migrating a component that was designed for use with the classic UI to a component that can be used with the touch-enabled UI (either solely or jointly) the following issues should be considered:<br /> </p> 
  <ul> 
   <li>HTL 
    <ul> 
     <li>Use of <a href="/content/help/en/experience-manager/htl/user-guide">HTL</a> is not compulsory, but if your component needs updating then it is an ideal time to consider <a href="../../../sites/developing/using/components-basics.md#main-pars-title-767660733">migrating from JSP to HTL</a>.<br /> </li> 
    </ul> </li> 
   <li>Components 
    <ul> 
     <li>Migrate <a href="../../../sites/developing/using/developing-components.md#main-pars-title-1688147506"><span class="code">cq:listener</span></a> code that use classic UI specific functions</li> 
     <li>RTE plugin, for further information see <a href="../../../sites/administering/using/rich-text-editor.md">Configuring the Rich Text Editor</a>.</li> 
     <li><a href="#migratingcqlistenercode">Migrate <span class="code">cq:listener</span> code</a> that uses functions specific to the classic UI</li> 
    </ul> </li> 
   <li>Dialogs 
    <ul> 
     <li>You will need to create a new dialog for use in the touch-enabled UI. However, for compatibility purposes the touch-enabled UI can use the definition of a classic UI dialog, when no dialog has been defined for the touch-enabled UI.<br /> </li> 
     <li>The <a href="../../../sites/developing/using/dialog-conversion.md">Dialog Conversion Tool</a> is provided to help you extend existing components.</li> 
     <li><a href="../../../sites/developing/using/touch-ui-concepts.md#main-pars-title-13">Mapping ExtJS to Granite UI Components</a> provides a convenient overview of ExtJS xtypes and node types with their equivalent Granite UI resource types.</li> 
     <li>Customizing fields, for more information see the AEM Gems session on <a href="http://docs.adobe.com/content/ddc/en/gems/customizing-dialog-fields-in-touch-ui.html">Customizing Dialog Fields</a>.</li> 
     <li>Migrate from vtypes to <a href="/sites/developing/using/reference-materials/granite-ui/api/jcr_root/libs/granite/ui/components/foundation/clientlibs/foundation/js/validation/index">Granite UI validation</a></li> 
     <li>Using JS listeners, for more information see <a href="#handlingfieldevents">Handling Field Events</a> and the AEM Gems session on <a href="http://docs.adobe.com/content/ddc/en/gems/customizing-dialog-fields-in-touch-ui.html">Customizing Dialog Fields</a>.</li> 
    </ul> </li> 
  </ul> 
  <h3>Migrating cq:listener Code</h3> 
  <p>If you are migrating a project that was designed for the classic UI, then the <span class="code">cq:listener</span> code (and component related clientlibs) might use functions that are specific to the classic UI (such as <span class="code">CQ.wcm.*</span>). For the migration you must update such code using the equivalent objects/functions in the touch-enabled UI.<br /> </p> 
  <p>If your project is being completely migrated to the touch-enabled UI you need to replace such code to use the objects and functions relevant to the touch-enabled UI.</p> 
  <p>However, if your project must cater for both the classic UI and the touch-enabled UI during the migration period (the usual scenario), then you need to implement a switch to differentiate the separate code referencing the appropriate objects.</p> 
  <p>This switch mechanism can be implemented as:</p> 
  <codeblock gutter="true" class="syntax js">
    if&amp;nbsp;(Granite.author)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//&amp;nbsp;touch&amp;nbsp;UI!!discoiqbr!!}&amp;nbsp;else&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//&amp;nbsp;classic&amp;nbsp;UI!!discoiqbr!!} 
  </codeblock> 
  <h2>Documenting Your Component</h2> 
  <p>As a developer, you want easy access to component documentation so that you can quickly understand:</p> 
  <ul> 
   <li>Description</li> 
   <li>Intended use</li> 
   <li>Content structure and properties</li> 
   <li>Exposed APIs and extension points</li> 
   <li>Etc.</li> 
  </ul> 
  <p>For this reason, it is quite easy to make any existing documentation markdown you have available within the component itself.</p> 
  <p>All you need to do is place a <span class="code">README.md</span> file in the component structure. This markdown will then be displayed in the <a href="../../../sites/authoring/using/default-components-console.md">component console</a>.</p> 
  <img imageRotate="0" src="assets/chlimage_1-244.png" /> 
  <p>The supported markdown is the same as that for <a href="../../../assets/using/content-fragments-markdown.md">content fragments</a>.</p> 
 </body> 
</html>