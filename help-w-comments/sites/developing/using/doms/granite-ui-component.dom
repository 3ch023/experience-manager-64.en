<?xml version="1.1" encoding="UTF-8" standalone="yes"?> 
<html> 
 <head> 
  <meta content="Guillaume Carlino" name="contentOwner" /> 
  <meta content="" name="jcr:versionHistory" /> 
  <meta content="help/components/pages/article-3" name="sling:resourceType" /> 
  <meta content="en_us" name="jcr:language" /> 
  <meta content="/content/help/en/experience-manager/6-4/sites/developing/morehelp/platform;/content/help/en/experience-manager/6-4/sites/developing/morehelp/platform" name="moreHelpPaths" /> 
  <meta content="2018-05-08T12:43:34.387-0400" name="cq:lastModified" /> 
  <meta content="" name="jcr:primaryType" /> 
  <meta content="true" name="jcr:isCheckedOut" /> 
  <meta content="2017-12-06T06:07:43.952-0500" name="topicBrowsingSortDate" /> 
  <meta content="2017-10-12T21:46:58.665-0400" name="mwpw_migration_script_version" /> 
  <meta content="Creating a New Granite UI Field Component" name="navTitle" /> 
  <meta content="83e4c61e-d315-497d-b080-a01cb59278de" name="jcr:predecessors" /> 
  <meta content="admin" name="jcr:createdBy" /> 
  <meta content="/etc/designs/help" name="cq:designPath" /> 
  <meta content="false" name="isReadyForLocalization" /> 
  <meta content="2017-10-12T21:46:58.665-0400" name="qaDate" /> 
  <meta content="2018-04-03T09:00:50.643-0400" name="cq:lastReplicated" /> 
  <meta content="https://helpx.adobe.com/experience-manager/6-3/sites/developing/using/granite-ui-component.html" name="publishExternalURL" /> 
  <meta content="ca81c803-d578-44c2-87bc-1311d849d8ca" name="jcr:uuid" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES" name="primaryProductTag" /> 
  <meta content="Activate" name="cq:lastReplicationAction" /> 
  <meta content="bohnert" name="cq:lastModifiedBy" /> 
  <meta content="/apps/help/templates/article-3" name="cq:template" /> 
  <meta content="" name="jcr:baseVersion" /> 
  <meta content="2017-12-06T06:07:43.952-0500" name="lastPublishExternalDate" /> 
  <meta content="2017-12-07T19:01:20.610-0500" name="jcr:created" /> 
  <meta content="2017-12-06T06:07:43.952-0500" name="publishExternalDate" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES;topic_tags:platform;content_type:reference" name="cq:tags" /> 
  <meta content="Creating a New Granite UI Field Component" name="jcr:title" /> 
  <meta content="carlino" name="cq:lastReplicatedBy" /> 
  <meta content="2017-10-31T16:16:41.713-0400" name="firstPublishExternalDate" /> 
  <meta content="audience:developing" name="primaryAudienceTag" /> 
  <meta content="Creating a New Granite UI Field Component" name="seoTitle" /> 
  <meta content="/content/docs/en/aem/6-3/develop/platform/granite-ui-component" name="qaNotes" /> 
  <meta content="bohnert@adobe.com" name="lr_lastReplicatedBy" /> 
  <meta content="2018-05-08T12:43:34.386-0400" name="locHandOffDate" /> 
  <meta content="mix:versionable" name="jcr:mixinTypes" /> 
  <meta content="Granite UI provides a range of components designed to be used in forms, called fields" name="seoDescription" /> 
 </head> 
 <body> 
  <p>Granite UI provides a range of components designed to be used in forms; these are called <i>fields</i> in the Granite UI vocabulary. The standard Granite form components are available under:</p> 
  <p style="margin-left: 40px;"><span class="code">/libs/granite/ui/components/foundation/form/*</span></p> 
  <note> 
   <p>These Granite UI form fields are of particular interest as they are used for <a href="../../../sites/developing/using/developing-components.md">component dialogs</a>.</p> 
  </note> 
  <note> 
   <p>For full details about fields, please see the <a href="/sites/developing/using/reference-materials/granite-ui/api/index">Granite UI documentation</a>.</p> 
  </note> 
  <p>Use the Granite UI Foundation framework to develop and/or extend Granite components. This has two elements:</p> 
  <ul> 
   <li>server-side: 
    <ul> 
     <li>a collection of foundation components 
      <ul> 
       <li>foundation - modular, composable, layerable, reusable</li> 
       <li>components - Sling components<br /> </li> 
      </ul> </li> 
     <li>helpers to aid application development</li> 
    </ul> </li> 
   <li>client-side: 
    <ul> 
     <li>a collection of clientlibs providing some vocabulary (i.e. extension of the HTML language) to achieve generic interaction patterns through an Hypermedia-driven UI</li> 
    </ul> </li> 
  </ul> 
  <p>The generic Granite UI component <span class="code">field</span> is composed of two files of interest:</p> 
  <ul> 
   <li><span class="code">init.jsp</span>: handles the generic processing; labelling, description, and provides form value you will need when rendering your field.</li> 
   <li><span class="code">render.jsp</span>: this is where the actual rendering of the field is performed and needs to be overridden for your custom field; is included by <span class="code">init.jsp</span>.</li> 
  </ul> 
  <p>Please refer to the <a href="/sites/developing/using/reference-materials/granite-ui/api/jcr_root/libs/granite/ui/components/foundation/form/field/index">Granite UI documentation - Field</a> if you want more details.</p> 
  <p>For examples, see:</p> 
  <ul> 
   <li><span class="code">cqgems/customizingfield/components/colorpicker</span> <br /> 
    <ul> 
     <li>provided by the <a href="../../../sites/developing/using/developing-components-samples.md#codesamplehowtocustomizedialogfields">Code Sample</a></li> 
    </ul> </li> 
   <li><span class="code">granite/ui/components/foundation/form</span></li> 
  </ul> 
  <note> 
   <p>As this mechanism uses JSP, i18n and XSS are not given out-of-the-box. This means that you will need to internationalize and escape your Strings. The following directoriy contains the generic fields from a standard instance, you can use these as a reference: </p> 
   <p><span class="code">/libs/granite/ui/components/foundation/form</span> directory</p> 
  </note> 
  <h3>Creating the server-side script for the component</h3> 
  <p>Your customized field should only override the <span class="code">render.jsp</span> script, where you provide the markup for your component. You can consider the JSP (i.e. the rendering script) as a wrapper for your markup.</p> 
  <ol> 
   <li><p>Create a new component that uses the <span class="code">sling:resourceSuperType</span> property to inherit from:</p>  </li> 
   <li><p>Override the script:</p>  <p>In this script, you need to generate the hypermedia markup (i.e. enriched markup, containing the hypermedia affordance) so that the client knows how to interact with the generated element. This should follow the Granite UI server-side style of coding.</p> <p>When customizing, the only contract that you <i>must</i> fulfill is to read the form value (initialized in <span class="code">init.jsp</span>) from the request using:</p> 
    <codeblock gutter="true" class="syntax js">
      //&amp;nbsp;Delivers&amp;nbsp;the&amp;nbsp;value&amp;nbsp;of&amp;nbsp;the&amp;nbsp;field&amp;nbsp;(read&amp;nbsp;from&amp;nbsp;the&amp;nbsp;content)!!discoiqbr!!ValueMap&amp;nbsp;vm&amp;nbsp;=&amp;nbsp;(ValueMap)&amp;nbsp;request.getAttribute(Field.class.getName());!!discoiqbr!!vm.get("value,&amp;nbsp;String.class");&amp;nbsp; 
    </codeblock><p>For more details, please refer to the implementation of out-ot-the-box Granite UI fields; for example, <span class="code">/libs/granite/ui/components/foundation/form/textfield</span>.</p> 
    <note> 
     <p>At the moment, JSP is the preferred scripting method, as passing information from one component to another (which is quite frequent in the context of form/fields) is not easily achieved in HTL.</p> 
    </note></li> 
  </ol> 
  <h3>Creating the client-library for the component</h3> 
  <p>To add specific client-side behavior to your component:</p> 
  <ol> 
   <li><p>Create a clientlib of category <span class="code">cq.authoring.dialog</span>.</p> </li> 
   <li><p>Create a clientlib of category <span class="code">cq.authoring.dialog</span> and define your <span class="code">JS</span>/<span class="code">CSS</span> inside it.</p> <p>Define your <span class="code">JS</span>/<span class="code">CSS</span> inside the clientlib.</p> 
    <note> 
     <p>At the moment, the Granite UI does not provide any out-of-the-box listeners or hooks that you can use directly to add JS behavior. So, to add additional JS behavior to your component, you have to implement a JS hook to a custom class that you then assign to your component during the markup generation.</p> 
    </note></li> 
  </ol> 
 </body> 
</html>