<?xml version="1.1" encoding="UTF-8" standalone="yes"?> 
<html> 
 <head> 
  <meta content="Getting Started with SPAs in AEM - React" name="seoTitle" /> 
  <meta content="bohnert@adobe.com" name="lr_lastReplicatedBy" /> 
  <meta content="2018-12-11T04:52:22.888-0500" name="cq:lastReplicated" /> 
  <meta content="https://helpx.adobe.com/experience-manager/6-4/sites/developing/using/spa-getting-started-react.html" name="publishExternalURL" /> 
  <meta content="admin" name="jcr:createdBy" /> 
  <meta content="bohnert" name="cq:lastReplicatedBy" /> 
  <meta content="This article presents a sample SPA application, explains how it is put together, and allows you to get up-and-running with your own SPA quickly using the React framework." name="seoDescription" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES;topic_tags:spa;content_type:reference" name="cq:tags" /> 
  <meta content="true" name="jcr:isCheckedOut" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES" name="primaryProductTag" /> 
  <meta content="en_us" name="jcr:language" /> 
  <meta content="/etc/designs/help" name="cq:designPath" /> 
  <meta content="bohnert" name="cq:lastModifiedBy" /> 
  <meta content="2018-12-11T04:52:22.462-0500" name="lastPublishExternalDate" /> 
  <meta content="" name="jcr:versionHistory" /> 
  <meta content="en" name="pageCreatedAt" /> 
  <meta content="f65417dd-2d62-490d-bb06-edf8c995d270" name="jcr:predecessors" /> 
  <meta content="/content/help/en/experience-manager/6-4/sites/developing/morehelp/spa;/content/help/en/experience-manager/6-4/sites/developing/morehelp/spa" name="moreHelpPaths" /> 
  <meta content="2019-01-15T15:36:43.323-0500" name="jcr:created" /> 
  <meta content="" name="jcr:primaryType" /> 
  <meta content="" name="jcr:baseVersion" /> 
  <meta content="2018-12-11T04:52:22.478-0500" name="cq:lastModified" /> 
  <meta content="2018-05-08T12:45:16.082-0400" name="locHandOffDate" /> 
  <meta content="audience:developing" name="primaryAudienceTag" /> 
  <meta content="fef4cacc-f082-48bc-b22c-6763c1b2fc47" name="jcr:uuid" /> 
  <meta content="Getting Started with SPAs in AEM - React" name="jcr:title" /> 
  <meta content="Activate" name="cq:lastReplicationAction" /> 
  <meta content="2018-12-11T04:52:22.462-0500" name="publishExternalDate" /> 
  <meta content="mix:versionable" name="jcr:mixinTypes" /> 
  <meta content="help/components/pages/article-3" name="sling:resourceType" /> 
  <meta content="bohnert" name="contentOwner" /> 
  <meta content="/apps/help/templates/article-3" name="cq:template" /> 
  <meta content="2018-09-07T12:31:19.717-0400" name="firstPublishExternalDate" /> 
  <meta content="2018-12-11T04:52:22.462-0500" name="topicBrowsingSortDate" /> 
 </head> 
 <body> 
  <p>Single page applications (SPAs) can offer compelling experiences for website users. Developers want to be able to build sites using SPA frameworks and authors want to seamlessly edit content within AEM for a site built using SPA frameworks.</p> 
  <p>The SPA authoring feature offers a comprehensive solution for supporting SPAs within AEM. This article presents a simplified SPA application on the React framework, explains how it is put together, allowing you to get up-and-running with your own SPA quickly.<br /> </p> 
  <note> 
   <p>This article is based on the React framework. For the corresponding document for the Angular framework see <a href="../../../sites/developing/using/spa-getting-started-angular.md">Getting Started with SPAs in AEM - Angular</a>.<br /> </p> 
  </note> 
  <h2>Introduction</h2> 
  <p>This article summarizes the basic functioning of a simple SPA and the minimum that you need to know to get yours running.</p> 
  <p>For more detail on how SPAs work in AEM, see the following documents:</p> 
  <ul> 
   <li><a href="../../../sites/developing/using/spa-walkthrough.md">SPA Introduction and Walkthrough</a><br /> </li> 
   <li><a href="../../../sites/developing/using/spa-overview.md">SPA Authoring Introduction</a><br /> </li> 
   <li><a href="../../../sites/developing/using/spa-blueprint.md">SPA Blueprint</a><br /> </li> 
  </ul> 
  <note> 
   <p>In order to be able to author content within an SPA, the content must be stored in AEM and be exposed by the content model.</p> 
   <p>An SPA developed outside of AEM will not be authorable if it does not respect the content model contract.<br /> </p> 
  </note> 
  <p>This document will walk through the structure of a simplified SPA created using the React framework and illustrate how it works so you can apply this understanding to your own SPA.<br /> </p> 
  <h2>Dependencies, Configuration, and Building</h2> 
  <p>In addition to the expected React dependency, the sample SPA can leverage additional libraries to make the creation of the SPA more efficient.<br /> </p> 
  <h3>Dependencies</h3> 
  <p>The <span class="code">package.json</span> file defines the requirements of the overall SPA package. The minimum AEM dependencies for a working SPA are listed here.<br /> </p> 
  <codeblock class="syntax js">
    &amp;nbsp;&amp;nbsp;"dependencies":&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"@adobe/cq-react-editable-components":&amp;nbsp;"~1.0.3",!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"@adobe/cq-spa-component-mapping":&amp;nbsp;"~1.0.3",!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"@adobe/cq-spa-page-model-manager":&amp;nbsp;"~1.0.4"!!discoiqbr!!&amp;nbsp;&amp;nbsp;} 
  </codeblock> 
  <p>Because this example is based on the React framework, there are two React-specific dependencies which are obligatory in the <span class="code">package.json</span> file:</p> 
  <p style="margin-left: 40px;"><code class="code">react
    <discoiqbr /> react-dom</code></p> 
  <draft-comment lastModifiedBy="fauchere" lastModifiedDate="2018-12-10T10:56:28.858-0500" type="annotation">
    Doesn't bring enough value and hard to maintain 
  </draft-comment> 
  <p>The <span class="code">aem-clientlib-generator</span> is leveraged to make the creation of client libraries automatic as part of the build process.</p> 
  <p style="margin-left: 40px;"><span class="code">"aem-clientlib-generator": "^1.4.1",</span></p> 
  <p>Further details about it can be found <a href="https://github.com/wcm-io-frontend/aem-clientlib-generator">on GitHub here</a>.<br /> </p> 
  <note> 
   <p>The minimum version of the <span class="code">aem-clientlib-generator</span> required is 1.4.1.<br /> </p> 
  </note> 
  <p>The <span class="code">aem-clientlib-generator</span> is configured in the <span class="code">clientlib.config.js</span> file as follows.</p> 
  <codeblock gutter="true" class="syntax js">
    module.exports&amp;nbsp;=&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//&amp;nbsp;default&amp;nbsp;working&amp;nbsp;directory&amp;nbsp;(can&amp;nbsp;be&amp;nbsp;changed&amp;nbsp;per&amp;nbsp;'cwd'&amp;nbsp;in&amp;nbsp;every&amp;nbsp;asset&amp;nbsp;option)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;context:&amp;nbsp;__dirname,!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//&amp;nbsp;path&amp;nbsp;to&amp;nbsp;the&amp;nbsp;clientlib&amp;nbsp;root&amp;nbsp;folder&amp;nbsp;(output)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;clientLibRoot:&amp;nbsp;"./../content/jcr_root/apps/my-react-app/clientlibs",!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;libs:&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;name:&amp;nbsp;"my-react-app",!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;allowProxy:&amp;nbsp;true,!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;categories:&amp;nbsp;["my-react-app"],!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;embed:&amp;nbsp;["my-react-app.responsivegrid"],!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;jsProcessor:&amp;nbsp;["min:gcc"],!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;serializationFormat:&amp;nbsp;"xml",!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;assets:&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;js:&amp;nbsp;[!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"dist/**/*.js"!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;],!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;css:&amp;nbsp;[!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"dist/**/*.css"!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;]!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!}; 
  </codeblock> 
  <h3>Building</h3> 
  <p>Actually building the app leverages <a href="https://webpack.js.org/">Webpack</a> for transpilation in addition to the aem-clientlib-generator for automatic client library creation. Therefore the build command will resemble:</p> 
  <p style="margin-left: 40px;"><span class="code">"build": "webpack &amp;&amp; clientlib --verbose"</span></p> 
  <p>Once built, the package can be uploaded to an AEM instance.<br /> </p> 
  <h3>Maven Archetype for SPA Starter Kit</h3> 
  <p>Adobe recommends leveraging the <a href="https://github.com/adobe/aem-spa-project-archetype">Maven Archetype for SPA Starter Kit</a> to help you start your own SPA project for AEM.</p> 
  <h2>Application Structure</h2> 
  <p>Including the dependencies and building your app as described previously will leave you with a working SPA package which you can upload to your AEM instance.</p> 
  <p>The next section of this document will take you through how a SPA in AEM is structured, the important files which drive the application, and how they work together.</p> 
  <p>A simplified image component is used as an example, but all components of the application are based on the same concept.</p> 
  <h3>index.js</h3> 
  <p>The entry point into the SPA is of course the <span class="code">index.js</span> file shown here simplified to focus on the important content.<br /> </p> 
  <codeblock gutter="true" class="syntax js">
    import&amp;nbsp;ReactDOM&amp;nbsp;from&amp;nbsp;'react-dom';!!discoiqbr!!import&amp;nbsp;App&amp;nbsp;from&amp;nbsp;'./App';!!discoiqbr!!import&amp;nbsp;{&amp;nbsp;ModelManager,&amp;nbsp;Constants&amp;nbsp;}&amp;nbsp;from&amp;nbsp;"@adobe/cq-spa-page-model-manager";!!discoiqbr!!!!discoiqbr!!...!!discoiqbr!!!!discoiqbr!!ModelManager.initialize().then((pageModel)&amp;nbsp;=&gt;&amp;nbsp;{!!discoiqbr!!ReactDOM.render(!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;App&amp;nbsp;cqChildren={pageModel[Constants.CHILDREN_PROP]}&amp;nbsp;cqItems={pageModel[Constants.ITEMS_PROP]}&amp;nbsp;cqItemsOrder={pageModel[Constants.ITEMS_ORDER_PROP]}&amp;nbsp;cqPath={ModelManager.rootPath}&amp;nbsp;locationPathname={&amp;nbsp;window.location.pathname&amp;nbsp;}/&gt;!!discoiqbr!!,&amp;nbsp;document.getElementById('page'));!!discoiqbr!!!!discoiqbr!!}); 
  </codeblock> 
  <p>The main function of <span class="code">index.js</span> is to leverage the <span class="code">ReactDOM.render</span> function to determine where in the DOM to inject the application.</p> 
  <p>This is a standard use of this function, not unique to this example app.<br /> </p> 
  <h4>Static Instantiation</h4> 
  <p>When the component is instantiated statically using the component template (e.g. JSX), the value must be passed from the model to the properties of the component.<br /> </p> 
  <h3>App.js</h3> 
  <p>By rendering the app, <span class="code">index.js</span> calls <span class="code">App.js</span>, which is shown here in a simplified version to focus on the important content.</p> 
  <codeblock gutter="true" class="syntax js">
    import&amp;nbsp;{Page,&amp;nbsp;withModel&amp;nbsp;}&amp;nbsp;from&amp;nbsp;'@adobe/cq-react-editable-components';!!discoiqbr!!!!discoiqbr!!...!!discoiqbr!!!!discoiqbr!!class&amp;nbsp;App&amp;nbsp;extends&amp;nbsp;Page&amp;nbsp;{!!discoiqbr!!...!!discoiqbr!!}!!discoiqbr!!!!discoiqbr!!export&amp;nbsp;default&amp;nbsp;withModel(App); 
  </codeblock> 
  <p><span class="code">App.js</span> primarially serves to wrap the root components that compose the app. The entry point of any app is the page.</p> 
  <h3>Page.js</h3> 
  <p>By rendering the page, <span class="code">App.js</span> calls <span class="code">Page.js</span> listed here in a simplfied version.<br /> </p> 
  <codeblock gutter="true" class="syntax js">
    import&amp;nbsp;{Page,&amp;nbsp;MapTo,&amp;nbsp;withComponentMappingContext&amp;nbsp;}&amp;nbsp;from&amp;nbsp;"@adobe/cq-react-editable-components";!!discoiqbr!!!!discoiqbr!!...!!discoiqbr!!!!discoiqbr!!class&amp;nbsp;AppPage&amp;nbsp;extends&amp;nbsp;Page&amp;nbsp;{!!discoiqbr!!...!!discoiqbr!!}!!discoiqbr!!!!discoiqbr!!MapTo('my-react-app/components/structure/page')(withComponentMappingContext(AppPage));!!discoiqbr!! 
  </codeblock> 
  <p>In this example the <span class="code">AppPage</span> class extends <span class="code">Page</span>, which contains the inner-content methods that can then be used.</p> 
  <p>The <span class="code">Page</span> ingests the JSON representation of the page model and processes the content to wrap/decorate each element of the page. Further details on the <span class="code">Page</span> can be found in the document <a href="../../../sites/developing/using/spa-blueprint.md#main-pars-header-1694932501">SPA Blueprint</a>.</p> 
  <h3>Image.js</h3> 
  <p>With the page rendered, the components such as <span class="code">Image.js</span> as shown here can be rendered.<br /> </p> 
  <codeblock gutter="true" class="syntax js">
    import&amp;nbsp;React,&amp;nbsp;{Component}&amp;nbsp;from&amp;nbsp;'react';!!discoiqbr!!import&amp;nbsp;{MapTo}&amp;nbsp;from&amp;nbsp;'@adobe/cq-react-editable-components';!!discoiqbr!!!!discoiqbr!!require('./Image.css');!!discoiqbr!!!!discoiqbr!!const&amp;nbsp;ImageEditConfig&amp;nbsp;=&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;emptyLabel:&amp;nbsp;'Image',!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;isEmpty:&amp;nbsp;function()&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;!this.props&amp;nbsp;||&amp;nbsp;!this.props.src&amp;nbsp;||&amp;nbsp;this.props.src.trim().length&amp;nbsp;&lt;&amp;nbsp;1;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!};!!discoiqbr!!!!discoiqbr!!class&amp;nbsp;Image&amp;nbsp;extends&amp;nbsp;Component&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;render()&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;(&lt;img&amp;nbsp;src={this.props.src}&gt;);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!}!!discoiqbr!!!!discoiqbr!!MapTo('my-react-app/components/content/image')(Image,&amp;nbsp;ImageEditConfig); 
  </codeblock> 
  <p>The central idea of SPAs in AEM is the idea of mapping SPA components to AEM components and updating the component when the content is modified (and vice versa). See the document <a href="../../../sites/developing/using/spa-overview.md">SPA Editor Overview</a> for an summary of this communication model.</p> 
  <p style="margin-left: 40px;"><span class="code">MapTo('my-react-app/components/content/image')(Image, ImageEditConfig);</span></p> 
  <p>The <span class="code">MapTo</span> method maps the SPA component to the AEM component. It supports the use of a single string or an array of strings.</p> 
  <p><span class="code">ImageEditConfig</span> is a configuration object that contributes to enabling the authoring capabilities of a component by providing the necessary metadata for the editor to generate placeholders</p> 
  <p>If there is no content, labels are provided as placeholders to represent the empty content.<br /> </p> 
  <h4>Dynamically Passed Properties</h4> 
  <p>The data coming from the model are dynamically passed as properties of the component.</p> 
  <h2>Exporting Editable Content</h2> 
  <p>You can export a component and keep it editable.</p> 
  <codeblock gutter="true" class="syntax js">
    import&amp;nbsp;React,&amp;nbsp;{&amp;nbsp;Component&amp;nbsp;}&amp;nbsp;from&amp;nbsp;'react';!!discoiqbr!!import&amp;nbsp;{&amp;nbsp;MapTo&amp;nbsp;}&amp;nbsp;from&amp;nbsp;'@cq/cq-react-editable-components';!!discoiqbr!!!!discoiqbr!!...!!discoiqbr!!!!discoiqbr!!const&amp;nbsp;EditConfig&amp;nbsp;=&amp;nbsp;{...}!!discoiqbr!!!!discoiqbr!!class&amp;nbsp;PageClass&amp;nbsp;extends&amp;nbsp;Component&amp;nbsp;{...};!!discoiqbr!!!!discoiqbr!!...!!discoiqbr!!!!discoiqbr!!export&amp;nbsp;default&amp;nbsp;MapTo('my-react-app/react/components/structure/page')(PageClass,&amp;nbsp;EditConfig); 
  </codeblock> 
  <p>The <span class="code">MapTo</span> function returns a <span class="code">Component</span> which is the result of a composition that extends the provided <span class="code">PageClass</span> with the class names and attributes that enable the authoring. This component can be exported to later be instantiated in the markup of your application.</p> 
  <p>When exported using the <span class="code">MapTo</span> or <span class="code">withModel</span> functions, the <span class="code">Page</span> component, is wrapped with a <span class="code">ModelProvider</span> component which provides standard components access to the latest version of the page model or a precise location in that page model. </p> 
  <p>For more information see the <a href="../../../sites/developing/using/spa-blueprint.md#main-pars-header-329251743">SPA Blueprint document</a>.</p> 
  <note> 
   <p>By default you receive the entire model of the component when using the <span class="code">withModel</span> function.</p> 
  </note> 
  <h2>Next Steps</h2> 
  <p>For a step-by-step guide to creating your own SPA, see the <a href="/content/help/en/experience-manager/kt/sites/using/getting-started-spa-wknd-tutorial-develop">Getting Started with the AEM SPA Editor - WKND Events Tutorial</a>.<br /> </p> 
  <p>For further information about how to oraganize yourself to develop SPAs for AEM see the article <a href="../../../sites/developing/using/spa-architecture.md">Developing SPAs for AEM</a>.</p> 
  <p>For further details about the dynamic model to component mapping and how it works within SPAs in AEM, see the article <a href="../../../sites/developing/using/spa-dynamic-model-to-component-mapping.md">Dynamic Model to Component Mapping for SPAs</a>.</p> 
  <p>If you wish to implement SPAs in AEM for a framework other than React or Angular or simply wish to take a deep dive into how the SPA SDK for AEM works, refer to the <a href="../../../sites/developing/using/spa-blueprint.md">SPA Blueprint</a> article.<br /> </p> 
 </body> 
</html>