<?xml version="1.1" encoding="UTF-8" standalone="yes"?> 
<html> 
 <head> 
  <meta content="false" name="isReadyForLocalization" /> 
  <meta content="User" name="contentOwner" /> 
  <meta content="inherit" name="hidePromoComponent" /> 
  <meta content="/etc/designs/help" name="cq:designPath" /> 
  <meta content="light" name="gnavTheme" /> 
  <meta content="/apps/help/templates/article-3" name="cq:template" /> 
  <meta content="mix:versionable" name="jcr:mixinTypes" /> 
  <meta content="Audit Log Maintenance in AEM 6" name="jcr:title" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES" name="primaryProductTag" /> 
  <meta content="2018-04-26T10:12:30.810-0400" name="locHandOffDate" /> 
  <meta content="2017-10-12T21:46:58.665-0400" name="mwpw_migration_script_version" /> 
  <meta content="https://helpx.adobe.com/experience-manager/6-4/sites/administering/using/operations-audit-log.html" name="publishExternalURL" /> 
  <meta content="2017-10-31T16:24:36.949-0400" name="firstPublishExternalDate" /> 
  <meta content="/content/docs/en/aem/6-3/administer/operations/operations-dashboard/audit-log-maintenance" name="qaNotes" /> 
  <meta content="Audit Log Maintenance in AEM 6" name="navTitle" /> 
  <meta content="" name="jcr:versionHistory" /> 
  <meta content="2018-12-06T10:34:32.388-0500" name="cq:lastReplicated" /> 
  <meta content="2017-10-12T21:46:00.000-0400" name="qaDate" /> 
  <meta content="no" name="groupSectionNavItems" /> 
  <meta content="audience:administering" name="primaryAudienceTag" /> 
  <meta content="2018-12-06T10:33:49.596-0500" name="cq:lastModified" /> 
  <meta content="help/components/pages/article-3" name="sling:resourceType" /> 
  <meta content="2018-04-03T07:04:58.600-0400" name="publishExternalDate" /> 
  <meta content="admin" name="jcr:createdBy" /> 
  <meta content="Audit Log Maintenance in AEM 6" name="seoTitle" /> 
  <meta content="/content/help/en/experience-manager/6-4/sites/administering/morehelp/operations;/content/help/en/experience-manager/6-4/sites/administering/morehelp/operations" name="moreHelpPaths" /> 
  <meta content="2018-04-03T07:04:58.600-0400" name="topicBrowsingSortDate" /> 
  <meta content="inherit" name="hideMerchandisingBar" /> 
  <meta content="sarchiz" name="cq:lastModifiedBy" /> 
  <meta content="sarchiz" name="cq:lastReplicatedBy" /> 
  <meta content="" name="jcr:baseVersion" /> 
  <meta content="b40741de-d2d9-45c2-9e58-de799d1f8778" name="jcr:uuid" /> 
  <meta content="true" name="jcr:isCheckedOut" /> 
  <meta content="83eeaa8b-56ce-4da3-b995-534126e6bb46" name="jcr:predecessors" /> 
  <meta content="426x240" name="modalSize" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES;topic_tags:operations;content_type:reference" name="cq:tags" /> 
  <meta content="Activate" name="cq:lastReplicationAction" /> 
  <meta content="" name="jcr:primaryType" /> 
  <meta content="en_us" name="jcr:language" /> 
  <meta content="2018-04-03T07:04:58.600-0400" name="lastPublishExternalDate" /> 
  <meta content="Lear about Audit Log Maintenance in AEM." name="seoDescription" /> 
  <meta content="dist5" name="distType" /> 
  <meta content="2017-12-01T19:03:47.007-0500" name="jcr:created" /> 
  <meta content="carlino@adobe.com" name="lr_lastReplicatedBy" /> 
 </head> 
 <body> 
  <p>AEM events that qualify for audit logging generate much archived data. This data can quickly grow over time due to replications, asset uploads and other system activities.</p> 
  <p>The Audit Log Maintenance includes several parts of functionality that enables the ability to automate audit log maintenance under specific policies.</p> 
  <p>It is implemented as a configurable weekly maintenance task and is accessible via the Operations Dashboard monitoring console.</p> 
  <p>For more information, refer to the <a href="../../../sites/administering/using/operations-dashboard.md">Operations Dashboard Documentation</a>.<br /> </p> 
  <p>There are three types of Audit Log Purge options:</p> 
  <ol> 
   <li><a href="../../../sites/administering/using/operations-audit-log.md#configurepageauditlogpurging">Page Audit Log Purging</a></li> 
   <li><a href="../../../sites/administering/using/operations-audit-log.md#configuredamauditlogpurging">DAM Audit Log Purging</a></li> 
   <li><a href="../../../sites/administering/using/operations-audit-log.md#configurereplicationauditlogpurging">Replication Audit Log Puring</a></li> 
  </ol> 
  <p>Each can be configured by creating rules in the AEM Web Console. After they have been configured, you can trigger them by going to <strong>Tools - Operations - Maintenance</strong> <strong>-</strong> <strong>Weekly Maintenance Window </strong>and running the <strong>AuditLog Maintenance Task</strong>.</p> 
  <h2>Configure Page Audit Log Purging</h2> 
  <p>Follow these steps in order to configure Audit Log Purging:<br /> </p> 
  <ol> 
   <li><p>Go to the Web Console Admin by pointing your browser to <span class="code">http://localhost:4502/system/console/configMgr/</span><br /> </p> </li> 
   <li><p>Search for an item called <strong>Pages</strong> <strong>audit Log Purge rule</strong> and click it.</p> <img imageRotate="0" src="assets/chlimage_1-452.png" /></li> 
   <li><p>Next, configure the purge scheduler according to your requirements. The available options are:</p> 
    <ul> 
     <li><strong>Rule name:</strong> the name of the audit policy rule;</li> 
     <li><strong>Content path:</strong> the path of the content the rule will apply to;<br /> </li> 
     <li><strong>Minimum age:</strong> the time in days the audit logs need to be kept;</li> 
     <li><strong>Audit log type:</strong> the type of audit log that should be purged.</li> 
    </ul> 
    <note> 
     <p>The content path only applies to children of the <span class="code">/var/audit/com.day.cq.wcm.core.page</span> node in the repository.</p> 
    </note></li> 
   <li><p>Save the rule.</p> </li> 
   <li><p>The rule you just created needs to be exposed in the Operations Dashboard in order for it to be executed. In order to do this, go <strong>Tools - Operations - Maintenance</strong> from the AEM Welcome screen.<br /> </p> </li> 
   <li><p>Press the <strong>Weekly Maintenance Window</strong> card.<br /> </p> </li> 
   <li><p>You will find the maintenance task already present under the <strong>AuditLog Maintenance Task</strong> card.</p> <img imageRotate="0" src="assets/chlimage_1-453.png" /></li> 
   <li><p>You can either inspect the date of the next execution, configure it, or manually executing it by pressing the play button.<br /> </p> </li> 
  </ol> 
  <p>In AEM 6.3, if the scheduled maintenance window closes before the Audit Log Purge task can complete, the task stops automatically. It will resume when the next maintenance window opens.</p> 
  <p><strong>With AEM 6.4</strong>, you can manually stop a running Audit Log Purge Task by clicking the <strong>Stop</strong> icon. On the next execution the task will safely resume.</p> 
  <note> 
   <p>To stop the maintenance task means to suspend its execution without losing track of the job already in progress.</p> 
  </note> 
  <h2>Configure DAM Audit Log Purging</h2> 
  <ol> 
   <li><p>Navigate to the System Console at <em>http://serveraddress:serverport/system/console/configMgr</em></p> </li> 
   <li><p>Search for <strong>DAM audit Log Purge</strong> rule and click the result.</p> </li> 
   <li><p>In the next window, configure your rule accordingly. The options are:</p> 
    <ul> 
     <li><strong>Rule name:</strong> the name of the audit policy rule;</li> 
     <li><strong>Content path:</strong> the path of the content the rule will apply to<br /> </li> 
     <li><strong>Minimum age:</strong> the time in days the audit logs need to be kept</li> 
     <li><strong>Audit Log Dam event types:</strong> the types of DAM audit events that should be purged.</li> 
    </ul> </li> 
   <li><p>Click <strong>Save</strong> to save your configuration</p> </li> 
  </ol> 
  <h2>Configure Replication Audit Log Purging </h2> 
  <ol> 
   <li><p>Navigate to the System Console at <em>http://serveraddress:serverport/system/console/configMgr</em></p> </li> 
   <li><p>Search for <strong>Replication audit Log Purge Scheduler</strong> and click on the result</p> </li> 
   <li><p>In the next window, configure your rule accordingly. The options are:</p> 
    <ul> 
     <li><strong>Rule name:</strong> the name of the audit policy rule</li> 
     <li><strong>Content path:</strong> the path of the content the rule will apply to<br /> </li> 
     <li><strong>Minimum age:</strong> the time in days the audit logs need to be kept</li> 
     <li><strong>Audit log Replication event types:</strong> the types of Replication audit events that should be purged</li> 
    </ul> </li> 
   <li><p>Click <strong>Save</strong> to save your configuration.</p> </li> 
  </ol> 
 </body> 
</html>