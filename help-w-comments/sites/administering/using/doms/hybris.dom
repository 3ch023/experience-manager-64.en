<?xml version="1.1" encoding="UTF-8" standalone="yes"?> 
<html> 
 <head> 
  <meta content="2017-10-12T21:46:58.665-0400" name="mwpw_migration_script_version" /> 
  <meta content="2017-10-31T16:24:54.711-0400" name="firstPublishExternalDate" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES" name="primaryProductTag" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES;topic_tags:e-commerce;content_type:reference" name="cq:tags" /> 
  <meta content="" name="jcr:baseVersion" /> 
  <meta content="mix:versionable" name="jcr:mixinTypes" /> 
  <meta content="2018-04-26T10:12:56.479-0400" name="locHandOffDate" /> 
  <meta content="" name="jcr:versionHistory" /> 
  <meta content="/apps/help/templates/article-3" name="cq:template" /> 
  <meta content="carlino" name="cq:lastReplicatedBy" /> 
  <meta content="2017-12-01T19:05:48.936-0500" name="jcr:created" /> 
  <meta content="2018-04-03T07:04:40.368-0400" name="cq:lastReplicated" /> 
  <meta content="Administering hybris" name="pageTitle" /> 
  <meta content="2017-10-12T21:46:58.665-0400" name="qaDate" /> 
  <meta content="968278fd-adbe-440d-8fa7-8cf58ccb4b30" name="jcr:predecessors" /> 
  <meta content="/content/help/en/experience-manager/6-4/sites/administering/morehelp/e-commerce;/content/help/en/experience-manager/6-4/sites/administering/morehelp/e-commerce" name="moreHelpPaths" /> 
  <meta content="Activate" name="cq:lastReplicationAction" /> 
  <meta content="2018-04-26T10:12:56.479-0400" name="cq:lastModified" /> 
  <meta content="/etc/designs/help" name="cq:designPath" /> 
  <meta content="/content/docs/en/aem/6-3/administer/ecommerce/hybris" name="qaNotes" /> 
  <meta content="carlino@adobe.com" name="lr_lastReplicatedBy" /> 
  <meta content="2018-04-03T07:04:39.974-0400" name="publishExternalDate" /> 
  <meta content="b0b79fbe-dea6-487c-8075-7b26166d9b47" name="jcr:uuid" /> 
  <meta content="https://helpx.adobe.com/experience-manager/6-4/sites/administering/using/hybris.html" name="publishExternalURL" /> 
  <meta content="dist5" name="distType" /> 
  <meta content="carlino" name="cq:lastModifiedBy" /> 
  <meta content="2018-04-03T07:04:39.974-0400" name="lastPublishExternalDate" /> 
  <meta content="hybris" name="seoTitle" /> 
  <meta content="2018-04-03T07:04:39.974-0400" name="topicBrowsingSortDate" /> 
  <meta content="" name="jcr:primaryType" /> 
  <meta content="Guillaume Carlino" name="contentOwner" /> 
  <meta content="Learn how to use AEM with hybris." name="seoDescription" /> 
  <meta content="light" name="gnavTheme" /> 
  <meta content="en_us" name="jcr:language" /> 
  <meta content="admin" name="jcr:createdBy" /> 
  <meta content="hybris" name="navTitle" /> 
  <meta content="false" name="isReadyForLocalization" /> 
  <meta content="audience:administering" name="primaryAudienceTag" /> 
  <meta content="true" name="jcr:isCheckedOut" /> 
  <meta content="help/components/pages/article-3" name="sling:resourceType" /> 
  <meta content="hybris" name="jcr:title" /> 
 </head> 
 <body> 
  <p>After installation you can configure your instance:</p> 
  <ol> 
   <li><a href="#configurethefacettedsearchforgeometrixxoutdoors">Configure the Facetted Search for Geometrixx Outdoors</a>.</li> 
   <li><a href="#configurethecatalogversion">Configure the Catalog Version</a>.</li> 
   <li><a href="#configuretheimportstructure">Configure the Import Structure</a>.</li> 
   <li><a href="#configuretheproductattributestoload">Configure the Product Attributes to Load</a>.</li> 
   <li><a href="#importingtheproductdata">Importing the Product Data</a>.</li> 
   <li><a href="#configurethecatalogimporter">Configure the Catalog Importer</a>.</li> 
   <li>Use the <a href="#catalogimporter">importer to import the catalog</a> into a specific location in AEM.</li> 
  </ol> 
  <h2>Configure the Facetted Search for Geometrixx Outdoors</h2> 
  <note> 
   <p style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;">This is not needed for hybris 5.3.0.1 and later.</p> 
  </note> 
  <ol> 
   <li><p>In your browser, navigate to the <strong>hybris management console</strong> at:</p>  </li> 
   <li><p>From the sidebar, select <strong>System</strong>, then <strong>Facet search</strong>, then <strong>Facet Search Config</strong>.</p> </li> 
   <li><p><strong>Open Editor</strong> for the <strong>Sample Solr Configuration for clothescatalog</strong>.<br /> </p> </li> 
   <li><p>Under <strong>Catalog versions</strong> use <strong>Add Catalog version</strong> to add <span class="code">outdoors-Staged</span> and <span class="code">outdoors-Online</span> to the list.</p> </li> 
   <li><p><strong>Save</strong> the configuration.</p> </li> 
   <li><p>Open <strong>SOLR Item types</strong> to add <strong>SOLR Sorts</strong> to <span class="code">ClothesVariantProduct</span>:</p> 
    <ul> 
     <li>relevance ("Relevance", score)</li> 
     <li>name-asc ("Name (ascending)", name)</li> 
     <li>name-desc ("Name (descending)", name)</li> 
     <li>price-asc ("Price (ascending)", priceValue)</li> 
     <li>price-desc ("Price (descending)", priceValue)</li> 
    </ul>  
    <note> 
     <p>Use the context menu (usually right-button click) to select <span class="code">Create Solr sort</span>.</p> 
     <p>For Hybris 5.0.0 open the <span class="code">Indexed Types</span> tab, double-click on <span class="code">ClothesVariantProduct</span>, then the tab <span class="code">SOLR Sort</span>.<br /> </p> 
    </note><img imageRotate="0" src="assets/chlimage_1-41.png" /></li> 
   <li><p>In the <strong>Indexed Types</strong> tab set the <strong>Composed Type</strong> to:</p>  </li> 
   <li><p>In the <strong>Indexed Types</strong> tab adjust the <strong>Indexer queries</strong> for <span class="code">full</span>:</p> 
    <codeblock gutter="true" class="syntax shell">
      SELECT&amp;nbsp;{pk}&amp;nbsp;FROM&amp;nbsp;{Product}&amp;nbsp;WHERE&amp;nbsp;{pk}&amp;nbsp;NOT&amp;nbsp;IN&amp;nbsp;({{SELECT&amp;nbsp;{baseProductpk}&amp;nbsp;FROM&amp;nbsp;{variantproduct}}}) 
    </codeblock></li> 
   <li><p>In the <strong>Indexed Types</strong> tab adjust the <strong>Indexer queries</strong> for <span class="code">incremental</span>:</p> 
    <codeblock gutter="true" class="syntax shell">
      SELECT&amp;nbsp;{pk}&amp;nbsp;FROM&amp;nbsp;{Product}&amp;nbsp;WHERE&amp;nbsp;{pk}&amp;nbsp;NOT&amp;nbsp;IN&amp;nbsp;({{SELECT&amp;nbsp;{baseProductpk}&amp;nbsp;FROM&amp;nbsp;{variantproduct}}})&amp;nbsp;AND&amp;nbsp;{modifiedtime}&amp;nbsp;&lt;=&amp;nbsp;?lastIndexTime 
    </codeblock></li> 
   <li><p>In the <strong>Indexed Types</strong> tab adjust the <span class="code">category</span> facet. Double-click on the last entry in the category list to open the <strong>Indexed property</strong> tab:</p> 
    <note> 
     <p>For hybris 5.2 make sure that the <span class="code">Facet</span> attribute in the Properties table is selected according to the screenshot below:</p> 
    </note><img imageRotate="0" src="assets/chlimage_1-42.png" /><img imageRotate="0" src="assets/chlimage_1-43.png" /></li> 
   <li><p>Open the <strong>Facet Settings</strong> tab and adjust the field values:</p> <img imageRotate="0" src="assets/chlimage_1-44.png" /></li> 
   <li><p><strong>Save</strong> the changes.</p> </li> 
   <li><p>Again from <strong>SOLR Item types</strong>, adjust the <span class="code">price</span> facet according to the following screenshots. As with <span class="code">category</span>, double-click on <span class="code">price</span> to open the <strong>Indexed property</strong> tab:</p> <img imageRotate="0" src="assets/chlimage_1-45.png" /></li> 
   <li><p>Open the <strong>Facet Settings</strong> tab and adjust the field values:</p> <img imageRotate="0" src="assets/chlimage_1-46.png" /></li> 
   <li><p><strong>Save</strong> the changes.</p> </li> 
   <li><p>Open <strong>System</strong>, <strong>Facet search</strong>, then <strong>Indexer operation wizard</strong>. Start a cronjob:</p> 
    <ul> 
     <li><strong>Indexer operation</strong>: <span class="code">full</span> <br /> </li> 
     <li><strong>Solr configuration</strong>: <span class="code">Sample Solr Config for Clothes</span></li> 
    </ul> </li> 
  </ol> 
  <h2>Configure the Catalog Version</h2> 
  <p>The <strong>Catalog version</strong> (<span class="code">hybris.catalog.version</span>) that is imported can be configured for the OSGi service:</p> 
  <p style="margin-left: 40px;"><strong>Day CQ Commerce Hybris Configuration</strong><br /> (<span class="code">com.adobe.cq.commerce.hybris.common.DefaultHybrisConfigurationService</span>)</p> 
  <p><strong>Catalog version</strong> is usually set to either <span class="code">Online</span> or <span class="code">Staged</span> (the default).</p> 
  <note> 
   <p>When working with AEM there are several methods of managing the configuration settings for such services; see <a href="../../../sites/deploying/using/configuring-osgi.md">Configuring OSGi</a> for full details. Also see the console for a full list of configurable parameters and their defaults.</p> 
  </note> 
  <p>The log output provides feedback on the created pages and components and reports potential errors.</p> 
  <h2>Configure the Import Structure</h2> 
  <p>The following listing shows a sample structure (of assets, pages and components) that is created by default:</p> 
  <codeblock gutter="true" class="syntax shell">
    +&amp;nbsp;/content/dam/path/to/images!!discoiqbr!!&amp;nbsp;&amp;nbsp;+&amp;nbsp;12345.jpg&amp;nbsp;(dam:Asset)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;+&amp;nbsp;...!!discoiqbr!!&amp;nbsp;&amp;nbsp;+&amp;nbsp;...!!discoiqbr!!+&amp;nbsp;/content/site/en!!discoiqbr!!&amp;nbsp;&amp;nbsp;-&amp;nbsp;cq:commerceProvider&amp;nbsp;=&amp;nbsp;"hybris"!!discoiqbr!!&amp;nbsp;&amp;nbsp;-&amp;nbsp;cq:hybrisBaseStore&amp;nbsp;=&amp;nbsp;"basestore"!!discoiqbr!!&amp;nbsp;&amp;nbsp;-&amp;nbsp;cq:hybrisCatalogId&amp;nbsp;=&amp;nbsp;"catalog"!!discoiqbr!!&amp;nbsp;&amp;nbsp;+&amp;nbsp;category1&amp;nbsp;(cq:Page)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;+&amp;nbsp;jcr:content&amp;nbsp;(cq:PageContent)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;jcr:title&amp;nbsp;=&amp;nbsp;"Category&amp;nbsp;1"!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;+&amp;nbsp;category11&amp;nbsp;(cq:Page)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;+&amp;nbsp;jcr:content&amp;nbsp;(cq:PageContent)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;jcr:title&amp;nbsp;=&amp;nbsp;"Category&amp;nbsp;1.1"!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;+&amp;nbsp;12345&amp;nbsp;(cq:Page)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;+&amp;nbsp;jcr:content&amp;nbsp;(cq:PageContent)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;+&amp;nbsp;par!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;+&amp;nbsp;product&amp;nbsp;(nt:unstructured)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;cq:hybrisProductId&amp;nbsp;=&amp;nbsp;"12345"!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;sling:resourceType&amp;nbsp;=&amp;nbsp;"commerce/components/product"!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;+&amp;nbsp;image&amp;nbsp;(nt:unstructured)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;sling:resourceType&amp;nbsp;=&amp;nbsp;"commerce/components/product/image"!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;fileReference&amp;nbsp;=&amp;nbsp;"/content/dam/path/to/images/12345.jpg"!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;+&amp;nbsp;12345.1-S&amp;nbsp;(nt:unstructured)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;cq:hybrisProductId&amp;nbsp;=&amp;nbsp;"12345.1-S"!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;sling:resourceType&amp;nbsp;=&amp;nbsp;"commerce/components/product"!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;+&amp;nbsp;image&amp;nbsp;(nt:unstructured)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;sling:resourceType&amp;nbsp;=&amp;nbsp;"commerce/components/product/image"!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;fileReference&amp;nbsp;=&amp;nbsp;"/content/dam/path/to/images/12345.1-S.jpg"!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;+&amp;nbsp;... 
  </codeblock> 
  <p>Such a structure is created by the OSGi service <span class="code">DefaultImportHandler</span> that implements the <span class="code">ImportHandler</span> interface. An import handler is called by the actual importer to create products, product variations, categories, asset, etc.</p> 
  <note> 
   <p>You can <a href="#customizingtheimportprocess">customize this process by implementing your own import handler</a>.</p> 
  </note> 
  <draft-comment color="yellow" lastModifiedBy="aheimoz" lastModifiedDate="2017-11-30T05:00:30.831-0500" prevFirstName="Alison" prevLastName="Heimoz" type="remark"> 
   <p>Where has the following gone?</p> 
   <ul> 
    <li><strong>Day CQ Commerce Hybris Default Import Handler</strong></li> 
   </ul> 
   <p>Can only find:</p> 
   <ul> 
    <li>Geometrixx-Outdoors Catalog Blueprint Importer<br /> </li> 
    <li>Geometrixx-Outdoors Product Importer</li> 
    <li>Adobe CQ Commerce Page Event Listener</li> 
    <li>Adobe CQ Commerce PIM Post Processor</li> 
    <li>Adobe CQ Commerce Product Catalog Generator</li> 
    <li>Adobe CQ Commerce Promotion Manager</li> 
   </ul> 
  </draft-comment> 
  <p>The structure to be generated when importing can be configured for:</p> 
  <p style="margin-left: 40px;"><span class="code"></span><strong>Day CQ Commerce Hybris Default Import Handler</strong><br /> <span class="code">(com.adobe.cq.commerce.hybris.importer.DefaultImportHandler</span>)</p> 
  <p>When working with AEM there are several methods of managing the configuration settings for such services; see <a href="../../../sites/deploying/using/configuring-osgi.md">Configuring OSGi</a> for full details. Also see the console for a full list of configurable parameters and their defaults.</p> 
  <draft-comment color="green" lastModifiedBy="aheimoz" lastModifiedDate="2017-11-30T05:00:30.859-0500" prevFirstName="Alison" prevLastName="Heimoz" type="remark"> 
   <p>a lot more parameters on geometrixx-outdoors/en_US - what needs documenting? what is configured manually?</p> 
  </draft-comment> 
  <draft-comment type="draft"> 
   <img imageRotate="0" src="assets/chlimage_1-47.png" /> 
  </draft-comment> 
  <draft-comment color="green" lastModifiedBy="aheimoz" lastModifiedDate="2017-11-30T05:00:30.895-0500" prevFirstName="Alison" prevLastName="Heimoz" type="remark"> 
   <p>cross-references to MSM?</p> 
  </draft-comment> 
  <draft-comment type="draft"> 
   <img imageRotate="0" src="assets/chlimage_1-48.png" /> 
  </draft-comment> 
  <h2>Configure the Product Attributes to Load</h2> 
  <draft-comment color="green" lastModifiedBy="aheimoz" lastModifiedDate="2017-11-30T05:00:30.946-0500" prevFirstName="Alison" prevLastName="Heimoz" type="remark"> 
   <p>See <a href="https://issues.adobe.com/browse/DOC-3984">https://issues.adobe.com/browse/DOC-3984</a></p> 
  </draft-comment> 
  <p>The response parser can be configured to define the properties and attributes to be loaded for (variant) products:</p> 
  <ol> 
   <li><p>Configure the OSGi bundle:</p> <p style="margin-left: 40px;"><strong>Day CQ Commerce Hybris Default Response Parser</strong><br /> (<span class="code">com.adobe.cq.commerce.hybris.impl.importer.DefaultResponseParser</span>)</p> <p>Here you can define various options and attributes needed for loading and mapping.</p> 
    <note> 
     <p>When working with AEM there are several methods of managing the configuration settings for such services; see <a href="../../../sites/deploying/using/configuring-osgi.md">Configuring OSGi</a> for full details. Also see the console for a full list of configurable parameters and their defaults.</p> 
    </note></li> 
  </ol> 
  <h2>Importing the Product Data</h2> 
  <draft-comment color="yellow" lastModifiedBy="aheimoz" lastModifiedDate="2017-11-30T05:00:31.063-0500" prevFirstName="Alison" prevLastName="Heimoz" type="remark"> 
   <p>The import procedures need checking.</p> 
   <p>In L16 /etc/importers/hybris doesn't exist anymore, but http://localhost:4502/miscadmin#/etc/commerce/productimporter does</p> 
   <p>And if there is just the one now then these procedures need to be moved to a generic location.</p> 
   <p> </p> 
   <p>see also http://ec2author.day.com:8080/content/docs/en/cq/6-0/administer/ecommerce/native.html?#Importing%20Products<br /> </p> 
  </draft-comment> 
  <p>There are a variety of ways to import the product data. The product data can be imported when initially setting up the environment, or after changes have been made in the hybris data:</p> 
  <ul> 
   <li><a href="#fullimport">Full Import</a></li> 
   <li><a href="#incrementalimport">Incremental Import</a></li> 
   <li><a href="#expressupdate">Express Update</a></li> 
  </ul> 
  <p>Actual product information imported from hybris is held in the repository under:</p> 
  <p><span class="code"> /etc/commerce/products</span></p> 
  <p>The following properties indicate the link with hybris:</p> 
  <ul> 
   <li><span class="code">commerceProvider</span></li> 
   <li><span class="code">cq:hybrisCatalogId</span></li> 
   <li><span class="code">cq:hybrisProductID</span></li> 
  </ul> 
  <note> 
   <p>The hybris implementation (i.e. <span class="code">geometrixx-outdoors/en_US</span>) only stores product IDs and other basic information under <span class="code">/etc/commerce</span>.</p> 
   <p>The hybris server is referenced every time information about a product is requested.</p> 
  </note> 
  <h4>Full Import</h4> 
  <ol> 
   <li><p>If required, delete all existing product data using CRXDE Lite.</p> 
    <ol> 
     <li>Navigate to the sub-tree holding the product data:<br /> <span class="code"> /etc/commerce/products</span><br /> For example:<br /> <a href="http://localhost:4502/crx/de/index.jsp#/etc/commerce/products"><span class="code">http://localhost:4502/crx/de/index.jsp#/etc/commerce/products</span></a></li> 
     <li>Delete the node that holds your product data; for example, <span class="code">outdoors</span>.</li> 
     <li><strong>Save All</strong> to persist the change.</li> 
    </ol>  </li> 
   <li><p>Open the hybris importer in AEM:</p>  <p>For example:</p>  </li> 
   <li><p>Configure the required parameters; for example:</p> <img imageRotate="0" src="assets/chlimage_1-49.png" /></li> 
   <li><p>Click <strong>Import Catalog</strong> to start the import.</p> <p>When complete, you can verify the data imported at:<code class="code">
      <discoiqbr /> /etc/commerce/products/outdoors</code><br /> You can open this in CRXDE Lite; for example:<br /> <span class="code"> <a href="http://localhost:4502/crx/de/index.jsp#/etc/commerce/products">http://localhost:4502/crx/de/index.jsp#/etc/commerce/products</a></span></p>  </li> 
  </ol> 
  <h3>Incremental Import</h3> 
  <ol> 
   <li><p>Check the information held in AEM for the relevant product(s), in the appropriate sub-tree under:</p>  <p>You can open this in CRXDE Lite; for example:<br /> <a href="http://localhost:4502/crx/de/index.jsp#/etc/commerce/products">http://localhost:4502/crx/de/index.jsp#/etc/commerce/products</a></p> </li> 
   <li><p>In hybris, update the information held on the revelant product(s).<br /> </p> </li> 
   <li><p>Open the hybris importer in AEM:</p>  <p>For example:</p>  </li> 
   <li><p>Select the clickbox <strong>Incremental Import</strong>.</p> </li> 
   <li><p>Click <strong>Import Catalog</strong> to start the import.</p> <p>When complete, you can verify the data updated in AEM under:<code class="code">
      <discoiqbr /> /etc/commerce/products</code><br /> <span class="code"><a href="http://localhost:4502/crx/de/index.jsp#/etc/commerce/products"></a></span></p>  </li> 
  </ol> 
  <h3>Express Update</h3> 
  <p>The import process can take a long time, so as an extension to the <a href="#productsynchronizationandpublishing">Product Synchronization</a> you can select specific areas of the catalog for an express update that is triggered manually. This uses the export feed together with the standard attributes configuration.</p> 
  <ol> 
   <li><p>Check the information held in AEM for the relevant product(s), in the appropriate sub-tree under:</p>  <p>You can open this in CRXDE Lite; for example:<br /> <a href="http://localhost:4502/crx/de/index.jsp#/etc/commerce/products">http://localhost:4502/crx/de/index.jsp#/etc/commerce/products</a></p> </li> 
   <li><p>In hybris, update the information held on the revelant product(s).<br /> </p> </li> 
   <li><p>In hybris, add the product(s) to the Express Queue; for example:</p> 
    <draft-comment color="green" lastModifiedBy="aheimoz" lastModifiedDate="2017-11-30T05:00:31.741-0500" prevFirstName="Alison" prevLastName="Heimoz" type="remark"> 
     <p>Need new screenshot...</p> 
    </draft-comment><img imageRotate="0" src="assets/chlimage_1-50.png" /></li> 
   <li><p>Open the hybris importer in AEM:</p>  <p>For example:</p>  </li> 
   <li><p>Select the clickbox <strong>Express Update</strong>.</p> </li> 
   <li><p>Click <strong>Import Catalog</strong> to start the import.</p> <p>When complete, you can verify the data updated in AEM under:<code class="code">
      <discoiqbr /> /etc/commerce/products</code><br /> <span class="code"><a href="http://localhost:4502/crx/de/index.jsp#/etc/commerce/products"></a></span></p>  </li> 
  </ol> 
  <h2>Configure the Catalog Importer</h2> 
  <draft-comment color="yellow" lastModifiedBy="buergi@adobe.com" lastModifiedDate="2017-11-30T05:00:31.914-0500" prevFirstName="unknown" prevLastName="unknown" type="remark"> 
   <p style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;">We need a better wording. If I read it, I thin about polling, periodically updating the data. But this configuration defines parameters for one import.</p> 
   <p style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;">Let's add another section about polling:</p> 
   <p style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;">PollingCatalogUpdater will call the DefaultHybrisImporter in 'incrementalImport" mode. Polling importer is a more generic CQ feature that we are using for this and also for express update.</p> 
   <p style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;">Here's an example, please incorporate: http://experiencedelivers.adobe.com/cemblog/en/experiencedelivers/2013/03/example-of-cq-poll-config.html</p> 
   <p style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;">Levente Santha may provide more details</p> 
  </draft-comment> 
  <draft-comment color="green" lastModifiedBy="aheimoz" lastModifiedDate="2017-11-30T05:00:31.929-0500" prevFirstName="Alison" prevLastName="Heimoz" type="remark"> 
   <p>have reworded, will incorporate other examples later.</p> 
  </draft-comment> 
  <p>The hybris catalog can be imported into AEM, using the batch importer for hybris catalogs, categories and products.<br /> </p> 
  <p>The parameters used by the importer can be configured for:</p> 
  <p style="margin-left: 40px;"><strong>Day CQ Commerce Hybris Catalog Importer</strong><br /> (<span class="code">com.adobe.cq.commerce.hybris.impl.importer.DefaultHybrisImporter</span>)</p> 
  <p>When working with AEM there are several methods of managing the configuration settings for such services; see <a href="../../../sites/deploying/using/configuring-osgi.md">Configuring OSGi</a> for full details. Also see the console for a full list of configurable parameters and their defaults.</p> 
  <h2>Catalog Import</h2> 
  <draft-comment color="yellow" lastModifiedBy="aheimoz" lastModifiedDate="2017-11-30T05:00:31.986-0500" prevFirstName="Alison" prevLastName="Heimoz" type="remark"> 
   <p>We need a new screenshot, now we have</p> 
   <ol> 
    <li>Full import</li> 
    <li>Incremental import</li> 
    <li>Express update (new feature for 5.6.200)</li> 
   </ol> 
  </draft-comment> 
  <p>The hybris package comes with a catalog importer for setting up the initial page structure.</p> 
  <p>This is available from:</p> 
  <p><span class="code"> http://localhost:4502/etc/importers/hybris.html</span> </p> 
  <img imageRotate="0" src="assets/ecommerceimportconsole.png" /> 
  <p>The following information has to be provided:</p> 
  <ul> 
   <li><strong>Base store</strong> <br /> The identifier of the base store configured in hybris.</li> 
   <li><strong>Catalog</strong> <br /> The identifier of the catalog to import.</li> 
   <li><strong>Root path</strong> <br /> The path where the catalog should be imported into.</li> 
  </ul> 
  <h2>Removing a Product from the Catalog</h2> 
  <p>To remove one, or more, products from the catalog:</p> 
  <ol> 
   <li><p><a href="../../../sites/deploying/using/configuring-osgi.md">Configure the for OSGi service</a> <strong>Day CQ Commerce Hybris Catalog Importer</strong>; see also <a href="#configurethecatalogimporter">Configure the Catalog Importer</a>.</p> <p>Activate the following properties:</p> 
    <ul> 
     <li><strong>Enable product removal</strong></li> 
     <li><strong>Enable product asset removal</strong></li> 
    </ul> 
    <note> 
     <p>When working with AEM there are several methods of managing the configuration settings for such services; see <a href="../../../sites/deploying/using/configuring-osgi.md">Configuring OSGi</a> for full details. Also see the console for a full list of configurable parameters and their defaults.</p> 
    </note></li> 
   <li><p>Initialize the importer by performing two incremental updates (see <a href="#catalogimport">Catalog Import</a>):</p> 
    <ul> 
     <li>The first time run result in a set of changed products - indicated in the log list.<br /> </li> 
     <li>For the second time no products should be updated.</li> 
    </ul> 
    <note> 
     <p>The first import is to initialize the product information. The second import verifies that everything worked and the is product set is ready.</p> 
    </note></li> 
   <li><p>Check the category page that contains the product you want to remove. The product details should be visible.</p> <p>For example, the following category shows details of the Cajamara product:</p>  </li> 
   <li><p>Remove the product in the hybris console. Use the option <strong>Change approval status</strong> to set the status to <span class="code">unapproved</span>. The product will be removed from the live-feed.</p> <p>For example:</p> 
    <ul> 
     <li>Open the page <a href="http://localhost:9001/productcockpit">http://localhost:9001/productcockpit</a></li> 
     <li>Select the catalog <span class="code">Outdoors Staged</span></li> 
     <li>Search for <span class="code">Cajamara</span></li> 
     <li>Select this product and change the approval status to <span class="code">unapproved</span></li> 
    </ul> </li> 
   <li><p>Perform another incremental update (see <a href="#catalogimport">Catalog Import</a>). The log will list the deleted product.</p> </li> 
   <li> <p><a href="../../../sites/administering/using/generic.md#rollingoutacatalog">Rollout</a> the appropriate catalog. The product and product page will have been removed from within AEM.</p>
    <draft-comment color="yellow" lastmodifiedby="aheimoz" lastmodifieddate="2017-11-30T05:00:32.377-0500" prevfirstname="Alison" prevlastname="Heimoz" type="remark"> 
     <p style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;">need a link when catalog rollout is specifically documented; see:</p> 
     <p style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;">https://issues.adobe.com/browse/DOC-3933</p> 
     <p style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;">https://issues.adobe.com/browse/DOC-3929</p> 
     <p style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;">https://issues.adobe.com/browse/DOC-4734</p> 
    </draft-comment> <p>For example:</p> 
    <ul> 
     <li>Open:<br /> <a href="http://localhost:4502/aem/catalogs.html/content/catalogs/geometrixx-outdoors-hybris">http://localhost:4502/aem/catalogs.html/content/catalogs/geometrixx-outdoors-hybris</a></li> 
     <li>Rollout the <span class="code">Hybris Base</span> catalog</li> 
     <li>Open:<br /> <a href="http://localhost:4502/editor.html/content/geometrixx-outdoors/en_US/equipment/biking.html">http://localhost:4502/editor.html/content/geometrixx-outdoors/en_US/equipment/biking.html</a></li> 
     <li>The <span class="code">Cajamara</span> product will have been removed from the <span class="code">Bike</span> category</li> 
    </ul> </li> 
   <li><p>To reinstate the product:</p> 
    <ol> 
     <li>In hybris, set the approval status back to <strong>approved</strong><br /> </li> 
     <li>In AEM: 
      <ol> 
       <li>perform an incremental update</li> 
       <li>rollout the appropriate catalog again<br /> </li> 
       <li>refresh the appropriate category page</li> 
      </ol> </li> 
    </ol> </li> 
  </ol> 
  <h2>Add Order History Trait to the Client Context</h2> 
  <draft-comment color="yellow" lastModifiedBy="aheimoz" lastModifiedDate="2017-11-30T05:00:32.469-0500" prevFirstName="Alison" prevLastName="Heimoz" type="remark"> 
   <p>might need updating for 6.1 - "Deprecate the ClientContext":</p> 
   <p>https://issues.adobe.com/browse/CQ-7796</p> 
   <p>Martin: Correct -&amp;gt; the whole commerce module is not yet on context hub</p> 
  </draft-comment> 
  <p>To add order history to the <a href="../../../sites/developing/using/client-context.md">client context</a>:<br /> </p> 
  <ol> 
   <li><p>Open the <a href="../../../sites/administering/using/client-context.md">client context design page</a>, by either:</p> 
    <ul> 
     <li>Open a page for editing, then open the client context using <strong>Ctrl-Alt-c</strong> (windows) or <strong>control-option-c</strong> (Mac). Use the pencil icon in the top left corner of the client context to <strong>Open the ClientContext design page</strong>.<br /> </li> 
     <li>Navigate directly to <a href="http://localhost:4502/etc/clientcontext/default/content.html">http://localhost:4502/etc/clientcontext/default/content.html</a></li> 
    </ul> </li> 
   <li><p><a href="../../../sites/administering/using/client-context.md#addingapropertycomponent">Add the <strong>Order History</strong> component</a> to the <strong>Shopping Car</strong>t component of the client context.</p> </li> 
   <li><p>You can confirm that the client context is showing details of your order history. For example:</p> 
    <ol> 
     <li>Open the <a href="../../../sites/administering/using/client-context.md">client context</a>.</li> 
     <li>Add an item to the cart.</li> 
     <li>Complete the checkout.</li> 
     <li>Check the client context.</li> 
     <li>Add another item to the cart.</li> 
     <li>Navigate to the checkout page: 
      <ul> 
       <li>The client context shows a summary of the order history.<br /> </li> 
       <li>The message "You're a returning customer" is shown.<br /> </li> 
      </ul> </li> 
    </ol> 
    <note> 
     <p>The message is realized by:<br /> </p> 
     <ul> 
      <li>Navigate to<br /> <a href="http://localhost:4502/content/campaigns/geometrixx-outdoors/hybris-returning-customer.html">http://localhost:4502/content/campaigns/geometrixx-outdoors/hybris-returning-customer.html</a><br /> The campaign consists of one experience.</li> 
      <li>Click on the segment<br /> (<a href="http://localhost:4502/etc/segmentation/geometrixx-outdoors/returning-customer.html">http://localhost:4502/etc/segmentation/geometrixx-outdoors/returning-customer.html</a>)</li> 
      <li>The segment is built using the <strong>Order History Property</strong> trait.</li> 
     </ul> 
    </note></li> 
  </ol> 
  <draft-comment type="draft"> 
   <h2>Potential Promotion</h2> 
  </draft-comment> 
  <draft-comment type="draft"> 
   <p>It is possible to get a list of all potential promotions for a cart. You can use it in a potential promotion trait and to show on the cart page.</p> 
  </draft-comment> 
  <draft-comment type="draft"> 
   <ol> 
    <li><p>Open the <a href="../../../sites/administering/using/client-context.md">client context design page</a>, by either:</p> 
     <ul> 
      <li>Open</li> 
     </ul> </li> 
    <li><p>e <strong>Shopping Car</strong>t component of the client context.</p> </li> 
    <li><p>You can confirm that the client context is showing details of your order history. For example:</p> 
     <ol> 
      <li>Open the <a href="../../../sites/administering/using/client-context.md">client context</a>.</li> 
      <li>Add an item to the cart.</li> 
      <li>Complete the checkout.</li> 
      <li>Check the client context.</li> 
      <li>Add another item to the cart.</li> 
      <li>Navigate to the checkout page: 
       <ul> 
        <li>The client context shows a summary of the order history.<br /> </li> 
        <li>The message "You're a returning customer" is shown.<br /> </li> 
       </ul> </li> 
     </ol> 
     <note type="note"> 
      <p>The message is realized by:<br /> </p> 
      <ul> 
       <li>Navigate to<br /> <a href="http://localhost:4502/content/campaigns/geometrixx-outdoors/hybris-returning-customer.html">http://localhost:4502/content/campaigns/geometrixx-outdoors/hybris-returning-customer.html</a><br /> The campaign consists of one experience.</li> 
       <li>Click on the segment<br /> (<a href="http://localhost:4502/etc/segmentation/geometrixx-outdoors/returning-customer.html">http://localhost:4502/etc/segmentation/geometrixx-outdoors/returning-customer.html</a>)</li> 
       <li>The segment is built using the <strong>Order History Property</strong> trait.</li> 
      </ul> 
     </note></li> 
    <li></li> 
    <li></li> 
    <li><p>this is</p> </li> 
   </ol> 
  </draft-comment> 
 </body> 
</html>