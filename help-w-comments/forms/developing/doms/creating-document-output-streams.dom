<?xml version="1.1" encoding="UTF-8" standalone="yes"?> 
<html> 
 <head> 
  <meta content="admin" name="jcr:createdBy" /> 
  <meta content="2017-10-03T06:47:14.334-0400" name="lastPublishExternalDate" /> 
  <meta content="/etc/designs/help" name="cq:designPath" /> 
  <meta content="/content/help/en/experience-manager/6-4/forms/developing/morehelp/operations;/content/help/en/experience-manager/6-4/forms/developing/morehelp/operations" name="moreHelpPaths" /> 
  <meta content="2017-10-03T06:47:14.334-0400" name="publishExternalDate" /> 
  <meta content="help/components/pages/article-3" name="sling:resourceType" /> 
  <meta content="mix:versionable" name="jcr:mixinTypes" /> 
  <meta content="2017-10-03T06:47:14.334-0400" name="firstPublishExternalDate" /> 
  <meta content="light" name="heroGradient" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/FORMS" name="primaryProductTag" /> 
  <meta content="admin" name="contentOwner" /> 
  <meta content="AEMForms/6.1/ProgramLC/WS624e3cba99b79e12-5a451db91336a3533b9-8000.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12e69a9941333732bac8-7d99.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12-4e753ce01336a3534f1-7fff.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12e69a9941333732bac8-7937.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12e69a9941333732bac8-7936.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12e69a9941333732bac8-7d92.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e125fb7c0bf1336a35360a-7fff.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12e69a9941333732bac8-7914.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12e69a9941333732bac8-7913.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12e69a9941333732bac8-7ff2.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e122e69a36a1336a353714-7ffe.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12e69a9941333732bac8-78f5.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12e69a9941333732bac8-78f4.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12e69a9941333732bac8-7fd8.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12-58c4afce1336a3537fe-7ffd.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12e69a9941333732bac8-78dd.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12e69a9941333732bac8-7ff1.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12284a7b0b1336a353918-7ffe.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12e69a9941333732bac8-78cd.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12e69a9941333732bac8-78cc.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12e69a9941333732bac8-7d82.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e125e21f771336a353a02-7ff6.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12e69a9941333732bac8-78a5.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12e69a9941333732bac8-78a4.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12-612ecab1336a353aec-8000.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12-612ecab1336a353aec-7fff.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12aa908071331d5893da-7968.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12aa908071331d5893da-7e04.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12-6ff8bcfe1336a353c06-7ffd.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12aa908071331d5893da-7951.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12aa908071331d5893da-7950.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12aa908071331d5893da-7dff.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12611c94d41336a353d0f-7fff.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12aa908071331d5893da-7936.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12aa908071331d5893da-7935.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12e69a9941333732bac8-7d5b.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12276af4a71336a353dfa-7fff.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12e69a9941333732bac8-7883.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12e69a9941333732bac8-7882.2" name="cq:gepId" /> 
  <meta content="admin" name="lr_lastModifiedBy" /> 
  <meta content="en_us" name="jcr:language" /> 
  <meta content="/apps/help/templates/article-3" name="cq:template" /> 
  <meta content="3dc50166-4442-4012-aafa-243e18463cff" name="jcr:uuid" /> 
  <meta content="Creating Document Output Streams" name="navTitle" /> 
  <meta content="2018-04-03T08:17:11.676-0400" name="cq:lastReplicated" /> 
  <meta content="2017-07-12T07:03:37.528-0400" name="lr_lastModified" /> 
  <meta content="not_checked" name="acrolinxStatus" /> 
  <meta content="content_type:reference;products:SG_EXPERIENCEMANAGER/6.4/FORMS;topic_tags:operations" name="cq:tags" /> 
  <meta content="2017-07-12T07:03:00.000-0400" name="sortDate" /> 
  <meta content="Activate" name="cq:lastReplicationAction" /> 
  <meta content="2017-07-12T07:03:00.000-0400" name="topicBrowsingSortDate" /> 
  <meta content="" name="jcr:baseVersion" /> 
  <meta content="head1_20111213" name="gep_conversion_script_version" /> 
  <meta content="carlino" name="cq:lastReplicatedBy" /> 
  <meta content="4d400ca9-aa30-41c8-ad37-3e7218b50d96" name="jcr:predecessors" /> 
  <meta content="video" name="pageLayout" /> 
  <meta content="2017-11-22T19:05:03.291-0500" name="jcr:created" /> 
  <meta content="false" name="doNotLocalize" /> 
  <meta content="" name="jcr:primaryType" /> 
  <meta content="khsingh@adobe.com" name="lr_lastReplicatedBy" /> 
  <meta content="carlino" name="cq:lastModifiedBy" /> 
  <meta content="https://helpx.adobe.com/aem-forms/6-3/developing/creating-document-output-streams.html" name="publishExternalURL" /> 
  <meta content="Creating Document Output Streams " name="jcr:title" /> 
  <meta content="admin" name="lr_creator" /> 
  <meta content="true" name="jcr:isCheckedOut" /> 
  <meta content="2017-11-21T06:57:42.596-0500" name="cq:lastModified" /> 
  <meta content="left" name="sideColumn" /> 
  <meta content="audience:developing" name="primaryAudienceTag" /> 
  <meta content="" name="jcr:versionHistory" /> 
 </head> 
 <body> 
  <p><strong>About the Output Service</strong></p> 
  <p>The Output service lets you output documents as PDF (including PDF/A documents), PostScript, Printer Control Language (PCL), and the following label formats: </p> 
  <ul> 
   <li><p>Zebra - ZPL</p></li> 
   <li><p>Intermec - IPL</p></li> 
   <li><p>Datamax - DPL</p></li> 
   <li><p>TecToshiba - TPCL</p></li> 
  </ul> 
  <p>Using the Output service, you can merge XML form data with a form design and output the document to a network printer or file. </p> 
  <p>There are two ways in which you can pass a form design (an XDP file) to the Output service. You can either pass a <span class="code">com.adobe.idp.Document</span> instance that contains a form design to the Output service. Or you can pass a URI value that specifies the location of the form design. Both of these ways are discussed in <i>Programming with AEM forms</i>. </p> 
  <note> 
   <p>The Output service does not support Acroform PDF documents that contain application object specific scripts. Acroform PDF documents that contain application object specific scripts are not rendered. </p> 
  </note> 
  <p>The following sections show how to pass a form design to the Output service using a URI value:</p> 
  <ul> 
   <li></li> 
   <li></li> 
  </ul> 
  <p>The following sections show how to pass a form design within a <span class="code">com.adobe.idp.Document</span> instance:</p> 
  <ul> 
   <li></li> 
   <li></li> 
  </ul> 
  <p>One consideration when deciding which technique to use is if you are getting the form design from another AEM Forms service, then pass it within a <span class="code">com.adobe.idp.Document</span> instance. Both the <i>Passing Documents to the Output Service</i> and <i>Creating PDF Documents using Fragments</i> sections show how to get a form design from another AEM Forms service. The first section retrieves the form design from Content Services (deprecated). The second section retrieves the form design from the Assembler service. </p> 
  <p>If you are getting the form design from a fixed location, such as the file system, then you can use either technique. That is, you can specify the URI value to a XDP file or use a <span class="code">com.adobe.idp.Document</span> instance.</p> 
  <p>To pass a URI value that specifies the location of the form design when creating a PDF document, use the <span class="code">generatePDFOutput</span> method. Likewise, to pass a <span class="code">com.adobe.idp.Document</span> instance to the Output service when creating a PDF document, use the <span class="code">generatePDFOutput2</span> method.</p> 
  <p>When sending an output stream to a network printer, you can also use either technique. To send an output stream to a printer by passing a <span class="code">com.adobe.idp.Document</span> instance that contains a form design, use the <span class="code">sendToPrinter2 </span>method. To send an output stream to a printer by passing a URI value, use the <span class="code">sendToPrinter </span>method. The <i>Sending Print Streams to Printers</i> section uses the <span class="code">sendToPrinter</span> method.</p> 
  <p>You can accomplish these tasks by using the Output service:</p> 
  <ul> 
   <li></li> 
   <li></li> 
   <li></li> 
   <li></li> 
   <li></li> 
   <li></li> 
   <li></li> 
   <li></li> 
   <li></li> 
  </ul> 
  <h2 id="creating_pdf_documents">Creating PDF Documents</h2> 
  <p></p> 
  <p>You can use the Output service to create a PDF document that is based on a form design and XML form data that you provide. The PDF document that is created by the Output service is not an interactive PDF document; a user cannot enter or modify form data. </p> 
  <p>If you want to create a PDF document meant for long-term storage, it is recommended that you create a PDF/A document. (See <a href="creating-document-output-streams#creating_pdf_a_documents">Creating PDF/A Documents</a>.)</p> 
  <p>To create an interactive PDF form that lets a user enter data, use the Forms service. (See <a href="/programming-with-aem-forms/rendering-forms#rendering_interactive_pdf_forms">Rendering Interactive PDF Forms</a>.)</p> 
  <note> 
   <p>For more information about the Output service, see <a href="http://www.adobe.com/go/learn_aemforms_services_63">Services Reference for AEM Forms</a>.</p> 
  </note> 
  <h3 id="summary_of_steps">Summary of steps</h3> 
  <p></p> 
  <p>To create a PDF document, perform the following steps:</p> 
  <ol> 
   <li><p>Include project files.</p></li> 
   <li><p>Create an Output Client object. </p></li> 
   <li><p>Reference an XML data source.</p></li> 
   <li><p>Set PDF run-time options.</p></li> 
   <li><p>Set rendering run-time options.</p></li> 
   <li><p>Generate a PDF document.</p></li> 
   <li><p>Retrieve the results of the operation.</p></li> 
  </ol> 
  <p><strong>Include project files</strong></p> 
  <p>Include necessary files in your development project. If you are creating a client application by using Java, include the necessary JAR files. If you are using web services, make sure that you include the proxy files.</p> 
  <p>The following JAR files must be added to your project’s classpath:</p> 
  <ul> 
   <li><p>adobe-livecycle-client.jar</p></li> 
   <li><p>adobe-usermanager-client.jar</p></li> 
   <li><p>adobe-output-client.jar</p></li> 
   <li><p>adobe-utilities.jar (Required if AEM Forms is deployed on JBoss)</p></li> 
   <li><p>jbossall-client.jar (Required if AEM Forms is deployed on JBoss)</p></li> 
  </ul> 
  <p>if AEM Forms is deployed on a supported J2EE application server that is not JBoss, you will need to replace the adobe-utilities.jar and jbossall-client.jar files with JAR files that are specific to the J2EE application server on which AEM Forms is deployed.</p> 
  <p><strong>Create an Output Client object</strong></p> 
  <p>Before you can programmatically perform an Output service operation, you must create an Output service client object. If you are using the Java API, create an <span class="code">OutputClient</span> object. If you are using the Output web service API, create an <span class="code">OutputServiceService</span> object. </p> 
  <p><strong>Reference an XML data source</strong></p> 
  <p>To merge data with the form design, you must reference an XML data source that contains data. An XML element must exist for every form field that you plan to populate with data. The XML element name must match the field name. An XML element is ignored if it does not correspond to a form field or if the XML element name does not match the field name. It is not necessary to match the order in which the XML elements are displayed if all XML elements are specified.</p> 
  <p>Consider the following example loan application form. </p> 
  <img alt="" src="assets/cp_cp_loanformdata.png" /> 
  <p>To merge data into this form design, you must create an XML data source that corresponds to the form. The following XML represents an XDP XML data source that corresponds to the example mortgage application form. </p> 
  <codeblock gutter="true" class="syntax as3">
     &lt;?xml&amp;nbsp;version="1.0"&amp;nbsp;encoding="UTF-8"&amp;nbsp;?&gt;&amp;nbsp;&amp;nbsp;!!discoiqbr!! -&amp;nbsp;&lt;xfa:datasets&amp;nbsp;xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/"&gt;&amp;nbsp;!!discoiqbr!! -&amp;nbsp;&lt;xfa:data&gt;&amp;nbsp;!!discoiqbr!! -&amp;nbsp;&lt;data&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;&lt;Layer&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;closeDate&gt;1/26/2007&lt;/closeDate&gt;&amp;nbsp;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;lastName&gt;Johnson&lt;/lastName&gt;&amp;nbsp;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;firstName&gt;Jerry&lt;/firstName&gt;&amp;nbsp;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;mailingAddress&gt;JJohnson@NoMailServer.com&lt;/mailingAddress&gt;&amp;nbsp;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;city&gt;New&amp;nbsp;York&lt;/city&gt;&amp;nbsp;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;zipCode&gt;00501&lt;/zipCode&gt;&amp;nbsp;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;state&gt;NY&lt;/state&gt;&amp;nbsp;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;dateBirth&gt;26/08/1973&lt;/dateBirth&gt;&amp;nbsp;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;middleInitials&gt;D&lt;/middleInitials&gt;&amp;nbsp;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;socialSecurityNumber&gt;(555)&amp;nbsp;555-5555&lt;/socialSecurityNumber&gt;&amp;nbsp;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;phoneNumber&gt;5555550000&lt;/phoneNumber&gt;&amp;nbsp;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/Layer&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;&lt;Mortgage&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;mortgageAmount&gt;295000.00&lt;/mortgageAmount&gt;&amp;nbsp;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;monthlyMortgagePayment&gt;1724.54&lt;/monthlyMortgagePayment&gt;&amp;nbsp;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;purchasePrice&gt;300000&lt;/purchasePrice&gt;&amp;nbsp;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;downPayment&gt;5000&lt;/downPayment&gt;&amp;nbsp;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;term&gt;25&lt;/term&gt;&amp;nbsp;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;interestRate&gt;5.00&lt;/interestRate&gt;&amp;nbsp;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/Mortgage&gt;&amp;nbsp;!!discoiqbr!! &lt;/data&gt;&amp;nbsp;!!discoiqbr!! &lt;/xfa:data&gt;&amp;nbsp;!!discoiqbr!! &lt;/xfa:datasets&gt; 
  </codeblock> 
  <p><strong>Set PDF run-time options</strong></p> 
  <p>Set the file URI option when creating a PDF document. This option specifies the name and location of the PDF file that the Output service generates.</p> 
  <note> 
   <p>Instead of setting the file URI run-time option, you can programmatically retrieve the PDF document from the complex data type that is returned by the Output service. However, by setting the file URI run-time option, you do not need to create application logic that programmatically retrieves the PDF document.</p> 
  </note> 
  <p><strong>Set rendering run-time options</strong></p> 
  <p>You can set rendering run-time options when creating a PDF document. Although these options are not required (unlike PDF run-time options that are required), you can perform tasks such as improving the performance of the Output service. For example, you can cache the form design that the Output service uses in order to improve its performance.</p> 
  <p>If you use a tagged Acrobat form as input, you cannot use the Output service Java or web service API to turn off the tagged setting. If you attempt to programmatically set this option to <span class="code">false</span>, the result PDF document is still tagged.</p> 
  <note> 
   <p>If you do not specify rendering run-time options, then default values are used. For information about rendering run-time options, see the <span class="code">RenderOptionsSpec</span> class reference. (See <a href="http://www.adobe.com/go/learn_aemforms_javadocs_63_en">AEM Forms API Reference</a>).</p> 
  </note> 
  <p><strong>Generate a PDF document</strong></p> 
  <p>After you reference a valid XML data source that contains form data and you set run-time options, you can invoke the Output service, which results in it generating a PDF document.</p> 
  <p>When generating a PDF document, you specify URI values that are required by the Output service to create a PDF document. A form design can be stored in locations such as the server file system or as part of an AEM Forms application. A form design (or other resources such as an image file) that exists as part of a Forms application can be referenced by using the content root URI value <span class="code">repository:///</span>. For example, consider the following form design named <i>Loan.xdp</i> located within a Forms application named <i>Applications/FormsApplication</i>:</p> 
  <img alt="" src="assets/cp_cp_formrepository.png" /> 
  <p>To access the Loan.xdp file shown in the previous illustration, specify <span class="code">repository:///Applications/FormsApplication/1.0/FormsFolder/</span> as the third parameter passed to the <span class="code">OutputClient</span> object’s <span class="code">generatePDFOutput</span> method. Specify the form name (<i>Loan.xdp</i>) as the second parameter passed to the <span class="code">OutputClient</span> object’s <span class="code">generatePDFOutput</span> method.</p> 
  <p>If the XDP file contains images (or other resources such as fragments), place the resources in the same application folder as the XDP file. AEM Forms uses the content root URI as the base path to resolve references to images. For example, if the Loan.xdp file contains an image, ensure that you place the image in <span class="code">Applications/FormsApplication/1.0/FormsFolder/</span>.</p> 
  <note> 
   <p>You can reference a Forms application URI when invoking the <span class="code">OutputClient</span> object’s <span class="code">generatePDFOutput</span> or <span class="code">generatePrintedOutput</span> methods.</p> 
  </note> 
  <note> 
   <p>To see a complete quick start that creates a PDF document by referencing a XDP located in a Forms application, see <a href="/programming-with-aem-forms/output-service-java-api-quick#quick_start_soap_mode_creating_a_pdf_document_based_on_an_application_xdp_file_using_the_java_api">Quick Start (EJB mode): Creating a PDF document based on an application XDP file using the Java API</a>.</p> 
  </note> 
  <p><strong>Retrieve the results of the operation</strong></p> 
  <p>After the Output service performs an operation, it returns various data items such as status XML data that specifies whether the operation was successful.</p> 
  <p><strong>See also</strong></p> 
  <p><a href="creating-document-output-streams#create_a_pdf_document_using_the_java_api">Create a PDF document using the Java API</a></p> 
  <p><a href="creating-document-output-streams#create_a_pdf_document_using_the_web_service_api">Create a PDF document using the web service API</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#including_aem_forms_java_library_files">Including AEM Forms Java library files</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#setting_connection_properties">Setting connection properties</a></p> 
  <p><a href="/programming-with-aem-forms/output-service-java-api-quick#output_service_java_api_quick_start_soap">Output Service API Quick Starts</a></p> 
  <h3 id="create_a_pdf_document_using_the_java_api">Create a PDF document using the Java API</h3> 
  <p></p> 
  <p>Create a PDF document by using the Output API (Java):</p> 
  <ol> 
   <li><p>Include project files.</p><p>Include client JAR files, such as adobe-output-client.jar, in your Java project’s class path. </p></li> 
   <li><p>Create an Output Client object.</p> 
    <ul> 
     <li><p>Create a <span class="code">ServiceClientFactory</span> object that contains connection properties. </p></li> 
     <li><p>Create an <span class="code">OutputClient</span> object by using its constructor and passing the <span class="code">ServiceClientFactory</span> object.</p></li> 
    </ul></li> 
   <li><p>Reference an XML data source. </p> 
    <ul> 
     <li><p>Create a <span class="code">java.io.FileInputStream</span> object that represents the XML data source that is used to populate the PDF document by using its constructor and passing a string value that specifies the location of the XML file.</p></li> 
     <li><p>Create a <span class="code">com.adobe.idp.Document</span> object by using its constructor. Pass the <span class="code">java.io.FileInputStream</span> object.</p></li> 
    </ul></li> 
   <li><p>Set PDF run-time options.</p> 
    <ul> 
     <li><p>Create a <span class="code">PDFOutputOptionsSpec</span> object by using its constructor. </p></li> 
     <li><p>Set the File URI option by invoking the <span class="code">PDFOutputOptionsSpec</span> object’s <span class="code">setFileURI</span> method. Pass a string value that specifies the location of the PDF file that the Output service generates. The File URI option is relative to the J2EE application server hosting AEM Forms, not the client computer. </p></li> 
    </ul></li> 
   <li><p>Set rendering run-time options.</p> 
    <ul> 
     <li><p>Create a <span class="code">RenderOptionsSpec</span> object by using its constructor.</p></li> 
     <li><p>Cache the form design to improve the performance of the Output service by invoking the <span class="code">RenderOptionsSpec</span> object’s <span class="code">setCacheEnabled</span> and passing <span class="code">true</span>.</p></li> 
    </ul> 
    <note> 
     <p>You cannot set the version of the PDF document by using the <span class="code">RenderOptionsSpec</span> object’s <span class="code">setPdfVersion</span> method if the input document is an Acrobat form (a form created in Acrobat) or an XFA document that is signed or certified. The output PDF document retains the original PDF version. Likewise, you cannot set the tagged Adobe PDF option by invoking the <span class="code">RenderOptionsSpec</span> object’s <span class="code">setTaggedPDF</span><i> method if the input document is an Acrobat form or a signed or certified XFA document. </i></p> 
    </note> 
    <note> 
     <p>You cannot set the linearized PDF option by using the <span class="code">RenderOptionsSpec</span> object’s <span class="code">setLinearizedPDF</span> method if the input PDF document is certified or digitally signed. (See <a href="/programming-with-aem-forms/digitally-signing-certifying-documents#digitally_signing_pdf_documents">Digitally Signing PDF Documents</a><i>.)</i></p> 
    </note></li> 
   <li><p>Generate a PDF document.</p><p>Create a PDF document by invoking the <span class="code">OutputClient</span> object’s <span class="code">generatePDFOutput</span> method and passing the following values:</p> 
    <ul> 
     <li><p>A <span class="code">TransformationFormat</span> enumeration value. To generate a PDF document, specify <span class="code">TransformationFormat.PDF</span>. </p></li> 
     <li><p>A string value that specifies the name of the form design.</p></li> 
     <li><p>A string value that specifies the content root where the form design is located.</p></li> 
     <li><p>A <span class="code">PDFOutputOptionsSpec</span> object that contains PDF run-time options.</p></li> 
     <li><p>A <span class="code">RenderOptionsSpec</span> object that contains rendering run-time options.</p></li> 
     <li><p>The <span class="code">com.adobe.idp.Document</span> object that contains the XML data source that contains data to merge with the form design.</p></li> 
    </ul><p>The <span class="code">generatePDFOutput</span> method returns an <span class="code">OutputResult</span> object that contains the results of the operation.</p> 
    <note> 
     <p>When generating a PDF document by invoking the <span class="code">generatePDFOutput</span> method, be aware that you cannot merge data with an XFA PDF form that is signed or certified. (See <a href="/programming-with-aem-forms/digitally-signing-certifying-documents#digitally_signing_and_certifying_documents">Digitally Signing and Certifying Documents</a><i>.)</i></p> 
    </note> 
    <note> 
     <p>The <span class="code">OutputResult</span> object’s <span class="code">getRecordLevelMetaDataList</span> method returns <span class="code">null</span><i>.</i></p> 
    </note> 
    <note> 
     <p>You can also create a PDF document by invoking the <span class="code">OutputClient</span> object’s <span class="code">generatePDFOutput2</span> method. (See <a href="creating-document-output-streams#passing_documents_located_in_content_services_deprecated_to_the_output_service">Passing Documents located in Content Services (deprecated) to the Output Service</a><i>.)</i></p> 
    </note></li> 
   <li><p><a href="#unresolvedlink-lc-ou-create-pdf-docs-cp.xml#ws624e3cba99b79e12e69a9941333732bac8-792a.2">Retrieve the results of the operation</a>.</p> 
    <ul> 
     <li><p>Retrieve a <span class="code">com.adobe.idp.Document</span> object that represents the status of the <span class="code">generatePDFOutput</span> operation by invoking the <span class="code">OutputResult</span> object’s <span class="code">getStatusDoc</span> method. This method returns status XML data that specifies whether the operation was successful.</p></li> 
     <li><p>Create a <span class="code">java.io.File</span> object that contains the results of the operation. Ensure that the file name extension is .xml. </p></li> 
     <li><p>Invoke the <span class="code">com.adobe.idp.Document</span> object’s <span class="code">copyToFile</span> method to copy the contents of the <span class="code">com.adobe.idp.Document</span> object to the file (ensure that you use the <span class="code">com.adobe.idp.Document</span> object that was returned by the <span class="code">getStatusDoc</span> method).</p></li> 
    </ul><p>Although the Output service writes the PDF document to the location specified by the argument that is passed to the <span class="code">PDFOutputOptionsSpec</span> object’s <span class="code">setFileURI</span> method, you can programmatically retrieve the PDF/A document by invoking the <span class="code">OutputResult</span> object’s <span class="code">getGeneratedDoc</span> method. </p></li> 
  </ol> 
  <p><strong>See also</strong></p> 
  <p><a href="creating-document-output-streams#summary_of_steps">Summary of steps</a></p> 
  <p><a href="/programming-with-aem-forms/output-service-java-api-quick#quick_start_soap_mode_creating_a_pdf_document_using_the_java_api">Quick Start (EJB mode): Creating a PDF document using the Java API</a></p> 
  <p><a href="/programming-with-aem-forms/output-service-java-api-quick#quick_start_soap_mode_creating_a_pdf_document_using_the_java_api">Quick Start (SOAP mode): Creating a PDF document using the Java API</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#including_aem_forms_java_library_files">Including AEM Forms Java library files</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#setting_connection_properties">Setting connection properties</a></p> 
  <h3 id="create_a_pdf_document_using_the_web_service_api">Create a PDF document using the web service API</h3> 
  <p></p> 
  <p>Create a PDF document by using the Output API (web service):</p> 
  <ol> 
   <li><p><a href="#unresolvedlink-lc-ou-create-pdf-docs-cp.xml#ws624e3cba99b79e12e69a9941333732bac8-7934.2">Include project files</a>.</p><p>Create a Microsoft .NET project that uses MTOM. Ensure that you use the following WSDL definition: <span class="code">http://localhost:8080/soap/services/OutputService?WSDL&amp;lc_version=9.0.1</span>. </p> 
    <note> 
     <p>Replace <span class="code">localhost</span><i> with the IP address of the server hosting AEM Forms. </i></p> 
    </note></li> 
   <li><p><a href="#unresolvedlink-lc-ou-create-pdf-docs-cp.xml#ws624e3cba99b79e12e69a9941333732bac8-7932.2">Create an Output Client object</a>.</p> 
    <ul> 
     <li><p>Create an <span class="code">OutputServiceClient</span> object by using its default constructor. </p></li> 
     <li><p>Create an <span class="code">OutputServiceClient.Endpoint.Address</span> object by using the <span class="code">System.ServiceModel.EndpointAddress</span> constructor. Pass a string value that specifies the WSDL to the AEM Forms service (for example, <span class="code">http://localhost:8080/soap/services/OutputService?blob=mtom</span>.) You do not need to use the <span class="code">lc_version</span> attribute. This attribute is used when you create a service reference. However, specify <span class="code">?blob=mtom</span> to use MTOM.</p></li> 
     <li><p>Create a <span class="code">System.ServiceModel.BasicHttpBinding</span> object by getting the value of the <span class="code">OutputServiceClient.Endpoint.Binding</span> field. Cast the return value to <span class="code">BasicHttpBinding</span>. </p></li> 
     <li><p>Set the <span class="code">System.ServiceModel.BasicHttpBinding</span> object’s <span class="code">MessageEncoding</span> field to <span class="code">WSMessageEncoding.Mtom</span>. This value ensures that MTOM is used. </p></li> 
     <li><p>Enable basic HTTP authentication by performing the following tasks:</p> 
      <ul> 
       <li><p>Assign the AEM forms user name to the field <span class="code">OutputServiceClient.ClientCredentials.UserName.UserName</span>.</p></li> 
       <li><p>Assign the corresponding password value to the field <span class="code">OutputServiceClient.ClientCredentials.UserName.Password</span>.</p></li> 
       <li><p>Assign the constant value <span class="code">HttpClientCredentialType.Basic</span> to the field <span class="code">BasicHttpBindingSecurity.Transport.ClientCredentialType</span>. </p></li> 
       <li><p>Assign the constant value <span class="code">BasicHttpSecurityMode.TransportCredentialOnly</span> to the field <span class="code">BasicHttpBindingSecurity.Security.Mode</span>. </p></li> 
      </ul></li> 
    </ul></li> 
   <li><p><a href="#unresolvedlink-lc-ou-create-pdf-docs-cp.xml#ws624e3cba99b79e12e69a9941333732bac8-7930.2">Reference an XML data source</a>.</p> 
    <ul> 
     <li><p>Create a <span class="code">BLOB</span> object by using its constructor. The <span class="code">BLOB</span> object is used to store XML data that will be merged with the PDF document.</p></li> 
     <li><p>Create a <span class="code">System.IO.FileStream</span> object by invoking its constructor and passing a string value that represents the file location of the XML file that contains form data. </p></li> 
     <li><p>Create a byte array that stores the content of the <span class="code">System.IO.FileStream</span> object. You can determine the size of the byte array by getting the <span class="code">System.IO.FileStream</span> object’s <span class="code">Length</span> property. </p></li> 
     <li><p>Populate the byte array with stream data by invoking the <span class="code">System.IO.FileStream</span> object’s <span class="code">Read</span> method and passing the byte array, the starting position, and the stream length to read.</p></li> 
     <li><p>Populate the <span class="code">BLOB</span> object by assigning its <span class="code">MTOM</span> field with the contents of the byte array.</p></li> 
    </ul></li> 
   <li><p><a href="#unresolvedlink-lc-ou-create-pdf-docs-cp.xml#ws624e3cba99b79e12e69a9941333732bac8-792f.2">Set PDF run-time options</a>.</p> 
    <ul> 
     <li><p>Create a <span class="code">PDFOutputOptionsSpec</span> object by using its constructor. </p></li> 
     <li><p>Set the File URI option by assigning a string value that specifies the location of the PDF file that the Output service generates to the <span class="code">PDFOutputOptionsSpec</span> object’s <span class="code">fileURI</span> data member. The File URI option is relative to the J2EE application server hosting AEM Forms, not the client computer.</p></li> 
    </ul></li> 
   <li><p><a href="#unresolvedlink-lc-ou-create-pdf-docs-cp.xml#ws624e3cba99b79e12e69a9941333732bac8-792e.2">Set rendering run-time options</a>.</p> 
    <ul> 
     <li><p>Create a <span class="code">RenderOptionsSpec</span> object by using its constructor.</p></li> 
     <li><p>Cache the form design to improve the performance of the Output service by assigning the value <span class="code">true</span> to the <span class="code">RenderOptionsSpec</span> object’s <span class="code">cacheEnabled</span> data member.</p></li> 
    </ul> 
    <note> 
     <p>You cannot set the version of the PDF document by using the <span class="code">RenderOptionsSpec</span> object’s <span class="code">setPdfVersion</span> method if the input document is an Acrobat form (a form created in Acrobat) or an XFA document that is signed or certified. The output PDF document retains the original PDF version. Likewise, you cannot set the tagged Adobe PDF option by invoking the <span class="code">RenderOptionsSpec</span> object’s <span class="code">setTaggedPDF</span><i> method if the input document is an Acrobat form or a signed or certified XFA document.</i></p> 
    </note> 
    <note> 
     <p>You cannot set the linearized PDF option by using the <span class="code">RenderOptionsSpec</span> object’s <span class="code">linearizedPDF</span> member if the input PDF document is certified or digitally signed. (See <a href="/programming-with-aem-forms/digitally-signing-certifying-documents#digitally_signing_pdf_documents">Digitally Signing PDF Documents</a><i>.)</i></p> 
    </note></li> 
   <li><p><a href="#unresolvedlink-lc-ou-create-pdf-docs-cp.xml#ws624e3cba99b79e12e69a9941333732bac8-7d45.2">Generate a PDF document</a>.</p><p>Create a PDF document by invoking the <span class="code">OutputServiceService</span> object’s <span class="code">generatePDFOutput </span>method and passing the following values:</p> 
    <ul> 
     <li><p>A <span class="code">TransformationFormat</span> enumeration value. To generate a PDF document, specify <span class="code">TransformationFormat.PDF</span>. </p></li> 
     <li><p>A string value that specifies the name of the form design.</p></li> 
     <li><p>A string value that specifies the content root where the form design is located.</p></li> 
     <li><p>A <span class="code">PDFOutputOptionsSpec</span> object that contains PDF run-time options.</p></li> 
     <li><p>A <span class="code">RenderOptionsSpec</span> object that contains rendering run-time options.</p></li> 
     <li><p>The <span class="code">BLOB</span> object that contains the XML data source that contains data to merge with the form design.</p></li> 
     <li><p>A <span class="code">BLOB</span> object that is populated by the <span class="code">generatePDFOutput</span> method. The <span class="code">generatePDFOutput</span> method populates this object with generated metadata that describes the document. (This parameter value is required only for web service invocation).</p></li> 
     <li><p>A <span class="code">BLOB</span> object that is populated by the <span class="code">generatePDFOutput</span> method. The <span class="code">generatePDFOutput</span> method populates this object with result data. (This parameter value is required only for web service invocation).</p></li> 
     <li><p>An <span class="code">OutputResult</span> object that contains the results of the operation. (This parameter value is required only for web service invocation).</p></li> 
    </ul> 
    <note> 
     <p>When generating a PDF document by invoking the <span class="code">generatePDFOutput</span> method, be aware that you cannot merge data with an XFA PDF form that is signed or certified. (See <a href="/programming-with-aem-forms/digitally-signing-certifying-documents#digitally_signing_and_certifying_documents">Digitally Signing and Certifying Documents</a><i>.)</i></p> 
    </note> 
    <note> 
     <p>You can also create a PDF document by invoking the <span class="code">OutputClient</span> object’s <span class="code">generatePDFOutput2</span> method. (See <a href="creating-document-output-streams#passing_documents_located_in_content_services_deprecated_to_the_output_service">Passing Documents located in Content Services (deprecated) to the Output Service</a><i>.)</i></p> 
    </note></li> 
   <li><p><a href="#unresolvedlink-lc-ou-create-pdf-docs-cp.xml#ws624e3cba99b79e12e69a9941333732bac8-792a.2">Retrieve the results of the operation</a>.</p> 
    <ul> 
     <li><p>Create a <span class="code">System.IO.FileStream</span> object by invoking its constructor and passing a string value that represents an XML file location that contains result data. Ensure that the file name extension is .xml.</p></li> 
     <li><p>Create a byte array that stores the data content of the <span class="code">BLOB</span> object that was populated with result data by the <span class="code">OutputServiceService</span> object’s <span class="code">generatePDFOutput</span> method (the eighth parameter). Populate the byte array by getting the value of the <span class="code">BLOB</span> object’s <span class="code">MTOM</span><span class="code">field</span>.</p></li> 
     <li><p>Create a <span class="code">System.IO.BinaryWriter</span> object by invoking its constructor and passing the <span class="code">System.IO.FileStream</span> object.</p></li> 
     <li><p>Write the contents of the byte array to the XML file by invoking the <span class="code">System.IO.BinaryWriter</span> object’s <span class="code">Write</span> method and passing the byte array.</p></li> 
    </ul><p>See also</p> 
    <note> 
     <p>The <span class="code">OutputServiceService</span> object’s <span class="code">generateOutput</span> method is deprecated. </p> 
    </note></li> 
  </ol> 
  <h2 id="creating_pdf_a_documents">Creating PDF/A Documents</h2> 
  <p></p> 
  <p>You can use the Output service to create a PDF/A document. Because PDF/A is an archival format for long-term preservation of the document’s content, all fonts are embedded and the file is uncompressed. As a result, a PDF/A document is typically larger than a standard PDF document. In addition, a PDF/A document does not contain audio and video content. Like other Output service tasks, you provide both a form design and data to merge with a form design to create a PDF/A document.</p> 
  <p>The PDF/A-1 specification consists of two levels of conformance, namely a and b. The major difference between the two is regarding the logical structure (accessibility) support, which is not required for conformance level b. Regardless of the conformance level, PDF/A-1 dictates that all fonts are embedded in the generated PDF/A document.</p> 
  <p>Although PDF/A is the standard for archiving PDF documents, it is not mandatory that PDF/A be used for archiving if a standard PDF document meets your company’s needs. The purpose of the PDF/A standard is to establish a PDF file that can be stored for a long period of time as well as meet document preservation requirements. For example, a URL cannot be embedded in a PDF/A because over time the URL may become invalid. </p> 
  <p>Your organization must assess its own needs, the length of time you intend to keep the document, file size considerations, and determine your own archiving strategy. You can programmatically determine if a PDF document is PDF/A compliant by using the DocConverter service. (See <a href="/programming-with-aem-forms/pdf-a-documents#programmatically_determining_pdf_a_compliancy">Programmatically Determining PDF/A Compliancy</a>.)</p> 
  <p>A PDF/A document must use the font that is specified in the form design and fonts cannot be substituted. As a result, if a font that is located within a PDF document is not available on the host operating system (OS), then an exception occurs.</p> 
  <p>When a PDF/A document is opened in Acrobat, a message is displayed that confirms that the document is a PDF/A document, as shown in the following illustration. </p> 
  <img alt="" src="assets/cp_cp_pdfamessage.png" /> 
  <note> 
   <p>The AIIM web site has a PDF/A FAQ section that you can access at <a href="http://www.aiim.org/documents/standards/19005-1_FAQ.pdf">http://www.aiim.org/documents/standards/19005-1_FAQ.pdf</a>.</p> 
  </note> 
  <note> 
   <p>For more information about the Output service, see <a href="http://www.adobe.com/go/learn_aemforms_services_63">Services Reference for AEM Forms</a>.</p> 
  </note> 
  <h3 id="summary_of_steps">Summary of steps</h3> 
  <p></p> 
  <p>To create a PDF/A document, perform the following steps:</p> 
  <ol> 
   <li><p>Include project files.</p></li> 
   <li><p>Create an Output Client object. </p></li> 
   <li><p>Reference an XML data source.</p></li> 
   <li><p>Set PDF/A run-time options.</p></li> 
   <li><p>Set rendering run-time options.</p></li> 
   <li><p>Generate a PDF/A document.</p></li> 
   <li><p>Retrieve the results of the operation.</p></li> 
  </ol> 
  <p><strong>Include project files</strong></p> 
  <p>Include necessary files in your development project. If you are creating a custom application by using Java, include the necessary JAR files. If you are using web services, make sure that you include the proxy files.</p> 
  <p>The following JAR files must be added to your project’s class path:</p> 
  <ul> 
   <li><p>adobe-livecycle-client.jar</p></li> 
   <li><p>adobe-usermanager-client.jar</p></li> 
   <li><p>adobe-output-client.jar</p></li> 
   <li><p>adobe-utilities.jar (Required if AEM Forms is deployed on JBoss)</p></li> 
   <li><p>jbossall-client.jar (Required if AEM Forms is deployed on JBoss)</p></li> 
  </ul> 
  <p>if AEM Forms is deployed on a supported J2EE application server that is not JBoss, you will need to replace the adobe-utilities.jar and jbossall-client.jar files with JAR files that are specific to the J2EE application server on which AEM Forms is deployed.</p> 
  <p><strong>Create an Output Client object</strong></p> 
  <p>Before you can programmatically perform an Output service operation, you must create an Output service client object. If you are using the Java API, create an <span class="code">OutputClient</span> object. If you are using the Output web service API, create an <span class="code">OutputServiceService</span> object. </p> 
  <p><strong>Reference an XML data source</strong></p> 
  <p>To merge data with the form design, you must reference an XML data source that contains data. An XML element must exist for every form field that you want to populate with data. The XML element name must match the field name. An XML element is ignored if it does not correspond to a form field or if the XML element name does not match the field name. It is not necessary to match the order in which the XML elements are displayed if all XML elements are specified.</p> 
  <p><strong>Set PDF/A run-time options</strong></p> 
  <p>You can set the File URI option when creating a PDF/A document. The URI is relative to the J2EE application server hosting AEM Forms. That is, if you set C:\Adobe, the file is written to the folder on the server, not the client computer. The URI specifies the name and location of the PDF/A file that the Output service generates.</p> 
  <p><strong>Set rendering run-time options</strong></p> 
  <p>You can set rendering run-time options when creating PDF/A documents. Two PDF/A related options that you can set are the <span class="code">PDFAConformance</span> and <span class="code">PDFARevisionNumber</span> values. The <span class="code">PDFAConformance</span> value refers to how a PDF document adheres to requirements that specify how long-term electronic documents are preserved. Valid values for this option are <span class="code">A</span> and <span class="code">B</span>. For information about level a and b conformance, see the PDF/A-1 ISO specification that is titled <i>ISO 19005-1 Document management</i>. </p> 
  <p>The <span class="code">PDFARevisionNumber</span> value refers to the revision number of a PDF/A document. For information about the revision number of a PDF/A document, see the PDF/A-1 ISO specification that is titled <i>ISO 19005-1 Document management</i>. </p> 
  <note> 
   <p>You cannot set the tagged Adobe PDF option to <span class="code">false</span> when creating a PDF/A 1A document. PDF/A 1A will always be a tagged PDF document. Also, you cannot set the tagged Adobe PDF option to <span class="code">true</span> when creating a PDF/A 1B document. PDF/A 1B will always be an untagged PDF document.</p> 
  </note> 
  <p><strong>Generate a PDF/A document</strong></p> 
  <p>After you reference a valid XML data source that contains form data and you set run-time options, you can invoke the Output service, causing it to generate a PDF/A document.</p> 
  <p><strong>Retrieve the results of the operation</strong></p> 
  <p>After the Output service performs an operation, it returns various data items such as XML data that specifies whether the operation was successful. </p> 
  <p><strong>See also</strong></p> 
  <p><a href="creating-document-output-streams#create_a_pdf_a_document_using_the_java_api">Create a PDF/A document using the Java API</a></p> 
  <p><a href="creating-document-output-streams#create_a_pdf_a_document_using_the_web_service_api">Create a PDF/A document using the web service API</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#including_aem_forms_java_library_files">Including AEM Forms Java library files</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#setting_connection_properties">Setting connection properties</a></p> 
  <p><a href="/programming-with-aem-forms/output-service-java-api-quick#output_service_java_api_quick_start_soap">Output Service API Quick Starts</a></p> 
  <h3 id="create_a_pdf_a_document_using_the_java_api">Create a PDF/A document using the Java API</h3> 
  <p></p> 
  <p>Create a PDF/A document by using the Output API (Java):</p> 
  <ol> 
   <li><p>Include project files.</p><p>Include client JAR files, such as adobe-output-client.jar, in your Java project’s class path. </p></li> 
   <li><p>Create an Output Client object. </p> 
    <ul> 
     <li><p>Create a <span class="code">ServiceClientFactory</span> object that contains connection properties.</p></li> 
     <li><p>Create an <span class="code">OutputClient</span> object by using its constructor and passing the <span class="code">ServiceClientFactory</span> object.</p></li> 
    </ul></li> 
   <li><p>Reference an XML data source.</p> 
    <ul> 
     <li><p>Create a <span class="code">java.io.FileInputStream</span> object that represents the XML data source that is used to populate the PDF/A document by using its constructor and passing a string value that specifies the location of the XML file.</p></li> 
     <li><p>Create a <span class="code">com.adobe.idp.Document</span> object by using its constructor and passing the <span class="code">java.io.FileInputStream</span> object.</p></li> 
    </ul></li> 
   <li><p>Set PDF/A run-time options.</p> 
    <ul> 
     <li><p>Create a <span class="code">PDFOutputOptionsSpec</span> object by using its constructor. </p></li> 
     <li><p>Set the File URI option by invoking the <span class="code">PDFOutputOptionsSpec</span> object’s <span class="code">setFileURI</span> method. Pass a string value that specifies the location of the PDF file that the Output service generates. The File URI option is relative to the J2EE application server hosting AEM Forms, not the client computer. </p></li> 
    </ul></li> 
   <li><p>Set rendering run-time options.</p> 
    <ul> 
     <li><p>Create a <span class="code">RenderOptionsSpec</span> object by using its constructor.</p></li> 
     <li><p>Set the <span class="code">PDFAConformance</span> value by invoking the <span class="code">RenderOptionsSpec</span> object’s <span class="code">setPDFAConformance</span> method and passing a <span class="code">PDFAConformance</span> enum value that specifies the conformance level. For example, to specify conformance level A, pass <span class="code">PDFAConformance.A</span>. </p></li> 
     <li><p>Set the <span class="code">PDFARevisionNumber</span> value by invoking the <span class="code">RenderOptionsSpec</span> object’s <span class="code">setPDFARevisionNumber</span> method and passing <span class="code">PDFARevisionNumber.Revision_1</span>.</p></li> 
    </ul> 
    <note> 
     <p>The PDF version of a PDF/A document is 1.4 regardless of which value you specify for the <span class="code">RenderOptionsSpec</span> object’s <span class="code">setPdfVersion</span><i>method.</i></p> 
    </note></li> 
   <li><p>Generate a PDF/A document.</p><p>Create a PDF/A document by invoking the <span class="code">OutputClient</span> object’s <span class="code">generatePDFOutput</span> method and passing the following values:</p> 
    <ul> 
     <li><p>A <span class="code">TransformationFormat</span> enumeration value. To generate a PDF/A document, specify <span class="code">TransformationFormat.PDFA</span>. </p></li> 
     <li><p>A string value that specifies the name of the form design.</p></li> 
     <li><p>A string value that specifies the content root where the form design is located.</p></li> 
     <li><p>A <span class="code">PDFOutputOptionsSpec</span> object that contains PDF run-time options.</p></li> 
     <li><p>A <span class="code">RenderOptionsSpec</span> object that contains rendering run-time options.</p></li> 
     <li><p>The <span class="code">com.adobe.idp.Document</span> object that contain the XML data source that contains data to merge with the form design.</p></li> 
    </ul><p>The <span class="code">generatePDFOutput</span> method returns an <span class="code">OutputResult</span> object that contains the results of the operation.</p> 
    <note> 
     <p>The <span class="code">OutputResult</span> object’s <span class="code">getRecordLevelMetaDataList</span> method returns <span class="code">null</span><i>. </i></p> 
    </note> 
    <note> 
     <p>You can also create a PDF /A document by invoking the <span class="code">OutputClient</span> object’s <span class="code">generatePDFOutput</span>2 method. (See <a href="creating-document-output-streams#passing_documents_located_in_content_services_deprecated_to_the_output_service">Passing Documents located in Content Services (deprecated) to the Output Service</a>.)</p> 
    </note></li> 
   <li><p>Retrieve the results of the operation.</p> 
    <ul> 
     <li><p>Create a <span class="code">com.adobe.idp.Document</span> object that represents the status of the <span class="code">generatePDFOutput</span> method by invoking the <span class="code">OutputResult</span> object’s <span class="code">getStatusDoc</span> method.</p></li> 
     <li><p>Create a <span class="code">java.io.File</span> object that will contain the results of the operation. Ensure that the file name extension is .xml. </p></li> 
     <li><p>Invoke the <span class="code">com.adobe.idp.Document</span> object’s <span class="code">copyToFile</span> method to copy the contents of the <span class="code">com.adobe.idp.Document</span> object to the file (ensure that you use the <span class="code">com.adobe.idp.Document</span> object that was returned by the <span class="code">getStatusDoc</span> method).</p></li> 
    </ul> 
    <note> 
     <p>Although the Output service writes the PDF/A document to the location specified by the argument that is passed to the <span class="code">PDFOutputOptionsSpec</span> object’s <span class="code">setFileURI</span> method, you can programmatically retrieve the PDF/A document by invoking the <span class="code">OutputResult</span> object’s <span class="code">getGeneratedDoc</span><i> method.</i></p> 
    </note></li> 
  </ol> 
  <p><strong>See also</strong></p> 
  <p><a href="creating-document-output-streams#summary_of_steps">Summary of steps</a></p> 
  <p><a href="#unresolvedlink-lc-qs-output-ou.xml#ws624e3cba99b79e12e69a9941333732bac8-7d90.2">Quick Start (SOAP mode): Creating a PDF/A document using the Java API</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#including_aem_forms_java_library_files">Including AEM Forms Java library files</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#setting_connection_properties">Setting connection properties</a>.</p> 
  <h3 id="create_a_pdf_a_document_using_the_web_service_api">Create a PDF/A document using the web service API</h3> 
  <p></p> 
  <p>Create a PDF/A document by using the Output API (web service):</p> 
  <ol> 
   <li><p>Include project files.</p><p>Create a Microsoft .NET project that uses MTOM. Ensure that you use the following WSDL definition: <span class="code">http://localhost:8080/soap/services/OutputService?WSDL&amp;lc_version=9.0.1</span>. </p> 
    <note> 
     <p>Replace <span class="code">localhost</span><i> with the IP address of the server hosting AEM Forms. </i></p> 
    </note></li> 
   <li><p>Create an Output Client object.</p> 
    <ul> 
     <li><p>Create an <span class="code">OutputServiceClient</span> object by using its default constructor. </p></li> 
     <li><p>Create an <span class="code">OutputServiceClient.Endpoint.Address</span> object by using the <span class="code">System.ServiceModel.EndpointAddress</span> constructor. Pass a string value that specifies the WSDL to the AEM Forms service (for example, <span class="code">http://localhost:8080/soap/services/OutputService?blob=mtom</span>.) You do not need to use the <span class="code">lc_version</span> attribute. This attribute is used when you create a service reference. However, specify <span class="code">?blob=mtom</span> to use MTOM.</p></li> 
     <li><p>Create a <span class="code">System.ServiceModel.BasicHttpBinding</span> object by getting the value of the <span class="code">OutputServiceClient.Endpoint.Binding</span> field. Cast the return value to <span class="code">BasicHttpBinding</span>. </p></li> 
     <li><p>Set the <span class="code">System.ServiceModel.BasicHttpBinding</span> object’s <span class="code">MessageEncoding</span> field to <span class="code">WSMessageEncoding.Mtom</span>. This value ensures that MTOM is used. </p></li> 
     <li><p>Enable basic HTTP authentication by performing the following tasks:</p> 
      <ul> 
       <li><p>Assign the AEM forms user name to the field <span class="code">OutputServiceClient.ClientCredentials.UserName.UserName</span>.</p></li> 
       <li><p>Assign the corresponding password value to the field <span class="code">OutputServiceClient.ClientCredentials.UserName.Password</span>.</p></li> 
       <li><p>Assign the constant value <span class="code">HttpClientCredentialType.Basic</span> to the field <span class="code">BasicHttpBindingSecurity.Transport.ClientCredentialType</span>. </p></li> 
       <li><p>Assign the constant value <span class="code">BasicHttpSecurityMode.TransportCredentialOnly</span> to the field <span class="code">BasicHttpBindingSecurity.Security.Mode</span>. </p></li> 
      </ul></li> 
    </ul></li> 
   <li><p>Reference an XML data source.</p> 
    <ul> 
     <li><p>Create a <span class="code">BLOB</span> object by using its constructor. The <span class="code">BLOB</span> object is used to store data that will be merged with the PDF/A document.</p></li> 
     <li><p>Create a <span class="code">System.IO.FileStream</span> object by invoking its constructor and passing a string value that represents the file location of the PDF document to encrypt and the mode in which to open the file. </p></li> 
     <li><p>Create a byte array that stores the content of the <span class="code">System.IO.FileStream</span> object. You can determine the size of the byte array by getting the <span class="code">System.IO.FileStream</span> object’s <span class="code">Length</span> property. </p></li> 
     <li><p>Populate the byte array with stream data by invoking the <span class="code">System.IO.FileStream</span> object’s <span class="code">Read</span> method and passing the byte array, the starting position, and the stream length to read.</p></li> 
     <li><p>Populate the <span class="code">BLOB</span> object by assigning its <span class="code">MTOM</span> field with the byte array contents.</p></li> 
    </ul></li> 
   <li><p>Set PDF/A run-time options.</p> 
    <ul> 
     <li><p>Create a <span class="code">PDFOutputOptionsSpec</span> object by using its constructor. </p></li> 
     <li><p>Set the File URI option by assigning a string value that specifies the location of the PDF file that the Output service generates to the <span class="code">PDFOutputOptionsSpec</span> object’s <span class="code">fileURI</span> data member. The File URI option is relative to the J2EE application server hosting AEM Forms, not the client computer</p></li> 
    </ul></li> 
   <li><p>Set rendering run-time options.</p> 
    <ul> 
     <li><p>Create a <span class="code">RenderOptionsSpec</span> object by using its constructor.</p></li> 
     <li><p>Set the <span class="code">PDFAConformance</span> value by assigning a <span class="code">PDFAConformance</span> enum value to the <span class="code">RenderOptionsSpec</span> object’s <span class="code">PDFAConformance</span> data member. For example, to specify conformance level A, assign <span class="code">PDFAConformance.A</span> to this data member.</p></li> 
     <li><p>Set the <span class="code">PDFARevisionNumber</span> value by assigning a <span class="code">PDFARevisionNumber</span> enum value to the <span class="code">RenderOptionsSpec</span> object’s <span class="code">PDFARevisionNumber</span> data member. Assign <span class="code">PDFARevisionNumber.Revision_1</span> to this data member.</p></li> 
    </ul> 
    <note> 
     <p>The PDF version of a PDF/A document is 1.4 regardless of which value you specify.</p> 
    </note></li> 
   <li><p>Generate a PDF/A document.</p><p>Create a PDF document by invoking the <span class="code">OutputServiceService</span> object’s <span class="code">generatePDFOutput </span>method and passing the following values:</p> 
    <ul> 
     <li><p>A TransformationFormat enumeration value. To generate a PDF document, specify <span class="code">TransformationFormat.PDFA</span>. </p></li> 
     <li><p>A string value that specifies the name of the form design.</p></li> 
     <li><p>A string value that specifies the content root where the form design is located.</p></li> 
     <li><p>A <span class="code">PDFOutputOptionsSpec</span> object that contains PDF run-time options.</p></li> 
     <li><p>A <span class="code">RenderOptionsSpec</span> object that contains rendering run-time options.</p></li> 
     <li><p>The <span class="code">BLOB</span> object that contains the XML data source that contains data to merge with the form design.</p></li> 
     <li><p>A <span class="code">BLOB</span> object that is populated by the <span class="code">generatePDFOutput</span> method. The <span class="code">generatePDFOutput</span> method populates this object with generated metadata that describes the document. (This parameter value is required for web service invocation only.)</p></li> 
     <li><p>A <span class="code">BLOB</span> object that is populated by the <span class="code">generatePDFOutput</span> method. The <span class="code">generatePDFOutput</span> method populates this object with result data. (This parameter value is required for web service invocation only.)</p></li> 
     <li><p>An <span class="code">OutputResult</span> object that contains the results of the operation. (This parameter value is required for web service invocation only.)</p></li> 
    </ul> 
    <note> 
     <p>You can also create a PDF /A document by invoking the <span class="code">OutputClient</span> object’s <span class="code">generatePDFOutput</span>2 method. (See <a href="creating-document-output-streams#passing_documents_located_in_content_services_deprecated_to_the_output_service">Passing Documents located in Content Services (deprecated) to the Output Service</a>.)</p> 
    </note></li> 
   <li><p>Retrieve the results of the operation.</p> 
    <ul> 
     <li><p>Create a <span class="code">System.IO.FileStream</span> object by invoking its constructor and passing a string value that represents an XML file location that contains result data. Ensure that the file name extension is .xml.</p></li> 
     <li><p>Create a byte array that stores the data content of the <span class="code">BLOB</span> object that was populated with result data by the <span class="code">OutputServiceService</span> object’s <span class="code">generatePDFOutput</span> method (the eighth parameter). Populate the byte array by getting the value of the <span class="code">BLOB</span> object’s <span class="code">MTOM</span> field.</p></li> 
     <li><p>Create a <span class="code">System.IO.BinaryWriter</span> object by invoking its constructor and passing the <span class="code">System.IO.FileStream</span> object.</p></li> 
     <li><p>Write the contents of the byte array to the XML file by invoking the <span class="code">System.IO.BinaryWriter</span> object’s <span class="code">Write</span> method and passing the byte array.</p></li> 
    </ul></li> 
  </ol> 
  <p><strong>See also</strong></p> 
  <p><a href="creating-document-output-streams#summary_of_steps">Summary of steps</a></p> 
  <p><a href="#unresolvedlink-lc-qs-output-ou.xml#ws624e3cba99b79e12e69a9941333732bac8-7d8f.2">Quick Start (MTOM): Creating a PDF/A document using the web service API</a></p> 
  <p><a href="#unresolvedlink-lc-qs-output-ou.xml#ws624e3cba99b79e12e69a9941333732bac8-7d8e.2">Quick Start (SwaRef): Creating a PDF/A document using the web service API</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-web#invoking_aem_forms_using_mtom">Invoking AEM Forms using MTOM</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-web#invoking_aem_forms_using_swaref">Invoking AEM Forms using SwaRef</a></p> 
  <h2 id="passing_documents_located_in_content_services_deprecated_to_the_output_service">Passing Documents located in Content Services (deprecated) to the Output Service</h2> 
  <p></p> 
  <p>The Output service renders a non-interactive PDF form that is based on a form design that is typically saved as an XDP file and created in Designer. You can pass a <span class="code">com.adobe.idp.Document</span> object that contains the form design to the Output service. The Output service then renders the form design located in the <span class="code">com.adobe.idp.Document</span> object.</p> 
  <p>An advantage of passing a <span class="code">com.adobe.idp.Document</span> object to the Output service is that other AEM Forms service operations return a <span class="code">com.adobe.idp.Document</span> instance. That is, you can get a <span class="code">com.adobe.idp.Document</span> instance from another service operation and render it. For example, assume that an XDP file is stored in a Content Services (deprecated) node named <span class="code">/Company Home/Form Designs</span>, as shown in the following illustration. </p> 
  <img src="lc_ou_pass_documents_pd.xml" /> 
  <p>You can programmatically retrieve Loan.xdp from Content Services (deprecated) and pass the XDP file to the Output service within a <span class="code">com.adobe.idp.Document</span> object.</p> 
  <note> 
   <p>For more information about the Forms service, see <a href="http://www.adobe.com/go/learn_aemforms_services_63">Services Reference for AEM Forms</a>.</p> 
  </note> 
  <h3 id="summary_of_steps">Summary of steps</h3> 
  <p></p> 
  <p>To pass a document obtained from Content Services (deprecated) to the Output service, perform the following tasks:</p> 
  <ol> 
   <li><p>Include project files.</p></li> 
   <li><p>Create a Output and a Document Management Client API object. </p></li> 
   <li><p>Retrieve the form design from Content Services (deprecated).</p></li> 
   <li><p>Render the non-interactive PDF form.</p></li> 
   <li><p>Perform an action with the data stream.</p></li> 
  </ol> 
  <p><strong>Include project files</strong></p> 
  <p>Include the necessary files to your development project. If you are creating a client application by using Java, include the necessary JAR files. If you are using web services, include the proxy files.</p> 
  <p><strong>Create an Output and a Document Management Client API object</strong></p> 
  <p>Before you can programmatically perform a Output service API operation, create a Output Client API object. Also, because this workflow retrieves an XDP file from Content Services (deprecated), create a Document Management API object. </p> 
  <p><strong>Retrieve the form design from Content Services (deprecated)</strong></p> 
  <p>Retrieve the XDP file from Content Services (deprecated) by using the Java or web service API. The XDP file is returned within a <span class="code">com.adobe.idp.Document</span> instance (or a <span class="code">BLOB</span> instance if you are using web services). You can then pass the <span class="code">com.adobe.idp.Document</span> instance to the Output service. </p> 
  <p><strong>Render the non-interactive PDF form</strong></p> 
  <p>To render a non-interactive form, pass the <span class="code">com.adobe.idp.Document</span> instance that was returned from Content Services (deprecated) to the Output service. </p> 
  <note> 
   <p>Two new methods named <span class="code">generatePDFOutput2 </span>and g<span class="code">eneratePrintedOutput2 </span>accept a <span class="code">com.adobe.idp.Document</span> object that contains a form design. You can also pass a <span class="code">com.adobe.idp.Document </span>that contains the form design to the Output service when sending a print stream to a network printer. </p> 
  </note> 
  <p><strong>Perform an action with the form data stream</strong></p> 
  <p>You can save the non-interactive form as a PDF file. The form can be viewed in Adobe Reader or Acrobat. </p> 
  <p><strong>See also</strong></p> 
  <p><a href="creating-document-output-streams#pass_documents_to_the_output_service_using_the_java_api">Pass documents to the Output Service using the Java API</a></p> 
  <p><a href="creating-document-output-streams#pass_documents_to_the_output_service_using_the_web_service_api">Pass documents to the Output Service using the web service API</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#including_aem_forms_java_library_files">Including AEM Forms Java library files</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#setting_connection_properties">Setting connection properties</a></p> 
  <p><a href="/programming-with-aem-forms/output-service-java-api-quick#output_service_java_api_quick_start_soap">Output Service API Quick Starts</a></p> 
  <p><a href="creating-document-output-streams#creating_pdf_documents_using_fragments">Creating PDF Documents Using Fragments</a></p> 
  <h3 id="pass_documents_to_the_output_service_using_the_java_api">Pass documents to the Output Service using the Java API</h3> 
  <p></p> 
  <p>Pass a document retrieved from Content Services (deprecated) by using the Output service and Content Services (deprecated) API (Java):</p> 
  <ol> 
   <li><p>Include project files. </p><p>Include client JAR files, such as adobe-output-client.jar and adobe-contentservices-client.jar, in your Java project’s class path. </p></li> 
   <li><p>Create an Output and a Document Management Client API object. </p> 
    <ul> 
     <li><p>Create a <span class="code">ServiceClientFactory</span> object that contains connection properties. (See <a href="/programming-with-aem-forms/invoking-aem-forms-using-java#setting_connection_properties">Setting connection properties</a>.)</p></li> 
     <li><p>Create an <span class="code">OutputClient</span> object by using its constructor and passing the <span class="code">ServiceClientFactory</span> object.</p></li> 
     <li><p>Create a <span class="code">DocumentManagementServiceClientImpl</span> object by using its constructor and passing the <span class="code">ServiceClientFactory</span> object.</p></li> 
    </ul></li> 
   <li><p>Retrieve the form design from Content Services (deprecated). </p><p>Invoke the <span class="code">DocumentManagementServiceClientImpl</span> object’s <span class="code">retrieveContent</span> method and pass the following values:</p> 
    <ul> 
     <li><p>A string value that specifies the store where the content is added. The default store is <span class="code">SpacesStore</span>. This value is a mandatory parameter. </p></li> 
     <li><p>A string value that specifies the fully qualified path of the content to retrieve (for example, <span class="code">/Company Home/Form Designs/Loan.xdp</span>). This value is a mandatory parameter.</p></li> 
     <li><p>A string value that specifies the version. This value is an optional parameter, and you can pass an empty string. In this situation, the latest version is retrieved.</p></li> 
    </ul><p>The <span class="code">retrieveContent</span> method returns a <span class="code">CRCResult</span> object that contains the XDP file. Retrieve a <span class="code">com.adobe.idp.Document</span> instance by invoking the <span class="code">CRCResult</span> object’s <span class="code">getDocument</span> method. </p></li> 
   <li><p>Render the non-interactive PDF form. </p><p>Invoke the <span class="code">OutputClient</span> object’s <span class="code">generatePDFOutput2</span> method and pass the following values:</p> 
    <ul> 
     <li><p>A <span class="code">TransformationFormat</span> enumeration value. To generate a PDF document, specify <span class="code">TransformationFormat.PDF</span>. </p></li> 
     <li><p>A string value that specifies the content root where the additional resources such as images are located.</p></li> 
     <li><p>A <span class="code">com.adobe.idp.Document</span> object that represents the form design (use the instance returned by the <span class="code">CRCResult</span> object’s <span class="code">getDocument</span> method).</p></li> 
     <li><p>A <span class="code">PDFOutputOptionsSpec</span> object that contains PDF run-time options.</p></li> 
     <li><p>A <span class="code">RenderOptionsSpec</span> object that contains rendering run-time options.</p></li> 
     <li><p>The <span class="code">com.adobe.idp.Document</span> object that contains the XML data source that contains data to merge with the form design.</p></li> 
    </ul><p>The <span class="code">generatePDFOutput2</span> method returns an <span class="code">OutputResult</span> object that contains the results of the operation.</p></li> 
   <li><p>Perform an action with the form data stream. </p> 
    <ul> 
     <li><p>Retrieve a <span class="code">com.adobe.idp.Document</span> object that represents the non-interactive form by invoking the <span class="code">OutputResult</span> object’s <span class="code">getGeneratedDoc</span> method. </p></li> 
     <li><p>Create a <span class="code">java.io.File</span> object that contains the results of the operation. Ensure that the file name extension is .pdf. </p></li> 
     <li><p>Invoke the <span class="code">com.adobe.idp.Document</span> object’s <span class="code">copyToFile</span> method to copy the contents of the <span class="code">com.adobe.idp.Document</span> object to the file (ensure that you use the <span class="code">com.adobe.idp.Document</span> object that was returned by the <span class="code">getGeneratedDoc</span> method).</p></li> 
    </ul></li> 
  </ol> 
  <p><strong>See also</strong></p> 
  <p><a href="creating-document-output-streams#summary_of_steps">Summary of steps</a></p> 
  <p><a href="/programming-with-aem-forms/output-service-java-api-quick#quick_start_soap_mode_passing_documents_to_the_output_service_using_the_java_api">Quick Start (EJB mode): Passing documents to the Output Service using the Java API</a></p> 
  <p><a href="#unresolvedlink-lc-qs-output-ou.xml#ws624e3cba99b79e12e69a9941333732bac8-7d8b.2">Quick Start (SOAP mode): Passing documents to the Output Service using the Java API</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#including_aem_forms_java_library_files">Including AEM Forms Java library files</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#setting_connection_properties">Setting connection properties</a></p> 
  <h3 id="pass_documents_to_the_output_service_using_the_web_service_api">Pass documents to the Output Service using the web service API</h3> 
  <p></p> 
  <p>Pass a document retrieved from Content Services (deprecated) by using the Output service and Content Services (deprecated) API (web service):</p> 
  <ol> 
   <li><p>Include project files. </p><p>Create a Microsoft .NET project that uses MTOM. Because this client application invokes two AEM Forms services, create two service references. Use the following WSDL definition for the service reference associated with the Output service: <span class="code">http://localhost:8080/soap/services/OutputService?WSDL&amp;lc_version=9.0.1</span>.</p><p>Use the following WSDL definition for the service reference associated with the Document Management service: <span class="code">http://localhost:8080/soap/services/DocumentManagementService?WSDL&amp;lc_version=9.0.1</span>. </p><p>Because the <span class="code">BLOB</span> data type is common to both service references, fully qualify the <span class="code">BLOB</span> data type when using it. In the corresponding web service quick start, all <span class="code">BLOB</span> instances are fully qualified. </p> 
    <note> 
     <p>Replace <span class="code">localhost</span><i> with the IP address of the server hosting AEM Forms. </i></p> 
    </note></li> 
   <li><p>Create an Output and a Document Management Client API object. </p> 
    <ul> 
     <li><p>Create an <span class="code">OutputServiceClient</span> object by using its default constructor. </p></li> 
     <li><p>Create an <span class="code">OutputServiceClient.Endpoint.Address</span> object by using the <span class="code">System.ServiceModel.EndpointAddress</span> constructor. Pass a string value that specifies the WSDL to the Forms service (for example, <span class="code">http://localhost:8080/soap/services/OutputService?blob=mtom</span>). You do not need to use the <span class="code">lc_version</span> attribute. This attribute is used when you create a service reference.) </p></li> 
     <li><p>Create a <span class="code">System.ServiceModel.BasicHttpBinding</span> object by getting the value of the <span class="code">OutputServiceClient.Endpoint.Binding</span> field. Cast the return value to <span class="code">BasicHttpBinding</span>. </p></li> 
     <li><p>Set the <span class="code">System.ServiceModel.BasicHttpBinding</span> object’s <span class="code">MessageEncoding</span> field to <span class="code">WSMessageEncoding.Mtom</span>. This value ensures that MTOM is used. </p></li> 
     <li><p>Enable basic HTTP authentication by performing the following tasks:</p> 
      <ul> 
       <li><p>Assign the AEM forms user name to the field <span class="code">OutputServiceClient.ClientCredentials.UserName.UserName</span>.</p></li> 
       <li><p>Assign the corresponding password value to the field <span class="code">OutputServiceClient.ClientCredentials.UserName.Password</span>.</p></li> 
       <li><p>Assign the constant value <span class="code">HttpClientCredentialType.Basic</span> to the field <span class="code">BasicHttpBindingSecurity.Transport.ClientCredentialType</span>. </p></li> 
      </ul></li> 
     <li><p>Assign the constant value <span class="code">BasicHttpSecurityMode.TransportCredentialOnly</span> to the field <span class="code">BasicHttpBindingSecurity.Security.Mode</span>. </p></li> 
    </ul> 
    <note> 
     <p>Repeat these steps for the <span class="code">DocumentManagementServiceClient</span><i> service client. </i></p> 
    </note></li> 
   <li><p>Retrieve the form design from Content Services (deprecated). </p><p>Retrieve content by invoking the <span class="code">DocumentManagementServiceClient</span> object’s <span class="code">retrieveContent</span> method and passing the following values:</p> 
    <ul> 
     <li><p>A string value that specifies the store where the content is added. The default store is <span class="code">SpacesStore</span>. This value is a mandatory parameter. </p></li> 
     <li><p>A string value that specifies the fully qualified path of the content to retrieve (for example, <span class="code">/Company Home/Form Designs/Loan.xdp</span>). This value is a mandatory parameter. </p></li> 
     <li><p>A string value that specifies the version. This value is an optional parameter, and you can pass an empty string. In this situation, the latest version is retrieved. </p></li> 
     <li><p>A string output parameter that stores the browse link value.</p></li> 
     <li><p>A <span class="code">BLOB</span> output parameter that stores the content. You can use this output parameter to retrieve the content.</p></li> 
     <li><p>A <span class="code">ServiceReference1.MyMapOf_xsd_string_To_xsd_anyType</span> output parameter that stores content attributes. </p></li> 
     <li><p>A <span class="code">CRCResult</span> output parameter. Instead of using this object, you can use the <span class="code">BLOB</span> output parameter to retrieve the content. </p></li> 
    </ul></li> 
   <li><p>Render the non-interactive PDF form. </p><p>Invoke the <span class="code">OutputServiceClient</span> object’s <span class="code">generatePDFOutput2</span> method and pass the following values:</p> 
    <ul> 
     <li><p>A <span class="code">TransformationFormat</span> enumeration value. To generate a PDF document, specify <span class="code">TransformationFormat.PDF</span>. </p></li> 
     <li><p>A string value that specifies the content root where the additional resources such as images are located.</p></li> 
     <li><p>A <span class="code">BLOB</span> object that represents the form design (use the <span class="code">BLOB</span> instance returned by Content Services (deprecated)).</p></li> 
     <li><p>A <span class="code">PDFOutputOptionsSpec</span> object that contains PDF run-time options.</p></li> 
     <li><p>A <span class="code">RenderOptionsSpec</span> object that contains rendering run-time options.</p></li> 
     <li><p>The <span class="code">BLOB</span> object that contains the XML data source that contains data to merge with the form design.</p></li> 
     <li><p>An output <span class="code">BLOB</span> object that is populated by the <span class="code">generatePDFOutput2</span> method. The <span class="code">generatePDFOutput2</span> method populates this object with generated metadata that describes the document. (This parameter value is required only for web service invocation).</p></li> 
     <li><p>An output <span class="code">OutputResult</span> object that contains the results of the operation. (This parameter value is required only for web service invocation).</p></li> 
    </ul><p>The <span class="code">generatePDFOutput2</span> method returns a <span class="code">BLOB</span> object that contains the non-interactive PDF form. </p></li> 
   <li><p>Perform an action with the form data stream. </p> 
    <ul> 
     <li><p>Create a <span class="code">System.IO.FileStream</span> object by invoking its constructor. Pass a string value that represents the file location of the interactive PDF document and the mode in which to open the file.</p></li> 
     <li><p>Create a byte array that stores the content of the <span class="code">BLOB</span> object retrieved from the <span class="code">generatePDFOutput2</span> method. Populate the byte array by getting the value of the <span class="code">BLOB</span> object’s <span class="code">MTOM</span> data member.</p></li> 
     <li><p>Create a <span class="code">System.IO.BinaryWriter</span> object by invoking its constructor and passing the <span class="code">System.IO.FileStream</span> object.</p></li> 
     <li><p>Write the contents of the byte array to a PDF file by invoking the <span class="code">System.IO.BinaryWriter</span> object’s <span class="code">Write</span> method and passing the byte array.</p></li> 
    </ul></li> 
  </ol> 
  <p><strong>See also</strong></p> 
  <p><a href="creating-document-output-streams#summary_of_steps">Summary of steps</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-web#invoking_aem_forms_using_mtom">Invoking AEM Forms using MTOM</a></p> 
  <p><a href="#unresolvedlink-lc-qs-output-ou.xml#ws624e3cba99b79e12e69a9941333732bac8-7d8a.2">Quick Start (MTOM): Passing documents to the Output Service using the web service API</a></p> 
  <h2 id="passing_documents_located_in_the_repository_to_the_output_service">Passing Documents located in the Repository to the Output Service</h2> 
  <p></p> 
  <p>The Output service renders a non-interactive PDF form that is based on a form design that is typically saved as an XDP file and created in Designer. You can pass a <span class="code">com.adobe.idp.Document</span> object that contains the form design to the Output service. The Output service then renders the form design located in the <span class="code">com.adobe.idp.Document</span> object.</p> 
  <p>An advantage of passing a <span class="code">com.adobe.idp.Document</span> object to the Output service is that other AEM Forms service operations return a <span class="code">com.adobe.idp.Document</span> instance. That is, you can get a <span class="code">com.adobe.idp.Document</span> instance from another service operation and render it. For example, assume that an XDP file is stored in the AEM Forms repository, as shown in the following illustration. </p> 
  <img alt="" src="assets/pd_pd_formrepository.png" /> 
  <p>The <i>FormsFolder</i> folder is a user-defined location in the AEM Forms repository (this location is an example and does not exist by default). In this example, a form design named Loan.xdp is located in this folder. In addition to the form design, other form collateral such as images can be stored in this location. The path to a resource located in the AEM Forms repository is: </p> 
  <p><span class="code">Applications/Application-name/Application-version/Folder.../Filename </span></p> 
  <p>You can programmatically retrieve Loan.xdp from the AEM Forms repository and pass it to the Output service within a <span class="code">com.adobe.idp.Document</span> object. </p> 
  <p>You can create a PDF based on an XDP file located in the repository using one of two ways. You can pass the XDP loction by reference or you can programmatically retrieve the XDP from the repository and pass it to the Output service within an XDP file. </p> 
  <p><a href="/programming-with-aem-forms/output-service-java-api-quick#quick_start_soap_mode_creating_a_pdf_document_based_on_an_application_xdp_file_using_the_java_api">Quick Start (EJB mode): Creating a PDF document based on an application XDP file using the Java API</a> (shows how to pass the location of the XDP file by reference).</p> 
  <p><a href="/programming-with-aem-forms/output-service-java-api-quick#quick_start_soap_mode_passing_a_document_located_in_the_repository_to_the_output_service_using_the_java_api">Quick Start (EJB mode): Passing a document located in the AEM Forms Repository to the Output service using the Java API</a> (shows how to programmatically retrieve the XDP file from the AEM Forms Repository and pass it to the Output service within a <span class="code">com.adobe.idp.Document</span> instance). (This section discusses how to perform this task)</p> 
  <note> 
   <p>For more information about the Forms service, see <a href="http://www.adobe.com/go/learn_aemforms_services_63">Services Reference for AEM Forms</a>.</p> 
  </note> 
  <h3 id="summary_of_steps">Summary of steps</h3> 
  <p></p> 
  <p>To pass a document obtained from the AEM Forms repository to the Output service, perform the following tasks:</p> 
  <ol> 
   <li><p>Include project files.</p></li> 
   <li><p>Create a Output and a Document Management Client API object. </p></li> 
   <li><p>Retrieve the form design from the AEM Forms repository.</p></li> 
   <li><p>Render the non-interactive PDF form.</p></li> 
   <li><p>Perform an action with the data stream.</p></li> 
  </ol> 
  <p><strong>Include project files</strong></p> 
  <p>Include the necessary files to your development project. If you are creating a client application by using Java, include the necessary JAR files. If you are using web services, include the proxy files.</p> 
  <p><strong>Create an Output and a Document Management Client API object</strong></p> 
  <p>Before you can programmatically perform a Output service API operation, create a Output Client API object. Also, because this workflow retrieves an XDP file from Content Services (deprecated), create a Document Management API object. </p> 
  <p><strong>Retrieve the form design from the AEM Forms Repository</strong></p> 
  <p>Retrieve the XDP file from the AEM Forms Repository by using the Repository API. (See <a href="/programming-with-aem-forms/aem-forms-repository#reading_resources">Reading Resources</a>.)</p> 
  <p>The XDP file is returned within a <span class="code">com.adobe.idp.Document</span> instance (or a <span class="code">BLOB</span> instance if you are using web services). You can then pass the <span class="code">com.adobe.idp.Document</span> instance o the Output service.</p> 
  <p><strong>Render the non-interactive PDF form</strong></p> 
  <p>To render a non-interactive form, pass the <span class="code">com.adobe.idp.Document</span> instance that was returned using the AEM Forms Repository API. </p> 
  <note> 
   <p>Two new methods named <span class="code">generatePDFOutput2 </span>and <span class="code">generatePrintedOutput2 </span>accept a <span class="code">com.adobe.idp.Document </span>object that contains a form design. You can also pass a <span class="code">com.adobe.idp.Document</span> that contains the form design to the Output service when sending a print stream to a network printer. </p> 
  </note> 
  <p><strong>Perform an action with the form data stream</strong></p> 
  <p>You can save the non-interactive form as a PDF file. The form can be viewed in Adobe Reader or Acrobat. </p> 
  <p><strong>See also</strong></p> 
  <p><a href="creating-document-output-streams#pass_documents_located_in_the_repository_to_the_output_service_using_the_java_api">Pass documents located in the Repository to the Output Service using the Java API</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#including_aem_forms_java_library_files">Including AEM Forms Java library files</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#setting_connection_properties">Setting connection properties</a></p> 
  <p><a href="/programming-with-aem-forms/output-service-java-api-quick#output_service_java_api_quick_start_soap">Output Service API Quick Starts</a></p> 
  <p><a href="#unresolvedlink-lc-cs-api-retrieve-content-rc.xml#ws624e3cba99b79e12e69a9941333732bac8-7ffc.2">Retrieving Content from Content Services (deprecated)</a></p> 
  <p>ResourceRepositoryClient</p> 
  <h3 id="pass_documents_located_in_the_repository_to_the_output_service_using_the_java_api">Pass documents located in the Repository to the Output Service using the Java API</h3> 
  <p></p> 
  <p>Pass a document retrieved from the Repository by using the Output service and Repository API (Java):</p> 
  <ol> 
   <li><p>Include project files. </p><p>Include client JAR files, such as adobe-output-client.jar and adobe-repository-client.jar, in your Java project’s class path. </p></li> 
   <li><p>Create an Output and a Document Management Client API object. </p> 
    <ul> 
     <li><p>Create a <span class="code">ServiceClientFactory</span> object that contains connection properties. (See <a href="/programming-with-aem-forms/invoking-aem-forms-using-java#setting_connection_properties">Setting connection properties</a>.)</p></li> 
     <li><p>Create an <span class="code">OutputClient</span> object by using its constructor and passing the <span class="code">ServiceClientFactory</span> object.</p></li> 
     <li><p>Create a <span class="code">DocumentManagementServiceClientImpl</span> object by using its constructor and passing the <span class="code">ServiceClientFactory</span> object.</p></li> 
    </ul></li> 
   <li><p>Retrieve the form design from the AEM Forms Repository.</p><p>Invoke the <span class="code">ResourceRepositoryClient</span> object’s <span class="code">readResourceContent</span> method and pass a string value that specifies the URI location to the XDP file. For example, <span class="code">/Applications/FormsApplication/1.0/FormsFolder/Loan.xdp</span>. This value is a mandatory. This method returns a <span class="code">com.adobe.idp.Document</span> instance that represents the XDP file. </p></li> 
   <li><p>Render the non-interactive PDF form. </p><p>Invoke the <span class="code">OutputClient</span> object’s <span class="code">generatePDFOutput2</span> method and pass the following values:</p> 
    <ul> 
     <li><p>A <span class="code">TransformationFormat</span> enumeration value. To generate a PDF document, specify <span class="code">TransformationFormat.PDF</span>. </p></li> 
     <li><p>A string value that specifies the content root where the additional resources such as images are located. For example, <span class="code">repository:///Applications/FormsApplication/1.0/FormsFolder/</span>.</p></li> 
     <li><p>A <span class="code">com.adobe.idp.Document</span> object that represents the form design (use the instance returned by the <span class="code">ResourceRepositoryClient</span> object’s <span class="code">readResourceContent</span> method).</p></li> 
     <li><p>A <span class="code">PDFOutputOptionsSpec</span> object that contains PDF run-time options.</p></li> 
     <li><p>A <span class="code">RenderOptionsSpec</span> object that contains rendering run-time options.</p></li> 
     <li><p>The <span class="code">com.adobe.idp.Document</span> object that contains the XML data source that contains data to merge with the form design.</p></li> 
    </ul><p>The <span class="code">generatePDFOutput2</span> method returns an <span class="code">OutputResult</span> object that contains the results of the operation.</p></li> 
   <li><p>Perform an action with the form data stream. </p> 
    <ul> 
     <li><p>Retrieve a <span class="code">com.adobe.idp.Document</span> object that represents the non-interactive form by invoking the <span class="code">OutputResult</span> object’s <span class="code">getGeneratedDoc</span> method. </p></li> 
     <li><p>Create a <span class="code">java.io.File</span> object that contains the results of the operation. Ensure that the file name extension is .pdf. </p></li> 
     <li><p>Invoke the <span class="code">com.adobe.idp.Document</span> object’s <span class="code">copyToFile</span> method to copy the contents of the <span class="code">com.adobe.idp.Document</span> object to the file (ensure that you use the <span class="code">com.adobe.idp.Document</span> object that was returned by the <span class="code">getGeneratedDoc</span> method).</p></li> 
    </ul></li> 
  </ol> 
  <p><strong>See also</strong></p> 
  <p><a href="creating-document-output-streams#summary_of_steps">Summary of steps</a></p> 
  <p><a href="/programming-with-aem-forms/output-service-java-api-quick#quick_start_soap_mode_passing_a_document_located_in_the_repository_to_the_output_service_using_the_java_api">Quick Start (EJB mode): Passing a document located in the AEM Forms Repository to the Output service using the Java API</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#including_aem_forms_java_library_files">Including AEM Forms Java library files</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#setting_connection_properties">Setting connection properties</a></p> 
  <h2 id="creating_pdf_documents_using_fragments">Creating PDF Documents Using Fragments</h2> 
  <p></p> 
  <p>You can use the Output and Assembler services to create an output stream, such as a PDF document, that is based on fragments. The Assembler service assembles an XDP document that is based on fragments located in multiple XDP files. The assembled XDP document is passed to the Output service, which creates a PDF document. Although this workflow shows a PDF document being generated, the Output service can generate other output types, such as ZPL, for this workflow. A PDF document is used for discussion purposes only. </p> 
  <p>The following illustration shows this workflow.</p> 
  <img alt="" src="assets/cp_cp_outputassemblefragments.png" /> 
  <p>Before reading <i>Creating PDF Documents using Fragments</i>, it is recommended that you become familiar with using the Assembler service to assemble multiple XDP documents. (See <a href="/programming-with-aem-forms/assembling-pdf-documents#assembling_multiple_xdp_fragments">Assembling Multiple XDP Fragments</a>.)</p> 
  <note> 
   <p>You can also pass a form design assembled by the Assembler service to the Forms service instead of the Output service. The primary difference between the Output service and Forms service is that the Forms service generates interactive PDF documents and the Output service produces non-interactive PDF documents. Also the Forms service cannot generate printer-based output streams like ZPL.</p> 
  </note> 
  <note> 
   <p>For more information about the Output service, see <a href="http://www.adobe.com/go/learn_aemforms_services_63">Services Reference for AEM Forms</a>. </p> 
  </note> 
  <h3 id="summary_of_steps">Summary of steps</h3> 
  <p></p> 
  <p>To create a PDF document based on fragments, perform the following steps:</p> 
  <ol> 
   <li><p>Include project files.</p></li> 
   <li><p>Create an Output and Assembler Client object. </p></li> 
   <li><p>Use the Assembler service to generate the form design.</p></li> 
   <li><p>Use the Output service to generate the PDF document.</p></li> 
   <li><p>Save the PDF document as a PDF file.</p></li> 
  </ol> 
  <p><strong>Include project files</strong></p> 
  <p>Include necessary files in your development project. If you are creating a client application by using Java, include the necessary JAR files. If you are using web services, make sure that you include the proxy files.</p> 
  <p><strong>Create an Output and Assembler Client object</strong></p> 
  <p>Before you can programmatically perform an Output service API operation, create an Output Client API object. Also, because this workflow invokes the Assembler service to create the form design, create an Assembler Client API object. </p> 
  <p><strong>Use the Assembler service to generate the form design</strong></p> 
  <p>Use the Assembler service to generate the form design using fragments. The Assembler service returns a <span class="code">com.adobe.idp.Document</span> instance that contains the form design. </p> 
  <p><strong>Use the Output service to generate the PDF document</strong></p> 
  <p>You can use the Output service to generate a PDF document using the form design that the Assembler service created. Pass the <span class="code">com.adobe.idp.Document</span> instance that the Assembler service returned to the Output service. </p> 
  <p><strong>Save the PDF document as a PDF file</strong></p> 
  <p>After the Output service generates a PDF document, you can save it as a PDF file. </p> 
  <p><strong>See also</strong></p> 
  <p><a href="creating-document-output-streams#create_a_pdf_document_based_on_fragments_using_the_java_api">Create a PDF document based on fragments using the Java API</a></p> 
  <p><a href="creating-document-output-streams#create_a_pdf_document_based_on_fragments_using_the_web_service_api">Create a PDF document based on fragments using the web service API</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#including_aem_forms_java_library_files">Including AEM Forms Java library files</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#setting_connection_properties">Setting connection properties</a></p> 
  <p><a href="/programming-with-aem-forms/output-service-java-api-quick#output_service_java_api_quick_start_soap">Output Service API Quick Starts</a></p> 
  <p><a href="/programming-with-aem-forms/assembling-pdf-documents#assembling_multiple_xdp_fragments">Assembling Multiple XDP Fragments</a></p> 
  <p><a href="creating-document-output-streams#creating_pdf_documents">Creating PDF Documents</a></p> 
  <h3 id="create_a_pdf_document_based_on_fragments_using_the_java_api">Create a PDF document based on fragments using the Java API</h3> 
  <p></p> 
  <p>Create a PDF document based on fragments by using the Output Service API and Assembler Service API (Java):</p> 
  <ol> 
   <li><p>Include project files.</p><p>Include client JAR files, such as adobe-output-client.jar, in your Java project’s class path. </p></li> 
   <li><p>Create an Output and Assembler Client object.</p> 
    <ul> 
     <li><p>Create a <span class="code">ServiceClientFactory</span> object that contains connection properties.</p></li> 
     <li><p>Create an <span class="code">OutputClient</span> object by using its constructor and passing the <span class="code">ServiceClientFactory</span> object.</p></li> 
     <li><p>Create an <span class="code">AssemblerServiceClient</span> object by using its constructor and passing the <span class="code">ServiceClientFactory</span> object.</p></li> 
    </ul></li> 
   <li><p>Use the Assembler service to generate the form design.</p><p>Invoke the <span class="code">AssemblerServiceClient</span> object’s <span class="code">invokeDDX</span> method and pass the following required values:</p> 
    <ul> 
     <li><p>A <span class="code">com.adobe.idp.Document</span> object that represents the DDX document to use.</p></li> 
     <li><p>A <span class="code">java.util.Map</span> object that contains the input XDP files. </p></li> 
     <li><p>A <span class="code">com.adobe.livecycle.assembler.client.AssemblerOptionSpec</span> object that specifies the run-time options, including the default font and the job log level.</p></li> 
    </ul><p>The <span class="code">invokeDDX</span> method returns a <span class="code">com.adobe.livecycle.assembler.client.AssemblerResult</span> object that contains the assembled XDP document. To retrieve the assembled XDP document, perform the following actions:</p> 
    <ul> 
     <li><p>Invoke the <span class="code">AssemblerResult</span> object’s <span class="code">getDocuments</span> method. This method returns a <span class="code">java.util.Map</span> object.</p></li> 
     <li><p>Iterate through the <span class="code">java.util.Map</span> object until you find the resultant <span class="code">com.adobe.idp.Document</span> object.</p></li> 
     <li><p>Invoke the <span class="code">com.adobe.idp.Document</span> object’s <span class="code">copyToFile</span> method to extract the assembled XDP document.</p></li> 
    </ul></li> 
   <li><p>Use the Output service to generate the PDF document.</p><p>Invoke the <span class="code">OutputClient</span> object’s <span class="code">generatePDFOutput2</span> method and pass the following values:</p> 
    <ul> 
     <li><p>A <span class="code">TransformationFormat</span> enumeration value. To generate a PDF document, specify <span class="code">TransformationFormat.PDF</span></p></li> 
     <li><p>A string value that specifies the content root where the additional resources, such as images, are located</p></li> 
     <li><p>A <span class="code">com.adobe.idp.Document</span> object that represents the form design (use the instance returned by the Assembler service)</p></li> 
     <li><p>A <span class="code">PDFOutputOptionsSpec</span> object that contains PDF run-time options</p></li> 
     <li><p>A <span class="code">RenderOptionsSpec</span> object that contains rendering run-time options</p></li> 
     <li><p>The <span class="code">com.adobe.idp.Document</span> object that contains the XML data source that contains data to merge with the form design</p></li> 
    </ul><p>The <span class="code">generatePDFOutput2</span> method returns an <span class="code">OutputResult</span> object that contains the results of the operation</p></li> 
   <li><p>Save the PDF document as a PDF file. </p> 
    <ul> 
     <li><p>Retrieve a <span class="code">com.adobe.idp.Document</span> object that represents the PDF document by invoking the <span class="code">OutputResult</span> object’s <span class="code">getGeneratedDoc</span> method. </p></li> 
     <li><p>Create a <span class="code">java.io.File</span> object that contains the results of the operation. Ensure that the filename extension is .pdf. </p></li> 
     <li><p>Invoke the <span class="code">com.adobe.idp.Document</span> object’s <span class="code">copyToFile</span> method to copy the contents of the <span class="code">com.adobe.idp.Document</span> object to the file. (Ensure that you use the <span class="code">com.adobe.idp.Document</span> object that the <span class="code">getGeneratedDoc</span> method returned.).</p></li> 
    </ul></li> 
  </ol> 
  <p><strong>See also</strong></p> 
  <p><a href="creating-document-output-streams#summary_of_steps">Summary of steps</a></p> 
  <p><a href="/programming-with-aem-forms/output-service-java-api-quick#quick_start_soap_mode_creating_a_pdf_document_based_on_fragments_using_the_java_api">Quick Start (EJB mode): Creating a PDF document based on fragments using the Java API</a></p> 
  <p><a href="#unresolvedlink-lc-qs-output-ou.xml#ws624e3cba99b79e12e69a9941333732bac8-7d84.2">Quick Start (SOAP mode): Creating a PDF document based on fragments using the Java API</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#including_aem_forms_java_library_files">Including AEM Forms Java library files</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#setting_connection_properties">Setting connection properties</a>.</p> 
  <h3 id="create_a_pdf_document_based_on_fragments_using_the_web_service_api">Create a PDF document based on fragments using the web service API</h3> 
  <p></p> 
  <p>Create a PDF document based on fragments by using the Output Service API and Assembler Service API (web service):</p> 
  <ol> 
   <li><p>Include project files.</p><p>Create a Microsoft .NET project that uses MTOM. Use the following WSDL definition for the service reference associated with the Output service:</p> 
    <codeblock gutter="true" class="syntax as3">
       http://localhost:8080/soap/services/OutputService?WSDL&amp;lc_version=9.0.1. 
    </codeblock><p>Use the following WSDL definition for the service reference associated with the Assembler service:</p> 
    <codeblock gutter="true" class="syntax as3">
       http://localhost:8080/soap/services/AssemblerService?WSDL&amp;lc_version=9.0.1. 
    </codeblock><p>Because the <span class="code">BLOB</span> data type is common to both service references, fully qualify the <span class="code">BLOB</span> data type when using it. In the corresponding web service quick start, all <span class="code">BLOB</span> instances are fully qualified. </p> 
    <note> 
     <p>Replace <span class="code">localhost</span><i> with the IP address of the server hosting AEM Forms. </i></p> 
    </note></li> 
   <li><p>Create an Output and Assembler Client object.</p> 
    <ul> 
     <li><p>Create an <span class="code">OutputServiceClient</span> object by using its default constructor. </p></li> 
     <li><p>Create an <span class="code">OutputServiceClient.Endpoint.Address</span> object by using the <span class="code">System.ServiceModel.EndpointAddress</span> constructor. Pass a string value that specifies the WSDL to the AEM Forms service (for example, <span class="code">http://localhost:8080/soap/services/OutputService?blob=mtom</span>.) You do not need to use the <span class="code">lc_version</span> attribute. This attribute is used when you create a service reference. However, specify <span class="code">?blob=mtom</span> to use MTOM.</p></li> 
     <li><p>Create a <span class="code">System.ServiceModel.BasicHttpBinding</span> object by getting the value of the <span class="code">OutputServiceClient.Endpoint.Binding</span> field. Cast the return value to <span class="code">BasicHttpBinding</span>. </p></li> 
     <li><p>Set the <span class="code">System.ServiceModel.BasicHttpBinding</span> object’s <span class="code">MessageEncoding</span> field to <span class="code">WSMessageEncoding.Mtom</span>. This value ensures that MTOM is used. </p></li> 
     <li><p>Enable basic HTTP authentication by performing the following tasks:</p> 
      <ul> 
       <li><p>Assign the AEM forms user name to the <span class="code">OutputServiceClient.ClientCredentials.UserName.UserName </span>field.</p></li> 
       <li><p>Assign the corresponding password value to the <span class="code">OutputServiceClient.ClientCredentials.UserName.Password </span>field.</p></li> 
       <li><p>Assign the constant value <span class="code">HttpClientCredentialType.Basic</span> to the <span class="code">BasicHttpBindingSecurity.Transport.ClientCredentialType </span>field. </p></li> 
      </ul></li> 
     <li><p>Assign the <span class="code">BasicHttpSecurityMode.TransportCredentialOnly</span> constant value to the <span class="code">BasicHttpBindingSecurity.Security.Mode </span>field. </p></li> 
    </ul> 
    <note> 
     <p>Repeat these steps for the <span class="code">AssemblerServiceClient</span><i> object. </i></p> 
    </note></li> 
   <li><p>Use the Assembler service to generate the form design.</p><p>Invoke the <span class="code">AssemblerServiceClient</span> object’s <span class="code">invokeDDX</span> method and pass the following values:</p> 
    <ul> 
     <li><p>A <span class="code">BLOB</span> object that represents the DDX document</p></li> 
     <li><p>The <span class="code">MyMapOf_xsd_string_To_xsd_anyType</span> object that contains the required files</p></li> 
     <li><p>An <span class="code">AssemblerOptionSpec</span> object that specifies run-time options</p></li> 
    </ul><p>The <span class="code">invokeDDX</span> method returns an <span class="code">AssemblerResult</span> object that contains the results of the job and any exceptions that occurred. To obtain the newly created XDP document, perform the following actions:</p> 
    <ul> 
     <li><p>Access the <span class="code">AssemblerResult</span> object’s <span class="code">documents</span> field, which is a <span class="code">Map</span> object that contains the resultant PDF documents.</p></li> 
     <li><p>Iterate through the <span class="code">Map</span> object to retrieve the assembled form design. Cast that array member’s <span class="code">value</span> to a <span class="code">BLOB</span>. Pass this <span class="code">BLOB</span> instance to the Output service. </p></li> 
    </ul></li> 
   <li><p>Use the Output service to generate the PDF document.</p><p>Invoke the <span class="code">OutputServiceClient</span> object’s <span class="code">generatePDFOutput2</span> method and pass the following values:</p> 
    <ul> 
     <li><p>A <span class="code">TransformationFormat</span> enumeration value. To generate a PDF document, specify <span class="code">TransformationFormat.PDF</span>. </p></li> 
     <li><p>A string value that specifies the content root where the additional resources, such as images, are located.</p></li> 
     <li><p>A <span class="code">BLOB</span> object that represents the form design (use the <span class="code">BLOB</span> instance returned by the Assembler service).</p></li> 
     <li><p>A <span class="code">PDFOutputOptionsSpec</span> object that contains PDF run-time options.</p></li> 
     <li><p>A <span class="code">RenderOptionsSpec</span> object that contains rendering run-time options.</p></li> 
     <li><p>The <span class="code">BLOB</span> object that contains the XML data source that contains data to merge with the form design.</p></li> 
     <li><p>An output <span class="code">BLOB</span> object that the <span class="code">generatePDFOutput2</span> method populates. The <span class="code">generatePDFOutput2</span> method populates this object with generated metadata that describes the document. (This parameter value is required only for web service invocation).</p></li> 
     <li><p>An output <span class="code">OutputResult</span> object that contains the results of the operation. (This parameter value is required only for web service invocation).</p></li> 
    </ul><p>The <span class="code">generatePDFOutput2</span> method returns a <span class="code">BLOB</span> object that contains the non-interactive PDF form. </p></li> 
   <li><p>Save the PDF document as a PDF file.</p> 
    <ul> 
     <li><p>Create a <span class="code">System.IO.FileStream</span> object by invoking its constructor. Pass a string value that represents the file location of the interactive PDF document and the mode in which to open the file.</p></li> 
     <li><p>Create a byte array that stores the content of the <span class="code">BLOB</span> object retrieved from the <span class="code">generatePDFOutput2</span> method. Populate the byte array by getting the value of the <span class="code">BLOB</span> object’s <span class="code">MTOM</span> data member.</p></li> 
     <li><p>Create a <span class="code">System.IO.BinaryWriter</span> object by invoking its constructor and passing the <span class="code">System.IO.FileStream</span> object.</p></li> 
     <li><p>Write the contents of the byte array to a PDF file by invoking the <span class="code">System.IO.BinaryWriter</span> object’s <span class="code">Write</span> method and passing the byte array.</p></li> 
    </ul></li> 
  </ol> 
  <p><strong>See also</strong></p> 
  <p><a href="creating-document-output-streams#summary_of_steps">Summary of steps</a></p> 
  <p><a href="#unresolvedlink-lc-qs-output-ou.xml#ws624e3cba99b79e12e69a9941333732bac8-7d83.2">Quick Start (MTOM): Creating a PDF document based on fragments using the web service API</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-web#invoking_aem_forms_using_mtom">Invoking AEM Forms using MTOM</a></p> 
  <h2 id="printing_to_files">Printing to Files</h2> 
  <p></p> 
  <p>You can use the Output service to print streams such as PostScript, Printer Control Language (PCL), or the following label formats to a file:</p> 
  <ul> 
   <li><p>Zebra - ZPL</p></li> 
   <li><p>Intermec - IPL</p></li> 
   <li><p>Datamax - DPL</p></li> 
   <li><p>TecToshiba - TPCL</p></li> 
  </ul> 
  <p>Using the Output service, you can merge XML data with a form design and print the form to a file. The following illustration shows the Output service creating laser and label files.</p> 
  <note> 
   <p>For information about sending print streams to printers, see <a href="creating-document-output-streams#sending_print_streams_to_printers">Sending Print Streams to Printers</a>. </p> 
  </note> 
  <note> 
   <p>For more information about the Output service, see <a href="http://www.adobe.com/go/learn_aemforms_services_63">Services Reference for AEM Forms</a>.</p> 
  </note> 
  <h3 id="summary_of_steps">Summary of steps</h3> 
  <p></p> 
  <p>To print to a file, perform the following steps:</p> 
  <ol> 
   <li><p>Include project files.</p></li> 
   <li><p>Create an Output Client object. </p></li> 
   <li><p>Reference an XML data source.</p></li> 
   <li><p>Set print run-time options required to print to a file.</p></li> 
   <li><p>Print the print stream to a file.</p></li> 
   <li><p>Retrieve the results of the operation.</p></li> 
  </ol> 
  <p><strong>Include project files</strong></p> 
  <p>Include necessary files in your development project. If you are creating a client application by using Java, include the necessary JAR files. If you are using web services, make sure that you include the proxy files.</p> 
  <p>The following JAR files must be added to your project’s class path:</p> 
  <ul> 
   <li><p>adobe-livecycle-client.jar</p></li> 
   <li><p>adobe-usermanager-client.jar</p></li> 
   <li><p>adobe-output-client.jar</p></li> 
   <li><p>adobe-utilities.jar (required if AEM Forms is deployed on JBoss)</p></li> 
   <li><p>jbossall-client.jar (required if AEM Forms is deployed on JBoss)</p></li> 
  </ul> 
  <p>if AEM Forms is deployed on a supported J2EE application server that is not JBoss, you will need to replace the adobe-utilities.jar and jbossall-client.jar files with JAR files that are specific to the J2EE application server on which AEM Forms is deployed. (See <a href="/programming-with-aem-forms/invoking-aem-forms-using-java#including_aem_forms_java_library_files">Including AEM Forms Java library files</a>.)</p> 
  <p><strong>Create an Output Client object</strong></p> 
  <p>Before you can programmatically perform an Output service operation, you must create an Output service client object. If you are using the Java API, create an <span class="code">OutputClient</span> object. If you are using the Output web service API, create an <span class="code">OutputServiceService</span> object.</p> 
  <p><strong>Reference an XML data source</strong></p> 
  <p>To print a document that contains data, you must reference an XML data source that contains XML elements for every form field that you want to populate with data. The XML element name must match the field name. An XML element is ignored if it does not correspond to a form field or if the XML element name does not match the field name. It is not necessary to match the order in which the XML elements are displayed if all XML elements are specified.</p> 
  <p><strong>Set print run-time options required to print to a file</strong></p> 
  <p>To print to a file, you must set the File URI run-time option by specifying the location and the name of the file to which the Output service prints. For example, to instruct the Output service to print a PostScript file named <i>MortgageForm.ps</i> to C:\Adobe, specify C:\Adobe\MortgageForm.ps. </p> 
  <note> 
   <p>There are optional run-time options that you can define. For information about all the options that you can set, see the <span class="code">PrintedOutputOptionsSpec</span> class reference in <a href="http://www.adobe.com/go/learn_aemforms_javadocs_63_en">AEM Forms API Reference</a>.</p> 
  </note> 
  <p><strong>Print the print stream to a file</strong></p> 
  <p>After you reference a valid XML data source that contains form data and you set print run-time options, you can invoke the Output service, which causes it to print a file.</p> 
  <p><strong>Retrieve the results of the operation</strong></p> 
  <p>After the Output service performs an operation, it returns various data items, such as XML data, that specifies whether the operation was successful. </p> 
  <p><strong>See also</strong></p> 
  <p><a href="creating-document-output-streams#print_to_files_using_the_java_api">Print to files using the Java API</a></p> 
  <p><a href="creating-document-output-streams#print_to_files_using_the_web_service_api">Print to files using the web service API</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#including_aem_forms_java_library_files">Including AEM Forms Java library files</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#setting_connection_properties">Setting connection properties</a></p> 
  <p><a href="/programming-with-aem-forms/output-service-java-api-quick#output_service_java_api_quick_start_soap">Output Service API Quick Starts</a></p> 
  <h3 id="print_to_files_using_the_java_api">Print to files using the Java API</h3> 
  <p></p> 
  <p>Print to a file using the Output API (Java):</p> 
  <ol> 
   <li><p>Include project files.</p><p>Include client JAR files, such as the adobe-output-client.jar, in your Java project’s class path. </p></li> 
   <li><p>Create an Output Client object.</p> 
    <ul> 
     <li><p>Create a <span class="code">ServiceClientFactory</span> object that contains connection properties. </p></li> 
     <li><p>Create an <span class="code">OutputClient</span> object by using its constructor and passing the <span class="code">ServiceClientFactory</span> object. </p></li> 
    </ul></li> 
   <li><p>Reference an XML data source. </p> 
    <ul> 
     <li><p>Create a <span class="code">java.io.FileInputStream</span> object that represents the XML data source that is used to populate the document by using its constructor and passing a string value that specifies the location of the XML file.</p></li> 
     <li><p>Create a <span class="code">com.adobe.idp.Document</span> object by using its constructor and passing the <span class="code">java.io.FileInputStream</span> object.</p></li> 
    </ul></li> 
   <li><p>Set print run-time options required to print to a file. </p> 
    <ul> 
     <li><p>Create a <span class="code">PrintedOutputOptionsSpec</span> object by using its constructor.</p></li> 
     <li><p>Specify the file by invoking the PrintedOutputOptionsSpec object’s <span class="code">setFileURI</span> method and passing a string value that represents the name and location of the file. For example, if you want the Output service to print to a PostScript file named<i> MortgageForm.ps</i> located in C:\Adobe, specify C:\\Adobe\MortgageForm.ps.</p></li> 
     <li><p>Specify the number of copies to print by invoking the <span class="code">PrintedOutputOptionsSpec</span> object’s <span class="code">setCopies</span> method and passing an integer value that represents the number of copies.</p></li> 
    </ul></li> 
   <li><p>Print the print stream to a file. </p><p>Print to a file by invoking the <span class="code">OutputClient</span> object’s <span class="code">generatePrintedOutput</span> method and passing the following values:</p> 
    <ul> 
     <li><p>A <span class="code">PrintFormat</span> enumeration value that specifies the print stream format to create. For example, to create a PostScript print stream, pass <span class="code">PrintFormat.PostScript</span>.</p></li> 
     <li><p>A string value that specifies the name of the form design. </p></li> 
     <li><p>A string value that specifies the location of related collateral files such as image files.</p></li> 
     <li><p>A string value that specifies the location of the XDC file to use (you can pass <span class="code">null</span> if you specified the XDC file to use by using the <span class="code">PrintedOutputOptionsSpec</span> object). </p></li> 
     <li><p>The <span class="code">PrintedOutputOptionsSpec</span> object that contains run-time options required to print to a file.</p></li> 
     <li><p>The <span class="code">com.adobe.idp.Document</span> object that contain the XML data source that contains form data.</p></li> 
    </ul><p>The <span class="code">generatePrintedOutput</span> method returns an <span class="code">OutputResult</span> object that contains the results of the operation. </p> 
    <note> 
     <p>The <span class="code">OutputResult</span> object’s <span class="code">getRecordLevelMetaDataList</span> method returns <span class="code">null</span><i>. </i></p> 
    </note></li> 
   <li><p>Retrieve the results of the operation. </p> 
    <ul> 
     <li><p>Create a <span class="code">com.adobe.idp.Document</span> object that represents the status of the <span class="code">generatePrintedOutput</span> method by invoking the <span class="code">OutputResult</span> object’s <span class="code">getStatusDoc</span> method (the <span class="code">OutputResult</span> object was returned by the <span class="code">generatePrintedOutput</span> method).</p></li> 
     <li><p>Create a <span class="code">java.io.File</span> object that will contain the results of the operation. Ensure that the file extension is XML. </p></li> 
     <li><p>Invoke the <span class="code">com.adobe.idp.Document</span> object’s <span class="code">copyToFile</span> method to copy the contents of the <span class="code">com.adobe.idp.Document</span> object to the file (ensure that you use the <span class="code">com.adobe.idp.Document</span> object that was returned by the <span class="code">getStatusDoc</span> method).</p></li> 
    </ul></li> 
  </ol> 
  <p><strong>See also</strong></p> 
  <p><a href="creating-document-output-streams#summary_of_steps">Summary of steps</a></p> 
  <p><a href="#unresolvedlink-lc-qs-output-ou.xml#ws624e3cba99b79e12e69a9941333732bac8-7d80.2">Quick Start (SOAP mode): Printing to a file using the Java API</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#including_aem_forms_java_library_files">Including AEM Forms Java library files</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#setting_connection_properties">Setting connection properties</a>.</p> 
  <h3 id="print_to_files_using_the_web_service_api">Print to files using the web service API</h3> 
  <p></p> 
  <p>Print to a file using the Output API (web service):</p> 
  <ol> 
   <li><p>Include project files. </p><p>Create a Microsoft .NET project that uses MTOM. Ensure that you use the following WSDL definition: <span class="code">http://localhost:8080/soap/services/OutputService?WSDL&amp;lc_version=9.0.1</span>. </p> 
    <note> 
     <p>Replace <span class="code">localhost</span><i> with the IP address of the server hosting AEM Forms. </i></p> 
    </note></li> 
   <li><p>Create an Output Client object. </p> 
    <ul> 
     <li><p>Create an <span class="code">OutputServiceClient</span> object by using its default constructor. </p></li> 
     <li><p>Create an <span class="code">OutputServiceClient.Endpoint.Address</span> object by using the <span class="code">System.ServiceModel.EndpointAddress</span> constructor. Pass a string value that specifies the WSDL to the AEM Forms service (for example, <span class="code">http://localhost:8080/soap/services/OutputService?blob=mtom</span>.) You do not need to use the <span class="code">lc_version</span> attribute. This attribute is used when you create a service reference. However, specify <span class="code">?blob=mtom</span> to use MTOM.</p></li> 
     <li><p>Create a <span class="code">System.ServiceModel.BasicHttpBinding</span> object by getting the value of the <span class="code">OutputServiceClient.Endpoint.Binding</span> field. Cast the return value to <span class="code">BasicHttpBinding</span>. </p></li> 
     <li><p>Set the <span class="code">System.ServiceModel.BasicHttpBinding</span> object’s <span class="code">MessageEncoding</span> field to <span class="code">WSMessageEncoding.Mtom</span>. This value ensures that MTOM is used. </p></li> 
     <li><p>Enable basic HTTP authentication by performing the following tasks:</p> 
      <ul> 
       <li><p>Assign the AEM forms user name to the field <span class="code">OutputServiceClient.ClientCredentials.UserName.UserName</span>.</p></li> 
       <li><p>Assign the corresponding password value to the field <span class="code">OutputServiceClient.ClientCredentials.UserName.Password</span>.</p></li> 
       <li><p>Assign the constant value <span class="code">HttpClientCredentialType.Basic</span> to the field <span class="code">BasicHttpBindingSecurity.Transport.ClientCredentialType</span>. </p></li> 
       <li><p>Assign the constant value <span class="code">BasicHttpSecurityMode.TransportCredentialOnly</span> to the field <span class="code">BasicHttpBindingSecurity.Security.Mode</span>. </p></li> 
      </ul></li> 
    </ul></li> 
   <li><p>Reference an XML data source. </p> 
    <ul> 
     <li><p>Create a <span class="code">BLOB</span> object by using its constructor. The <span class="code">BLOB</span> object is used to store form data.</p></li> 
     <li><p>Create a <span class="code">System.IO.FileStream</span> object by invoking its constructor and passing a string value that specifies the location of the XML file that contains form data.</p></li> 
     <li><p>Create a byte array that stores the content of the <span class="code">System.IO.FileStream</span> object. You can determine the size of the byte array by getting the <span class="code">System.IO.FileStream</span> object’s <span class="code">Length</span> property. </p></li> 
     <li><p>Populate the byte array with stream data by invoking the <span class="code">System.IO.FileStream</span> object’s <span class="code">Read</span> method and passing the byte array, the starting position, and the stream length to read.</p></li> 
     <li><p>Populate the <span class="code">BLOB</span> object by assigning its <span class="code">binaryData</span> property with the contents of the byte array.</p></li> 
    </ul></li> 
   <li><p>Set print run-time options required to print to a file. </p> 
    <ul> 
     <li><p>Create a <span class="code">PrintedOutputOptionsSpec</span> object by using its constructor. </p></li> 
     <li><p>Specify the file by assigning a string value that represents the location and name of the file to the <span class="code">PrintedOutputOptionsSpec</span> object’s<span class="code"> fileURI</span> data member. For example, if you want the Output service to print to a PostScript file named <i>MortgageForm.ps</i> located in C:\Adobe, specify C:\\Adobe\MortgageForm.ps.</p></li> 
     <li><p>Specify the number of copies to print by assigning an integer value that represents the number of copies to the <span class="code">PrintedOutputOptionsSpec</span> object’s <span class="code">copies</span> data members.</p></li> 
    </ul></li> 
   <li><p>Print the print stream to a file. </p><p>Print to a file by invoking the <span class="code">OutputServiceService</span> object’s <span class="code">generatePrintedOutput</span> method and passing the following values:</p> 
    <ul> 
     <li><p>A <span class="code">PrintFormat</span> enumeration value that specifies the print stream format to create. For example, to create a PostScript print stream, pass <span class="code">PrintFormat.PostScript</span>.</p></li> 
     <li><p>A string value that specifies the name of the form design. </p></li> 
     <li><p>A string value that specifies the location of related collateral files such as image files.</p></li> 
     <li><p>A string value that specifies the location of the XDC file to use (you can pass <span class="code">null</span> if you specified the XDC file to use by using the <span class="code">PrintedOutputOptionsSpec</span> object). </p></li> 
     <li><p>The <span class="code">PrintedOutputOptionsSpec</span> object that contains print run-time options required to print to a file. </p></li> 
     <li><p>The <span class="code">BLOB</span> object that contains the XML data source that contains form data.</p></li> 
     <li><p>A <span class="code">BLOB</span> object that is populated by the <span class="code">generatePDFOutput</span> method. The <span class="code">generatePDFOutput</span> method populates this object with generated metadata that describes the document. (This parameter value is required for web service invocation only.)</p></li> 
     <li><p>A <span class="code">BLOB</span> object that is populated by the <span class="code">generatePDFOutput</span> method. The <span class="code">generatePDFOutput</span> method populates this object with result data. (This parameter value is required for web service invocation only.)</p></li> 
     <li><p>An <span class="code">OutputResult</span> object that contains the results of the operation. (This parameter value is required for web service invocation only.)</p></li> 
    </ul></li> 
   <li><p>Retrieve the results of the operation. </p> 
    <ul> 
     <li><p>Create a <span class="code">System.IO.FileStream</span> object by invoking its constructor and passing a string value that represents an XML file location that contains result data. Ensure that the file extension is XML.</p></li> 
     <li><p>Create a byte array that stores the data content of the <span class="code">BLOB</span> object that was populated with result data by the <span class="code">OutputServiceService</span> object’s <span class="code">generatePDFOutput</span> method (the eighth parameter). Populate the byte array by getting the value of the <span class="code">BLOB</span> object’s <span class="code">MTOM</span> data member.</p></li> 
     <li><p>Create a <span class="code">System.IO.BinaryWriter</span> object by invoking its constructor and passing the <span class="code">System.IO.FileStream</span> object.</p></li> 
     <li><p>Write the contents of the byte array to the XML file by invoking the <span class="code">System.IO.BinaryWriter</span> object’s <span class="code">Write</span> method and passing the byte array.</p></li> 
    </ul></li> 
  </ol> 
  <p><strong>See also</strong></p> 
  <p><a href="creating-document-output-streams#summary_of_steps">Summary of steps</a></p> 
  <p><a href="#unresolvedlink-lc-qs-output-ou.xml#ws624e3cba99b79e12e69a9941333732bac8-7d7f.2">Quick Start (MTOM): Printing to a file using the web service API</a></p> 
  <p><a href="#unresolvedlink-lc-qs-output-ou.xml#ws624e3cba99b79e12e69a9941333732bac8-7d7e.2">Quick Start (SwaRef): Printing to a file using the web service API</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-web#invoking_aem_forms_using_mtom">Invoking AEM Forms using MTOM</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-web#invoking_aem_forms_using_swaref">Invoking AEM Forms using SwaRef</a></p> 
  <h2 id="sending_print_streams_to_printers">Sending Print Streams to Printers</h2> 
  <p></p> 
  <p>You can use the Output service to send print streams such as PostScript, Printer Control Language (PCL), or the following label formats to network printers:</p> 
  <ul> 
   <li><p>Zebra - ZPL</p></li> 
   <li><p>Intermec - IPL</p></li> 
   <li><p>Datamax - DPL</p></li> 
   <li><p>TecToshiba - TPCL</p></li> 
  </ul> 
  <p>Using the Output service, you can merge XML data with a form design and output the form as a print stream. For example, you can create a PostScript print stream and send it to a network printer. The following illustration shows the Output service sending print streams to network printers.</p> 
  <note> 
   <p>To demonstrate how to send a print stream to a network printer, this section sends a PostScript print stream to a network printer by using the SharedPrinter printer protocol.</p> 
  </note> 
  <note> 
   <p>For more information about the Output service, see <a href="http://www.adobe.com/go/learn_aemforms_services_63">Services Reference for AEM Forms</a>.</p> 
  </note> 
  <h3 id="summary_of_steps">Summary of steps</h3> 
  <p></p> 
  <p>To send a print stream to a network printer, perform the following steps:</p> 
  <ol> 
   <li><p>Include project files.</p></li> 
   <li><p>Create an Output Client object. </p></li> 
   <li><p>Reference an XML data source.</p></li> 
   <li><p>Set print run-time options</p></li> 
   <li><p>Retrieve a document to print.</p></li> 
   <li><p>Send the document to a network printer.</p></li> 
  </ol> 
  <p><strong>Include project files</strong></p> 
  <p>Include necessary files in your development project. If you are creating a client application by using Java, include the necessary JAR files. If you are using web services, make sure that you include the proxy files.</p> 
  <p>The following JAR files must be added to your project’s class path:</p> 
  <ul> 
   <li><p>adobe-livecycle-client.jar</p></li> 
   <li><p>adobe-usermanager-client.jar</p></li> 
   <li><p>adobe-output-client.jar</p></li> 
   <li><p>adobe-utilities.jar (Required if AEM Forms is deployed on JBoss)</p></li> 
   <li><p>jbossall-client.jar (Required if AEM Forms is deployed on JBoss)</p></li> 
  </ul> 
  <p>if AEM Forms is deployed on a supported J2EE application server that is not JBoss, you will need to replace the adobe-utilities.jar and jbossall-client.jar files with JAR files that are specific to the J2EE application server on which AEM Forms is deployed. </p> 
  <p><strong>Create an Output Client object</strong></p> 
  <p>Before you can programmatically perform an Output service operation, create an Output service client object. If you are using the Java API, create an <span class="code">OutputClient</span> object. If you are using the Output web service API, create an <span class="code">OutputServiceClient</span> object.</p> 
  <p><strong>Reference an XML data source</strong></p> 
  <p>To print a document that contains data, you must reference an XML data source that contains XML elements for every form field that you want to populate with data. The XML element name must match the field name. An XML element is ignored if it does not correspond to a form field or if the XML element name does not match the field name. It is not necessary to match the order in which the XML elements are displayed if all XML elements are specified.</p> 
  <p><strong>Set print run-time options</strong></p> 
  <p>You can set the run-time options when sending a print stream to a printer, including the following options:</p> 
  <ul> 
   <li><p><strong>Copies</strong>: Specifies the number of copies to send to the printer. The default value is 1.</p></li> 
   <li><p><strong>Staple</strong>: An XCI option is set when a stapler is used. This option can be specified in the configuration model by the staple element and is used for PS and PCL printers only.</p></li> 
   <li><p><strong>OutputJog</strong>: An XCI option is set when output pages should be jogged (physically shifted in the output tray). This option is for PS and PCL printers only.</p></li> 
   <li><p><strong>OutputBin</strong>: XCI value that is used to enable the print driver to select the appropriate output bin.</p></li> 
  </ul> 
  <note> 
   <p>For information about all run-time options that you can set, see the <span class="code">PrintedOutputOptionsSpec</span> class reference.</p> 
  </note> 
  <p><strong>Retrieve a document to print</strong></p> 
  <p>Retrieve a print stream to send to a printer. For example, you can retrieve a PostScript file and send it to a printer. </p> 
  <p>You can choose to send a PDF file if your printer supports PDF. However, an issue with sending a PDF document to a printer is that each printer manufacturer has a different implementation of the PDF interpreter. That is, some print manufacturers use Adobe PDF interpretation, but it depends on the printer. Other printers have their own PDF interpreter. As a result, printing results may vary. </p> 
  <p>Another limitation of sending a PDF document to a printer is that it just prints; it cannot access duplex, paper tray selection, and stapling, except through settings on the printer. </p> 
  <p>To retrieve a document to print, you use the <span class="code">generatePrintedOutput</span> method. The following table specifies content types that are set for a given print stream when using the <span class="code">generatePrintedOutput</span> method.</p> 
  <table cellpadding="4" cellspacing="0"> 
   <thead align="left"> 
    <tr> 
     <th class="cellrowborder" id="d19e30883" valign="top" width="NaN%"><p>Print format </p></th> 
     <th class="cellrowborder" id="d19e30886" valign="top" width="NaN%"><p>Description</p></th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td class="cellrowborder" headers="d19e30883 " valign="top" width="NaN%"><p>DPL </p></td> 
     <td class="cellrowborder" headers="d19e30886 " valign="top" width="NaN%"><p>Creates a dpl203.xdc by default or custom xdc output stream.</p></td> 
    </tr> 
    <tr> 
     <td class="cellrowborder" headers="d19e30883 " valign="top" width="NaN%"><p>DPL300DPI </p></td> 
     <td class="cellrowborder" headers="d19e30886 " valign="top" width="NaN%"><p>Creates a DPL 300 DPI output stream.</p></td> 
    </tr> 
    <tr> 
     <td class="cellrowborder" headers="d19e30883 " valign="top" width="NaN%"><p>DPL406DPI </p></td> 
     <td class="cellrowborder" headers="d19e30886 " valign="top" width="NaN%"><p>Creates a DPL 400 DPI output stream.</p></td> 
    </tr> 
    <tr> 
     <td class="cellrowborder" headers="d19e30883 " valign="top" width="NaN%"><p>DPL600DPI </p></td> 
     <td class="cellrowborder" headers="d19e30886 " valign="top" width="NaN%"><p>Creates a DPL 600 DPI output stream.</p></td> 
    </tr> 
    <tr> 
     <td class="cellrowborder" headers="d19e30883 " valign="top" width="NaN%"><p>GenericColorPCL </p></td> 
     <td class="cellrowborder" headers="d19e30886 " valign="top" width="NaN%"><p>Creates a Generic Color PCL (5c) output stream.</p></td> 
    </tr> 
    <tr> 
     <td class="cellrowborder" headers="d19e30883 " valign="top" width="NaN%"><p>GenericPSLevel3 </p></td> 
     <td class="cellrowborder" headers="d19e30886 " valign="top" width="NaN%"><p>Creates a Generic PostScript Level 3 output stream.</p></td> 
    </tr> 
    <tr> 
     <td class="cellrowborder" headers="d19e30883 " valign="top" width="NaN%"><p>IPL </p></td> 
     <td class="cellrowborder" headers="d19e30886 " valign="top" width="NaN%"><p>Creates a Custom IPL output stream.</p></td> 
    </tr> 
    <tr> 
     <td class="cellrowborder" headers="d19e30883 " valign="top" width="NaN%"><p>IPL300DPI </p></td> 
     <td class="cellrowborder" headers="d19e30886 " valign="top" width="NaN%"><p>Creates a IPL 300 DPI output stream.</p></td> 
    </tr> 
    <tr> 
     <td class="cellrowborder" headers="d19e30883 " valign="top" width="NaN%"><p>IPL400DPI </p></td> 
     <td class="cellrowborder" headers="d19e30886 " valign="top" width="NaN%"><p>Creates a IPL 400 DPI output stream.</p></td> 
    </tr> 
    <tr> 
     <td class="cellrowborder" headers="d19e30883 " valign="top" width="NaN%"><p>PCL </p></td> 
     <td class="cellrowborder" headers="d19e30886 " valign="top" width="NaN%"><p>Creates a Generic Monochrome PCL (5e) output stream.</p></td> 
    </tr> 
    <tr> 
     <td class="cellrowborder" headers="d19e30883 " valign="top" width="NaN%"><p>PostScript </p></td> 
     <td class="cellrowborder" headers="d19e30886 " valign="top" width="NaN%"><p>Creates a Generic PostScript Level 2 output stream.</p></td> 
    </tr> 
    <tr> 
     <td class="cellrowborder" headers="d19e30883 " valign="top" width="NaN%"><p>TPCL </p></td> 
     <td class="cellrowborder" headers="d19e30886 " valign="top" width="NaN%"><p>Creates a Custom TPCL output stream.</p></td> 
    </tr> 
    <tr> 
     <td class="cellrowborder" headers="d19e30883 " valign="top" width="NaN%"><p>TPCL305DPI </p></td> 
     <td class="cellrowborder" headers="d19e30886 " valign="top" width="NaN%"><p>Creates a TPCL 305 DPI output stream.</p></td> 
    </tr> 
    <tr> 
     <td class="cellrowborder" headers="d19e30883 " valign="top" width="NaN%"><p>TPCL600DPI </p></td> 
     <td class="cellrowborder" headers="d19e30886 " valign="top" width="NaN%"><p>Creates a TPCL 600 DPI output stream.</p></td> 
    </tr> 
    <tr> 
     <td class="cellrowborder" headers="d19e30883 " valign="top" width="NaN%"><p>ZPL </p></td> 
     <td class="cellrowborder" headers="d19e30886 " valign="top" width="NaN%"><p>Creates a ZPL 203 DPI output stream.</p></td> 
    </tr> 
    <tr> 
     <td class="cellrowborder" headers="d19e30883 " valign="top" width="NaN%"><p>ZPL300DPI </p></td> 
     <td class="cellrowborder" headers="d19e30886 " valign="top" width="NaN%"><p>Creates a ZPL 300 DPI output stream.</p></td> 
    </tr> 
   </tbody> 
  </table> 
  <note> 
   <p>You can also send a print stream to a printer by using the <span class="code">generatePrintedOutput2</span> method. However the quick starts associated with the Sending Print Streams to Printers section use the <span class="code">generatePrintedOutput</span> method. </p> 
  </note> 
  <p><strong>Send the print stream to a network printer</strong></p> 
  <p>After you retrieve a document to print, you can invoke the Output service, which causes it to send a print stream to a network printer. For the Output service to successfully locate the printer, you have to specify both the print server and the printer name. In addition, you must also specify the printing protocol. </p> 
  <note> 
   <p>If PDFG is installed on the forms server and the server runs on Windows Server 2008, you cannot use the SharedPrinter property. In this situation, use a different printer protocol.</p> 
  </note> 
  <note> 
   <p>If you are using a network printer and the access mechanism is SharedPrinter, you need to specify the complete network path of printer.Send a print stream to a network printer using the Java API</p> 
  </note> 
  <p>Send a print stream to a network printer by using the Output API (Java):</p> 
  <ol> 
   <li><p>Include project files.</p><p>Include client JAR files, such as the adobe-output-client.jar, in your Java project’s class path. </p></li> 
   <li><p>Create an Output Client object</p> 
    <ul> 
     <li><p>Create a <span class="code">ServiceClientFactory</span> object that contains connection properties. </p></li> 
     <li><p>Create an <span class="code">OutputClient</span> object by using its constructor and passing the <span class="code">ServiceClientFactory</span> object.</p></li> 
    </ul></li> 
   <li><p>Reference an XML data source</p> 
    <ul> 
     <li><p>Create a <span class="code">java.io.FileInputStream</span> object that represents the XML data source that is used to populate the document by using its constructor and passing a string value that specifies the location of the XML file.</p></li> 
     <li><p>Create a <span class="code">com.adobe.idp.Document</span> object by using its constructor and passing the <span class="code">java.io.FileInputStream</span> object.</p></li> 
    </ul></li> 
   <li><p>Set print run-time options</p><p>Create a <span class="code">PrintedOutputOptionsSpec</span> object that represents print run-time options. For example, you can specify the number of copies to print by invoking the <span class="code">PrintedOutputOptionsSpec</span> object’s <span class="code">setCopies</span> method.</p> 
    <note> 
     <p>You cannot set the pagination value by using the <span class="code">PrintedOutputOptionsSpec</span> object’s <span class="code">setPagination</span> method if you are generating a ZPL print stream. Likewise, you cannot set the following options for a ZPL print stream: OutputJog, PageOffset, and Staple. The<span class="code">setPagination</span><i> method is not valid for PostScript generation. It is valid only for PCL generation. </i></p> 
    </note></li> 
   <li><p>Retrieve a document to print</p> 
    <ul> 
     <li><p>Retrieve a document to print by invoking the <span class="code">OutputClient</span> object’s <span class="code">generatePrintedOutput</span> method and passing the following values:</p> 
      <ul> 
       <li><p>A <span class="code">PrintFormat</span> enumeration value that specifies the print stream. For example, to create a PostScript print stream, pass <span class="code">PrintFormat.PostScript</span>.</p></li> 
       <li><p>A string value that specifies the name of the form design. </p></li> 
       <li><p>A string value that specifies the location of related collateral files, such as image files.</p></li> 
       <li><p>A string value that specifies the location of the XDC file to use.</p></li> 
       <li><p>The <span class="code">PrintedOutputOptionsSpec</span> object that contains run-time options that are required to print to a file.</p></li> 
       <li><p>The <span class="code">com.adobe.idp.Document</span> object that represents the XML data source that contains form data to merge with the form design.</p></li> 
      </ul><p>This method returns an <span class="code">OutputResult</span> object that contains the results of the operation. </p></li> 
     <li><p>Create a <span class="code">com.adobe.idp.Document</span> object to send to the printer by invoking the <span class="code">OutputResult</span> object ‘s <span class="code">getGeneratedDoc</span> method. This method returns a<span class="code"> com.adobe.idp.Document</span> object.</p></li> 
    </ul></li> 
   <li><p>Send the print stream to a network printer</p><p>Send the print stream to a network printer by invoking the <span class="code">OutputClient</span> object’s <span class="code">sendToPrinter</span> method and passing the following values:</p> 
    <ul> 
     <li><p>A <span class="code">com.adobe.idp.Document</span> object that represents the print stream to send to the printer. </p></li> 
     <li><p>A <span class="code">PrinterProtocol</span> enumeration value that specifies the printer protocol to use. For example, to specify the SharedPrinter protocol, pass <span class="code">PrinterProtocol.SharedPrinter</span>.</p></li> 
     <li><p>A string value that specifies the name of the print server. For example, assuming the name of the print server is PrintSever1, pass<span class="code">\\\PrintSever1</span>.</p></li> 
     <li><p>A string value that specifies the name of the printer. For example, assuming the name of the printer is Printer1, pass <span class="code">\\\PrintSever1\Printer1</span>.</p></li> 
    </ul> 
    <note> 
     <p>The <span class="code">sendToPrinter</span> method was added to the AEM Forms API in version 8.2.1. </p> 
    </note></li> 
  </ol> 
  <h3 id="send_a_print_stream_to_a_printer_using_the_web_service_api">Send a print stream to a printer using the web service API</h3> 
  <p></p> 
  <p>Send a print stream to a network printer by using the Output API (web service):</p> 
  <ol> 
   <li><p>Include project files.</p><p>Create a Microsoft .NET project that uses MTOM. Ensure that you use the following WSDL definition: <span class="code">http://localhost:8080/soap/services/OutputService?WSDL&amp;lc_version=9.0.1</span>. </p> 
    <note> 
     <p>Replace <span class="code">localhost</span><i> with the IP address of the server hosting AEM Forms. </i></p> 
    </note></li> 
   <li><p>Create an Output Client object.</p> 
    <ul> 
     <li><p>Create an <span class="code">OutputServiceClient</span> object by using its default constructor. </p></li> 
     <li><p>Create an <span class="code">OutputServiceClient.Endpoint.Address</span> object by using the <span class="code">System.ServiceModel.EndpointAddress</span> constructor. Pass a string value that specifies the WSDL to the AEM Forms service (for example, <span class="code">http://localhost:8080/soap/services/OutputService?blob=mtom</span>.) You do not need to use the <span class="code">lc_version</span> attribute. This attribute is used when you create a service reference. However, specify <span class="code">?blob=mtom</span> to use MTOM.</p></li> 
     <li><p>Create a <span class="code">System.ServiceModel.BasicHttpBinding</span> object by getting the value of the <span class="code">OutputServiceClient.Endpoint.Binding</span> field. Cast the return value to <span class="code">BasicHttpBinding</span>. </p></li> 
     <li><p>Set the <span class="code">System.ServiceModel.BasicHttpBinding</span> object’s <span class="code">MessageEncoding</span> field to <span class="code">WSMessageEncoding.Mtom</span>. This value ensures that MTOM is used. </p></li> 
     <li><p>Enable basic HTTP authentication by performing the following tasks:</p> 
      <ul> 
       <li><p>Assign the AEM forms user name to the field <span class="code">OutputServiceClient.ClientCredentials.UserName.UserName</span>.</p></li> 
       <li><p>Assign the corresponding password value to the field <span class="code">OutputServiceClient.ClientCredentials.UserName.Password</span>.</p></li> 
       <li><p>Assign the constant value <span class="code">HttpClientCredentialType.Basic</span> to the field <span class="code">BasicHttpBindingSecurity.Transport.ClientCredentialType</span>. </p></li> 
       <li><p>Assign the constant value <span class="code">BasicHttpSecurityMode.TransportCredentialOnly</span> to the field <span class="code">BasicHttpBindingSecurity.Security.Mode</span>. </p></li> 
      </ul></li> 
    </ul></li> 
   <li><p>Reference an XML data source.</p> 
    <ul> 
     <li><p>Create a <span class="code">BLOB</span> object by using its constructor. The <span class="code">BLOB</span> object is used to store form data.</p></li> 
     <li><p>Create a <span class="code">System.IO.FileStream</span> object by invoking its constructor. Pass a string value that specifies the location of the XML file that contains form data.</p></li> 
     <li><p>Create a byte array that stores the content of the <span class="code">System.IO.FileStream</span> object. Determine the byte array length by getting the <span class="code">System.IO.FileStream</span> object’s <span class="code">Length</span> property. </p></li> 
     <li><p>Populate the byte array with stream data by invoking the <span class="code">System.IO.FileStream</span> object’s <span class="code">Read</span> method and passing the byte array, the starting position, and the stream length to read.</p></li> 
     <li><p>Populate the <span class="code">BLOB</span> object by assigning its <span class="code">MTOM</span> field with the contents of the byte array.</p></li> 
    </ul></li> 
   <li><p>Set print run-time options.</p><p>Create a <span class="code">PrintedOutputOptionsSpec</span> object by using its constructor. For example, you can specify the number of copies to print by assigning an integer value that represents the number of copies to the <span class="code">PrintedOutputOptionsSpec</span> object’s <span class="code">copies</span> data member.</p> 
    <note> 
     <p>You cannot set the pagination value by using the <span class="code">PrintedOutputOptionsSpec</span> object’s <span class="code">pagination</span> data member if you are generating a ZPL print stream. Likewise, you cannot set the following options for a ZPL print stream: OutputJog, PageOffset and Staple. The<span class="code">pagination</span><i> data member is not valid for PostScript generation. It is valid only for PCL generation. </i></p> 
    </note></li> 
   <li><p>Retrieve a document to print.</p> 
    <ul> 
     <li><p>Retrieve a document to print by invoking the <span class="code">OutputServiceService</span> object’s <span class="code">generatePrintedOutput</span> method and passing the following values:</p> 
      <ul> 
       <li><p>A <span class="code">PrintFormat</span> enumeration value that specifies the print stream. For example, to create a PostScript print stream, pass <span class="code">PrintFormat.PostScript</span>.</p></li> 
       <li><p>A string value that specifies the name of the form design. </p></li> 
       <li><p>A string value that specifies the location of related collateral files, such as image files.</p></li> 
       <li><p>A string value that specifies the location of the XDC file to use.</p></li> 
       <li><p>The <span class="code">PrintedOutputOptionsSpec</span> object that contains print run-time options that are used when sending a print stream to a network printer.</p></li> 
       <li><p>The <span class="code">BLOB</span> object that contains the XML data source that contains form data.</p></li> 
       <li><p>A <span class="code">BLOB</span> object that is populated by the <span class="code">generatePrintedOutput</span> method. The <span class="code">generatePrintedOutput</span> method populates this object with generated metadata that describes the document. (This parameter value is required for web service invocation only.)</p></li> 
       <li><p>A <span class="code">BLOB</span> object that is populated by the <span class="code">generatePrintedOutput</span> method. The <span class="code">generatePrintedOutput</span> method populates this object with result data. (This parameter value is required for web service invocation only.)</p></li> 
       <li><p>An <span class="code">OutputResult</span> object that contains the results of the operation. (This parameter value is required for web service invocation only.)</p></li> 
      </ul></li> 
     <li><p>Create a <span class="code">BLOB</span> object to send to the printer by getting the value of the <span class="code">OutputResult</span> object ‘s <span class="code">generatedDoc</span> method. This method returns a <span class="code">BLOB</span> object that contains PostScript data returned by the <span class="code">generatePrintedOutput</span> method.</p></li> 
    </ul></li> 
   <li><p>Send the print stream to a network printer.</p><p>Send the print stream to a network printer by invoking the <span class="code">OutputClient</span> object’s <span class="code">sendToPrinter</span> method and passing the following values:</p> 
    <ul> 
     <li><p>A <span class="code">BLOB</span> object that represents the print stream to send to the printer. </p></li> 
     <li><p>A <span class="code">PrinterProtocol</span> enumeration value that specifies the printer protocol to use. For example, to specify the SharedPrinter protocol, pass <span class="code">PrinterProtocol.SharedPrinter</span>.</p></li> 
     <li><p>A <span class="code">bool</span> value that specifies whether to user the previous parameter value. Pass the value <span class="code">true</span>. (This parameter value is required for web service invocation only.)</p></li> 
     <li><p>A string value that specifies the name of the print server. For example, assuming that the name of the print server is PrintSever1, pass <span class="code">\\\PrintSever1</span>.</p></li> 
     <li><p>A string value that specifies the name of the printer. For example, assuming that the name of the printer is Printer1, pass <span class="code">\\\PrintSever1\Printer1</span>.</p></li> 
    </ul> 
    <note> 
     <p>The <span class="code">sendToPrinter</span> method was added to the AEM Forms API in version 8.2.1. </p> 
    </note></li> 
  </ol> 
  <h2 id="creating_multiple_output_files">Creating Multiple Output Files</h2> 
  <p></p> 
  <p>The Output service can create separate documents for each record within an XML data source or a single file that contains all records (this functionality is the default). For example, assume that ten records are located within an XML data source and you instruct the Output service to create separate PDF documents (or other types of output) for each record by using the Output Service API. As a result, the Output service generates ten PDF documents. (Instead of creating documents, you can send multiple print streams to a printer.) </p> 
  <p>The following illustration also shows the Output service processing an XML data file that contains multiple records. However, assume that you instruct the Output service to create a single PDF document that contains all data records. In this situation, the Output service generates one document that contains all of the records. </p> 
  <img alt="" src="lc_ou_create_multiple_files_cm.xml" /> 
  <p>The following illustration shows the Output service processing an XML data file that contains multiple records. Assume that you instruct the Output service to create a separate PDF document for each data record. In this situation, the Output service generates a separate PDF document for each data record. </p> 
  <img alt="" src="assets/cm_outputbatchmany.png" /> 
  <p>The following XML data shows an example of a data file that contains three data records.</p> 
  <codeblock gutter="true" class="syntax as3">
     &lt;?xml&amp;nbsp;version="1.0"&amp;nbsp;encoding="UTF-8"?&gt;&amp;nbsp;!!discoiqbr!! &lt;batch&gt;&amp;nbsp;!!discoiqbr!! &lt;LoanRecord&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;mortgageAmount&gt;500000&lt;/mortgageAmount&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;lastName&gt;Blue&lt;/lastName&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;firstName&gt;Tony&lt;/firstName&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;SSN&gt;555666777&lt;/SSN&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;PositionTitle&gt;Product&amp;nbsp;Manager&lt;/PositionTitle&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;Address&gt;555&amp;nbsp;No&amp;nbsp;Where&amp;nbsp;Dr&lt;/Address&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;City&gt;New&amp;nbsp;York&lt;/City&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;StateProv&gt;New&amp;nbsp;York&lt;/StateProv&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;ZipCode&gt;51256&lt;/ZipCode&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;Email&gt;TBlue@NoMailServer.com&lt;/Email&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;PhoneNum&gt;555-7418&lt;/PhoneNum&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;FaxNum&gt;555-9981&lt;/FaxNum&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;Description&gt;Buy&amp;nbsp;a&amp;nbsp;home&lt;/Description&gt;&amp;nbsp;!!discoiqbr!! &lt;/LoanRecord&gt;&amp;nbsp;!!discoiqbr!! &lt;LoanRecord&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;mortgageAmount&gt;300000&lt;/mortgageAmount&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;lastName&gt;White&lt;/lastName&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;firstName&gt;Sam&lt;/firstName&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;SSN&gt;555666222&lt;/SSN&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;PositionTitle&gt;Program&amp;nbsp;Manager&lt;/PositionTitle&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;Address&gt;557&amp;nbsp;No&amp;nbsp;Where&amp;nbsp;Dr&lt;/Address&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;City&gt;New&amp;nbsp;York&lt;/City&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;StateProv&gt;New&amp;nbsp;York&lt;/StateProv&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;ZipCode&gt;51256&lt;/ZipCode&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;Email&gt;SWhite@NoMailServer.com&lt;/Email&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;PhoneNum&gt;555-7445&lt;/PhoneNum&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;FaxNum&gt;555-9986&lt;/FaxNum&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;Description&gt;Buy&amp;nbsp;a&amp;nbsp;home&lt;/Description&gt;&amp;nbsp;!!discoiqbr!! &lt;/LoanRecord&gt;&amp;nbsp;!!discoiqbr!! &lt;LoanRecord&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;mortgageAmount&gt;700000&lt;/mortgageAmount&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;lastName&gt;Green&lt;/lastName&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;firstName&gt;Steve&lt;/firstName&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;SSN&gt;55566688&lt;/SSN&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;PositionTitle&gt;Project&amp;nbsp;Manager&lt;/PositionTitle&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;Address&gt;445&amp;nbsp;No&amp;nbsp;Where&amp;nbsp;Dr&lt;/Address&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;City&gt;New&amp;nbsp;York&lt;/City&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;StateProv&gt;New&amp;nbsp;York&lt;/StateProv&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;ZipCode&gt;51256&lt;/ZipCode&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;Email&gt;SGreeb@NoMailServer.com&lt;/Email&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;PhoneNum&gt;555-2211&lt;/PhoneNum&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;FaxNum&gt;555-2221&lt;/FaxNum&gt;&amp;nbsp;!!discoiqbr!! &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;Description&gt;Buy&amp;nbsp;a&amp;nbsp;home&lt;/Description&gt;&amp;nbsp;!!discoiqbr!! &lt;/LoanRecord&gt;&amp;nbsp;!!discoiqbr!! &lt;/batch&gt; 
  </codeblock> 
  <p>Notice that the XML element that starts and ends each data record is <span class="code">LoanRecord</span>. This XML element is referenced by the application logic that generates multiple files.</p> 
  <note> 
   <p>For more information about the Output service, see <a href="http://www.adobe.com/go/learn_aemforms_services_63">Services Reference for AEM Forms</a>.</p> 
  </note> 
  <h3 id="summary_of_steps">Summary of steps</h3> 
  <p></p> 
  <p>To create multiple PDF files based on an XML data source, perform the following steps:</p> 
  <ol> 
   <li><p>Include project files.</p></li> 
   <li><p>Create an Output Client object. </p></li> 
   <li><p>Reference an XML data source.</p></li> 
   <li><p>Set PDF run-time options.</p></li> 
   <li><p>Set rendering run-time options.</p></li> 
   <li><p>Generate multiple PDF files.</p></li> 
   <li><p>Retrieve the results of the operation.</p></li> 
  </ol> 
  <p><strong>Include project files</strong></p> 
  <p>Include necessary files in your development project. If you are creating a client application using Java, include the necessary JAR files. If you are using web services, make sure that you include the proxy files.</p> 
  <p>The following JAR files must be added to your project’s class path:</p> 
  <ul> 
   <li><p>adobe-livecycle-client.jar</p></li> 
   <li><p>adobe-usermanager-client.jar</p></li> 
   <li><p>adobe-output-client.jar</p></li> 
   <li><p>adobe-utilities.jar (required if AEM Forms is deployed on JBoss)</p></li> 
   <li><p>jbossall-client.jar (required if AEM Forms is deployed on JBoss)</p></li> 
  </ul> 
  <p>if AEM Forms is deployed on a supported J2EE application server that is not JBoss, you will need to replace the adobe-utilities.jar and jbossall-client.jar files with JAR files that are specific to the J2EE application server on which AEM Forms is deployed.</p> 
  <p><strong>Create an Output Client object</strong></p> 
  <p>Before you can programmatically perform an Output service operation, you must create an Output service client object. If you are using the Java API, create an <span class="code">OutputClient</span> object. If you are using the Output web service API, create an <span class="code">OutputServiceService</span> object.</p> 
  <p><strong>Reference an XML data source</strong></p> 
  <p>Reference an XML data source that contains multiple records. An XML element must be used to separate the data records. For example, in the example XML data source that is shown earlier in this section, the XML element that separates data records is named <span class="code">LoanRecord</span>.</p> 
  <p>An XML element must exist for every form field that you want to populate with data. The XML element name must match the field name. An XML element is ignored if it does not correspond to a form field or if the XML element name does not match the field name. It is not necessary to match the order in which the XML elements are displayed if all XML elements are specified.</p> 
  <p><strong>Set PDF run-time options</strong></p> 
  <p>You must set the following run-time options for the Output service to successfully create multiple files based on an XML data source:</p> 
  <ul> 
   <li><p><strong>Many Files</strong>: Specifies whether the Output service creates a single document or multiple documents. You can specify true or false. To create a separate document for each data record in the XML data source, specify true. </p></li> 
   <li><p><strong>File URI</strong>: Specifies the location of the files that the Output service generates. For example, assume that you specify C:\\Adobe\forms\Loan.pdf. In this situation, the Output service creates a file named Loan.pdf and places the file in the C:\\Adobe\forms folder. When there are multiple files, the file names are Loan0001.pdf, Loan0002.pdf, Loan0003.pdf and so on. If you specify a file location, the files are placed on the server, not the client computer. </p></li> 
   <li><p><strong>Record Name</strong>: Specifies the XML element name in the data source that separates the data records. For example, in the example XML data source that is shown earlier in this section, the XML element that separates data records is called <span class="code">LoanRecord</span>. (Instead of setting the Record Name run-time option, you can set the Record Level by assigning it a numeric value that indicates the element level that contains data records. However, you can set only the Record Name or the Record Level. You cannot set both values.) </p></li> 
  </ul> 
  <p><strong>Set rendering run-time options</strong></p> 
  <p>You can set rendering run-time options while creating multiple files. Although these options are not required (unlike output run-time options, which are required), you can perform tasks such as improving the performance of the Output service. For example, you can cache the form design that the Output service uses in order to improve performance.</p> 
  <p>When the Output service processes batch records, it reads data that contains multiple records in an incremental manner. That is, the Output service reads the data into memory and releases the data as the batch of records is processed. The Output service loads data in an incremental manner when either one of two run-time options are set. If you set the Record Name run-time option, the Output service reads data in an incremental manner. Likewise, if you set the Record Level run-time option to 2 or greater, the Output service reads data in an incremental manner. </p> 
  <p>You can control whether the Output service performs incremental loading by using the <span class="code">PDFOutputOptionsSpec</span> or the <span class="code">PrintedOutputOptionSpec</span> object’s <span class="code">setLazyLoading</span> method. You can pass the value <span class="code">false</span> to this method which turns off incremental loading.</p> 
  <p><strong>Generate multiple PDF files</strong></p> 
  <p>After you reference a valid XML data source that contains multiple data records and set run-time options, you can invoke the Output service, which causes it to generate multiple files. When generating multiple records, the <span class="code">OutputResult</span> object’s <span class="code">getGeneratedDoc</span> method returns <span class="code">null</span>. </p> 
  <p><strong>Retrieve the results of the operation</strong></p> 
  <p>After the Output service performs an operation, it returns XML data that specifies whether the operation was successful. The following XML is returned by the Output service. In this situation, the Output service generated 42 documents. </p> 
  <codeblock gutter="true" class="syntax as3">
     &lt;?xml&amp;nbsp;version="1.0"&amp;nbsp;encoding="UTF-8"?&gt;&amp;nbsp;!!discoiqbr!! &lt;printResult&gt;&amp;nbsp;!!discoiqbr!! &lt;status&gt;0&lt;/status&gt;&amp;nbsp;!!discoiqbr!! &lt;requestId&gt;4ad85f9e2&lt;/requestId&gt;&amp;nbsp;!!discoiqbr!! &lt;context/&gt;&amp;nbsp;!!discoiqbr!! &lt;messages&gt;&amp;nbsp;!!discoiqbr!! &lt;message&gt;Printed&amp;nbsp;all&amp;nbsp;42&amp;nbsp;records&amp;nbsp;successfully.&lt;/message&gt;&amp;nbsp;!!discoiqbr!! &lt;/messages&gt;&amp;nbsp;!!discoiqbr!! &lt;printSpec&gt;&amp;nbsp;!!discoiqbr!! &lt;input&gt;&amp;nbsp;!!discoiqbr!! &lt;validated&gt;true&lt;/validated&gt;&amp;nbsp;!!discoiqbr!! &lt;dataFile&amp;nbsp;recordIdField=""&amp;nbsp;recordLevel="0"&amp;nbsp;recordName="LoanRecord"/&gt;&amp;nbsp;!!discoiqbr!! &lt;sniffRules&amp;nbsp;lookAhead="300"/&gt;&amp;nbsp;!!discoiqbr!! &lt;formDesign&gt;Loan.xdp&lt;/formDesign&gt;&amp;nbsp;!!discoiqbr!! &lt;contentRoot&gt;C:\Adobe&lt;/contentRoot&gt;&amp;nbsp;!!discoiqbr!! &lt;metadata-spec&amp;nbsp;record="false"/&gt;&amp;nbsp;!!discoiqbr!! &lt;/input&gt;&amp;nbsp;!!discoiqbr!! &lt;output&gt;&amp;nbsp;!!discoiqbr!! &lt;format&gt;PDF&lt;/format&gt;&amp;nbsp;!!discoiqbr!! &lt;fileURI&gt;C:\Adobe\forms\Loan.pdf&lt;/fileURI&gt;&amp;nbsp;!!discoiqbr!! &lt;optionString&gt;cacheenabled=true&amp;amp;padebug=false&amp;amp;linearpdf=false&amp;amp;pdfarevisionnumber=1&amp;amp;pdfaconformance=A&amp;amp;taggedpdf=false&amp;amp;TransactionTimeOut=180&lt;/optionString&gt;&amp;nbsp;!!discoiqbr!! &lt;waitForResponse&gt;true&lt;/waitForResponse&gt;&amp;nbsp;!!discoiqbr!! &lt;outputStream&gt;multiple&lt;/outputStream&gt;&amp;nbsp;!!discoiqbr!! &lt;/output&gt;&amp;nbsp;!!discoiqbr!! &lt;/printSpec&gt;&amp;nbsp;!!discoiqbr!! &lt;/printResult&gt; 
  </codeblock> 
  <p><strong>See also</strong></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#including_aem_forms_java_library_files">Including AEM Forms Java library files</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#setting_connection_properties">Setting connection properties</a></p> 
  <p><a href="/programming-with-aem-forms/output-service-java-api-quick#output_service_java_api_quick_start_soap">Output Service API Quick Starts</a></p> 
  <h3 id="create_multiple_pdf_files_using_the_java_api">Create multiple PDF files using the Java API</h3> 
  <p></p> 
  <p>Create multiple PDF files by using the Output API (Java):</p> 
  <ol> 
   <li><p>Include project files”</p><p>Include client JAR files, such as adobe-output-client.jar, in your Java project’s class path. .</p></li> 
   <li><p>Create an Output Client object</p> 
    <ul> 
     <li><p>Create a <span class="code">ServiceClientFactory</span> object that contains connection properties.</p></li> 
     <li><p>Create an <span class="code">OutputClient</span> object by using its constructor and passing the <span class="code">ServiceClientFactory</span> object.</p></li> 
    </ul></li> 
   <li><p>Reference an XML data source</p> 
    <ul> 
     <li><p>Create a <span class="code">java.io.FileInputStream</span> object that represents the XML data source that contains multiple records by using its constructor and passing a string value that specifies the location of the XML file. </p></li> 
     <li><p>Create a <span class="code">com.adobe.idp.Document</span> object by using its constructor and passing the <span class="code">java.io.FileInputStream</span> object.</p></li> 
    </ul></li> 
   <li><p>Set PDF run-time options</p> 
    <ul> 
     <li><p>Create a <span class="code">PDFOutputOptionsSpec</span> object by using its constructor. </p></li> 
     <li><p>Set the Many Files option by invoking the <span class="code">PDFOutputOptionsSpec</span> object’s <span class="code">setGenerateManyFiles</span> method. For example, pass the value <span class="code">true</span> to instruct the Output service to create a separate PDF file for each record in the XML data source. (If you pass <span class="code">false</span>, the Output service generates a single PDF document that contains all records).</p></li> 
     <li><p>Set the File URI option by invoking the <span class="code">PDFOutputOptionsSpec</span> object’s <span class="code">setFileUri</span> method and passing a string value that specifies the location of the files that the Output service generates. The File URI option is relative to the J2EE application server hosting AEM Forms, not the client computer.</p></li> 
     <li><p>Set the Record Name option by invoking the <span class="code">OutputOptionsSpec</span> object’s <span class="code">setRecordName</span> method and passing a string value that specifies the XML element name in the data source that separates the data records. (For example, consider the XML data source shown earlier in this section. The name of the XML element that separates data records is LoanRecord). </p></li> 
    </ul></li> 
   <li><p>Set rendering run-time options</p> 
    <ul> 
     <li><p>Create a <span class="code">RenderOptionsSpec</span> object by using its constructor.</p></li> 
     <li><p>Cache the form design to improve the performance of the Output service by invoking the <span class="code">RenderOptionsSpec</span> object’s <span class="code">setCacheEnabled</span> and passing a <span class="code">Boolean</span> value of <span class="code">true</span>.</p></li> 
    </ul></li> 
   <li><p>Generate multiple PDF files</p><p>Generate multiple PDF files by invoking the <span class="code">OutputClient</span> object’s <span class="code">generatePDFOutput</span> method and passing the following values:</p> 
    <ul> 
     <li><p>A <span class="code">TransformationFormat</span> enum value. To generate a PDF document, specify <span class="code">TransformationFormat.PDF</span>. </p></li> 
     <li><p>A string value that specifies the name of the form design.</p></li> 
     <li><p>A string value that specifies the content root where the form design is located.</p></li> 
     <li><p>A <span class="code">PDFOutputOptionsSpec</span> object that contains PDF run-time options.</p></li> 
     <li><p>A <span class="code">RenderOptionsSpec</span> object that contains rendering run-time options.</p></li> 
     <li><p>The <span class="code">com.adobe.idp.Document</span> object that contains the XML data source that contains data to merge with the form design.</p></li> 
    </ul><p>The <span class="code">generatePDFOutput</span> method returns an <span class="code">OutputResult</span> object that contains the results of the operation. </p></li> 
   <li><p>Retrieve the results of the operation</p> 
    <ul> 
     <li><p>Create a <span class="code">java.io.File</span> object that represents an XML file that will contain the results of the <span class="code">generatePDFOutput</span> method. Ensure that the file name extension is .xml.</p></li> 
     <li><p>Invoke the <span class="code">com.adobe.idp.Document</span> object’s <span class="code">copyToFile</span> method to copy the contents of the <span class="code">com.adobe.idp.Document</span> object to the file (ensure that you use the <span class="code">com.adobe.idp.Document</span> object that was returned by the <span class="code">applyUsageRights</span> method).</p></li> 
    </ul></li> 
  </ol> 
  <p><strong>See also</strong></p> 
  <p><a href="creating-document-output-streams#summary_of_steps">Summary of steps</a></p> 
  <p><a href="/programming-with-aem-forms/output-service-java-api-quick#quick_start_soap_mode_creating_multiple_pdf_files_using_the_java_api">Quick Start (EJB mode): Creating multiple PDF files using the Java API</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#including_aem_forms_java_library_files">Including AEM Forms Java library files</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#setting_connection_properties">Setting connection properties</a></p> 
  <h3 id="create_multiple_pdf_files_using_the_web_service_api">Create multiple PDF files using the web service API</h3> 
  <p></p> 
  <p>Create multiple PDF files by using the Output API (web service):</p> 
  <ol> 
   <li><p>Include project files. </p><p>Create a Microsoft .NET project that uses MTOM. Ensure that you use the following WSDL definition: <span class="code">http://localhost:8080/soap/services/OutputService?WSDL&amp;lc_version=9.0.1</span>. </p> 
    <note> 
     <p>Replace <span class="code">localhost</span> with the IP address of the server hosting AEM Forms. </p> 
    </note></li> 
   <li><p>Create an Output Client object.</p> 
    <ul> 
     <li><p>Create an <span class="code">OutputServiceClient</span> object by using its default constructor. </p></li> 
     <li><p>Create an <span class="code">OutputServiceClient.Endpoint.Address</span> object by using the <span class="code">System.ServiceModel.EndpointAddress</span> constructor. Pass a string value that specifies the WSDL to the AEM Forms service (for example, <span class="code">http://localhost:8080/soap/services/OutputService?blob=mtom</span>.) You do not need to use the <span class="code">lc_version</span> attribute. This attribute is used when you create a service reference. However, specify <span class="code">?blob=mtom</span> to use MTOM.</p></li> 
     <li><p>Create a <span class="code">System.ServiceModel.BasicHttpBinding</span> object by getting the value of the <span class="code">OutputServiceClient.Endpoint.Binding</span> field. Cast the return value to <span class="code">BasicHttpBinding</span>. </p></li> 
     <li><p>Set the <span class="code">System.ServiceModel.BasicHttpBinding</span> object’s <span class="code">MessageEncoding</span> field to <span class="code">WSMessageEncoding.Mtom</span>. This value ensures that MTOM is used. </p></li> 
     <li><p>Enable basic HTTP authentication by performing the following tasks:</p> 
      <ul> 
       <li><p>Assign the AEM forms user name to the field <span class="code">OutputServiceClient.ClientCredentials.UserName.UserName</span>.</p></li> 
       <li><p>Assign the corresponding password value to the field <span class="code">OutputServiceClient.ClientCredentials.UserName.Password</span>.</p></li> 
       <li><p>Assign the constant value <span class="code">HttpClientCredentialType.Basic</span> to the field <span class="code">BasicHttpBindingSecurity.Transport.ClientCredentialType</span>. </p></li> 
       <li><p>Assign the constant value <span class="code">BasicHttpSecurityMode.TransportCredentialOnly</span> to the field <span class="code">BasicHttpBindingSecurity.Security.Mode</span>. </p></li> 
      </ul></li> 
    </ul></li> 
   <li><p>Reference an XML data source. </p> 
    <ul> 
     <li><p>Create a <span class="code">BLOB</span> object by using its constructor. The <span class="code">BLOB</span> object is used to store form data that contains multiple records.</p></li> 
     <li><p>Create a <span class="code">System.IO.FileStream</span> object by invoking its constructor. Pass a string value that represents the file location of the XML file that contains multiple records.</p></li> 
     <li><p>Create a byte array that stores the content of the <span class="code">System.IO.FileStream</span> object. You can determine the size of the byte array by getting the <span class="code">System.IO.FileStream</span> object’s <span class="code">Length</span> property. </p></li> 
     <li><p>Populate the byte array with stream data by invoking the <span class="code">System.IO.FileStream</span> object’s <span class="code">Read</span> method and passing the byte array, the starting position, and the stream length to read.</p></li> 
     <li><p>Populate the <span class="code">BLOB</span> object by assigning its <span class="code">MTOM</span> field with the contents of the byte array.</p></li> 
    </ul></li> 
   <li><p>Set PDF run-time options. </p> 
    <ul> 
     <li><p>Create a <span class="code">PDFOutputOptionsSpec</span> object by using its constructor. </p></li> 
     <li><p>Set the Many Files option by assigning a Boolean value to the <span class="code">OutputOptionsSpec</span> object’s <span class="code">generateManyFiles</span> data member. For example, assign the value <span class="code">true</span> to this data member to instruct the Output service to create a separate PDF file for each record in the XML data source. (If you assign <span class="code">false</span> to this data member, then the Output service generates a single PDF that contains all records). </p></li> 
     <li><p>Set the file URI option by assigning a string value that specifies the location of the file(s) that the Output service generates to the <span class="code">OutputOptionsSpec</span> object’s <span class="code">fileURI</span> data member. The File URI option is relative to the J2EE application server hosting AEM Forms, not the client computer.</p></li> 
     <li><p>Set the record name option by assigning a string value that specifies the XML element name in the data source that separates the data records to the <span class="code">OutputOptionsSpec</span> object’s <span class="code">recordName</span> data member.</p></li> 
     <li><p>Set the copies option by assigning an integer value that specifies the number of copies that the Output service generates to the <span class="code">OutputOptionsSpec</span> object’s <span class="code">copies</span> data member.</p></li> 
    </ul></li> 
   <li><p>Set rendering run-time options. </p> 
    <ul> 
     <li><p>Create a <span class="code">RenderOptionsSpec</span> object by using its constructor.</p></li> 
     <li><p>Cache the form design to improve the performance of the Output service by assigning the value <span class="code">true</span> to the <span class="code">RenderOptionsSpec</span> object’s <span class="code">cacheEnabled</span> data member.</p></li> 
    </ul></li> 
   <li><p>Generate multiple PDF files.</p><p>Create multiple PDF files by invoking the <span class="code">OutputServiceService</span> object’s <span class="code">generatePDFOutput </span>method and passing the following values:</p> 
    <ul> 
     <li><p>A TransformationFormat enum value. To generate a PDF document, specify <span class="code">TransformationFormat.PDF</span>. </p></li> 
     <li><p>A string value that specifies the name of the form design.</p></li> 
     <li><p>A string value that specifies the content root where the form design is located.</p></li> 
     <li><p>A <span class="code">PDFOutputOptionsSpec</span> object that contains PDF run-time options.</p></li> 
     <li><p>A <span class="code">RenderOptionsSpec</span> object that contains rendering run-time options.</p></li> 
     <li><p>The <span class="code">BLOB</span> object that contains the XML data source that contains data to merge with the form design.</p></li> 
     <li><p>A <span class="code">BLOB</span> object that is populated by the <span class="code">generatePDFOutput</span> method. The <span class="code">generatePDFOutput</span> method populates this object with generated metadata that describes the document.</p></li> 
     <li><p>A <span class="code">BLOB</span> object that is populated by the <span class="code">generatePDFOutput</span> method. The <span class="code">generatePDFOutput</span> method populates this object with result data.</p></li> 
     <li><p>An <span class="code">OutputResult</span> object that contains the results of the operation.</p></li> 
    </ul></li> 
   <li><p>Retrieve the results of the operation</p> 
    <ul> 
     <li><p>Create a <span class="code">System.IO.FileStream</span> object by invoking its constructor and passing a string value that represents an XML file location that contains result data. Ensure that the file name extension is .xml.</p></li> 
     <li><p>Create a byte array that stores the data content of the <span class="code">BLOB</span> object that was populated with result data by the <span class="code">OutputServiceService</span> object’s <span class="code">generatePDFOutput</span> method (the eighth parameter). Populate the byte array by getting the value of the <span class="code">BLOB</span> object’s <span class="code">binaryData</span> data member.</p></li> 
     <li><p>Create a <span class="code">System.IO.BinaryWriter</span> object by invoking its constructor and passing the <span class="code">System.IO.FileStream</span> object.</p></li> 
     <li><p>Write the contents of the byte array to the XML file by invoking the <span class="code">System.IO.BinaryWriter</span> object’s <span class="code">Write</span> method and passing the byte array.</p></li> 
    </ul></li> 
  </ol> 
  <p><strong>See also</strong></p> 
  <p><a href="creating-document-output-streams#summary_of_steps">Summary of steps</a></p> 
  <p><a href="#unresolvedlink-lc-qs-output-ou.xml#ws624e3cba99b79e12e69a9941333732bac8-7d56.2">Quick Start (MTOM): Creating multiple PDF files using the web service API</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-web#invoking_aem_forms_using_mtom">Invoking AEM Forms using MTOM</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-web#invoking_aem_forms_using_swaref">Invoking AEM Forms using SwaRef</a></p> 
  <h2 id="creating_search_rules">Creating Search Rules</h2> 
  <p></p> 
  <p>You can create search rules that result in the Output service examining input data and using different form designs based on the data content to generate output. For example, if the text <i>mortgage</i> is located within the input data, then the Output service can use a form design named Mortgage.xdp. Likewise, if the text <i>automobile</i> is located in the input data, then the Output service can use a form design that is saved as AutomobileLoan.xdp. Although the Output service can generate different output types, this section assumes that the Output service generates a PDF file. The following diagram shows the Output service generating a PDF file by processing an XML data file and using one of many form designs.</p> 
  <img alt="" src="lc_ou_create_search_rules_cs.xml" /> 
  <p>In addition, the Output service is able to generate document packages, where multiple records are provided in the data set and each record is matched to a form design and a single document is generated made up of multiple form designs.</p> 
  <img alt="" src="assets/cs_outputbatchmanyformdesigns2.png" /> 
  <note> 
   <p>For more information about the Output service, see <a href="http://www.adobe.com/go/learn_aemforms_services_63">Services Reference for AEM Forms</a>.</p> 
  </note> 
  <h3 id="summary_of_steps">Summary of steps</h3> 
  <p></p> 
  <p>To instruct the Output service to use search rules while generating a document, perform the following steps:</p> 
  <ol> 
   <li><p>Include project files.</p></li> 
   <li><p>Create an Output Client object. </p></li> 
   <li><p>Reference an XML data source.</p></li> 
   <li><p>Define search rules.</p></li> 
   <li><p>Set PDF run-time options.</p></li> 
   <li><p>Set rendering run-time options.</p></li> 
   <li><p>Generate a PDF document.</p></li> 
   <li><p>Retrieve the results of the operation.</p></li> 
  </ol> 
  <p><strong>Include project files</strong></p> 
  <p>Include necessary files in your development project. If you are creating a client application using Java, then include the necessary JAR files. If you are using web services, then make sure that you include the proxy files.</p> 
  <p>The following JAR files must be added to your project’s classpath:</p> 
  <ul> 
   <li><p>adobe-livecycle-client.jar</p></li> 
   <li><p>adobe-usermanager-client.jar</p></li> 
   <li><p>adobe-output-client.jar</p></li> 
   <li><p>adobe-utilities.jar (Required if AEM Forms is deployed on JBoss)</p></li> 
   <li><p>jbossall-client.jar (Required if AEM Forms is deployed on JBoss)</p></li> 
  </ul> 
  <p>if AEM Forms is deployed on a supported J2EE application server that is not JBoss, then you will need to replace adobe-utilities.jar and jbossall-client.jar with JAR files that are specific to the J2EE application server on which AEM Forms is deployed.</p> 
  <p><strong>Create an Output Client object</strong></p> 
  <p>Before you can programmatically perform an Output service operation, you must create an Output service client object.</p> 
  <p><strong>Reference an XML data source</strong></p> 
  <p>An XML element must exist for every form field that you want to populate with data. The XML element name must match the field name. An XML element is ignored if it does not correspond to a form field or if the XML element name does not match the field name. It is not necessary to match the order in which the XML elements are displayed, as long as all XML elements are specified.</p> 
  <p><strong>Define search rules</strong></p> 
  <p>To define search rules, you define one or more text patterns that the Output services searches for in the input data. For each text pattern that you define, you specify a corresponding form design that is used if the text pattern is located. If a text pattern is located, then the Output service uses the corresponding form design to generate the output. An example of a text pattern is <i>mortgage</i>. </p> 
  <note> 
   <p>If text patterns are not located, then the default form is used. Make sure that all form designs that you use are located in the content root. </p> 
  </note> 
  <p><strong>Set PDF run-time options</strong></p> 
  <p>Set the following PDF run-time options in order for the Output service to successfully create a PDF document based on multiple form designs:</p> 
  <ul> 
   <li><p><strong>File URI</strong>: Specifies the name and location of the PDF file that the Output service generates.</p></li> 
   <li><p><strong>Rules</strong>: Specifies rules that you defined.</p></li> 
   <li><p><strong>LookAHead</strong>: Specifies the number of bytes to use from the beginning of the input data file to scan for the defined text patterns. The default is 500 bytes.</p></li> 
  </ul> 
  <p><strong>Set rendering run-time options</strong></p> 
  <p>You can set rendering run-time options while creating PDF files. Although these options are not required (unlike PDF run-time options), you can perform tasks such as improving the performance of the Output service. For example, you can cache the form design that the Output service uses in order to improve performance.</p> 
  <p><strong>Generate a PDF document</strong></p> 
  <p>After you reference a valid XML data source and set run-time options, you can invoke the Output service resulting in it generating a PDF document. If the Output service locates a specified text pattern in the input data, then it uses the corresponding form design. If a text pattern is not used, then the Output service uses the default form design.</p> 
  <p><strong>Retrieve the results of the operation</strong></p> 
  <p>After the Output service performs an operation, it returns XML data that specifies whether the operation was successful. </p> 
  <p><strong>See also</strong></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#including_aem_forms_java_library_files">Including AEM Forms Java library files</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#setting_connection_properties">Setting connection properties</a></p> 
  <p><a href="/programming-with-aem-forms/output-service-java-api-quick#output_service_java_api_quick_start_soap">Output Service API Quick Starts</a></p> 
  <h3 id="create_search_rules_using_the_java_api">Create search rules using the Java API</h3> 
  <p></p> 
  <p>Create search rules by using the Output API (Java):</p> 
  <ol> 
   <li><p>Include project files.</p><p>Include client JAR files, such as adobe-output-client.jar, in your Java project’s class path. </p></li> 
   <li><p>Create an Output Client object.</p> 
    <ul> 
     <li><p>Create a <span class="code">ServiceClientFactory</span> object that contains connection properties.</p></li> 
     <li><p>Create an <span class="code">OutputClient</span> object by using its constructor and passing the <span class="code">ServiceClientFactory</span> object.</p></li> 
    </ul></li> 
   <li><p>Reference an XML data source.</p> 
    <ul> 
     <li><p>Create a <span class="code">java.io.FileInputStream</span> object that represents the XML data source that is used to populate the PDF document by using its constructor and passing a string value that specifies the location of the XML file.</p></li> 
     <li><p>Create a <span class="code">com.adobe.idp.Document</span> object by using its constructor and passing the <span class="code">java.io.FileInputStream</span> object.</p></li> 
    </ul></li> 
   <li><p>Define search rules.</p> 
    <ul> 
     <li><p>Create a <span class="code">Rule</span> object by using its constructor. </p></li> 
     <li><p>Define a text pattern by invoking the <span class="code">Rule</span> object’s <span class="code">setPattern</span> method and passing a string value that specifies a text pattern.</p></li> 
     <li><p>Define the corresponding form design by invoking the <span class="code">Rule</span> object’s <span class="code">setForm</span> method . Pass a string value that specifies the name of the form design.</p></li> 
    </ul> 
    <note> 
     <p>For each text pattern that you want to define, repeat the previous three sub-steps.</p> 
    </note> 
    <ul> 
     <li><p>Create a <span class="code">java.util.List</span> object by using an <span class="code">java.util.ArrayList</span> constructor.</p></li> 
     <li><p>For each <span class="code">Rule</span> object that you created, invoke the <span class="code">java.util.List</span> object’s <span class="code">add</span> method and pass the <span class="code">Rule</span> object.</p></li> 
    </ul></li> 
   <li><p>Set PDF run-time options.</p> 
    <ul> 
     <li><p>Create a <span class="code">PDFOutputOptionsSpec</span> object by using its constructor. </p></li> 
     <li><p>Specify the name and location of the PDF file that the Output service generates by invoking the <span class="code">PDFOutputOptionsSpec</span> object’s <span class="code">setFileURI</span> method. Pass a string value that specifies the location of the PDF file. The File URI option is relative to the J2EE application server hosting AEM Forms, not the client computer. </p></li> 
     <li><p>Set the rules that you defined by invoking the <span class="code">PDFOutputOptionsSpec</span> object’s <span class="code">setRules</span> method. Pass the <span class="code">java.util.List</span> object that contains the <span class="code">Rule</span> objects.</p></li> 
     <li><p>Set the number of bytes to scan for the defined text patterns by invoking the <span class="code">PDFOutputOptionsSpec</span> object’s <span class="code">setLookAhead</span> method. Pass an integer value that represents the numbers of bytes.</p></li> 
    </ul></li> 
   <li><p>Set rendering run-time options.</p> 
    <ul> 
     <li><p>Create a <span class="code">RenderOptionsSpec</span> object by using its constructor.</p></li> 
     <li><p>Cache the form design in order to improve the performance of the Output service by invoking the <span class="code">RenderOptionsSpec</span> object’s <span class="code">setCacheEnabled</span> and passing <span class="code">true</span>.</p></li> 
    </ul></li> 
   <li><p>Generate a PDF document.</p><p>Generate a PDF document that is based on multiple form designs by invoking the <span class="code">OutputClient</span> object’s <span class="code">generatePDFOutput</span> method and passing the following values:</p> 
    <ul> 
     <li><p>A <span class="code">TransformationFormat</span> enumeration value. To generate a PDF document, specify <span class="code">TransformationFormat.PDF</span>. </p></li> 
     <li><p>A string value that specifies the name of the default form design. That is, the form design that is used if a text pattern is not located.</p></li> 
     <li><p>A string value that specifies the content root where the form designs are located.</p></li> 
     <li><p>A <span class="code">PDFOutputOptionsSpec</span> object that contains PDF run-time options.</p></li> 
     <li><p>A <span class="code">RenderOptionsSpec</span> object that contains rendering run-time options.</p></li> 
     <li><p>The <span class="code">com.adobe.idp.Document</span> object that contains the form data that is searched by the Output service for the defined text patterns.</p></li> 
    </ul><p>The <span class="code">generatePDFOutput</span> method returns an <span class="code">OutputResult</span> object that contains the results of the operation.</p></li> 
   <li><p>Retrieve the results of the operation.</p> 
    <ul> 
     <li><p>Create a <span class="code">com.adobe.idp.Document</span> object that represents the status of the <span class="code">generatePDFOutput</span> method by invoking the <span class="code">OutputResult</span> object’s <span class="code">getStatusDoc</span> method.</p></li> 
     <li><p>Create a <span class="code">java.io.File</span> object that will contain the results of the operation. Ensure that the file extension is .xml.</p></li> 
     <li><p>Invoke the <span class="code">com.adobe.idp.Document</span> object’s <span class="code">copyToFile</span> method to copy the contents of the <span class="code">com.adobe.idp.Document</span> object to the file (ensure that you use the <span class="code">com.adobe.idp.Document</span> object that was returned by the <span class="code">getStatusDoc</span> method).</p></li> 
    </ul></li> 
  </ol> 
  <p><strong>See also</strong></p> 
  <p><a href="creating-document-output-streams#summary_of_steps">Summary of steps</a></p> 
  <p><a href="/programming-with-aem-forms/output-service-java-api-quick#quick_start_soap_mode_creating_search_rules_using_the_java_api">Quick Start (EJB mode): Creating search rules using the Java API</a></p> 
  <p><a href="#unresolvedlink-lc-qs-output-ou.xml#ws624e3cba99b79e12e69a9941333732bac8-7d4f.2">Quick Start (SOAP mode): Creating search rules using the Java API</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#including_aem_forms_java_library_files">Including AEM Forms Java library files</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#setting_connection_properties">Setting connection properties</a></p> 
  <h3 id="create_search_rules_using_the_web_service_api">Create search rules using the web service API</h3> 
  <p></p> 
  <p>Create search rules by using the Output API (web service):</p> 
  <ol> 
   <li><p>Include project files.</p><p>Create a Microsoft .NET project that uses MTOM. Ensure that you use the following WSDL definition: <span class="code">http://localhost:8080/soap/services/OutputService?WSDL&amp;lc_version=9.0.1</span>. </p> 
    <note> 
     <p>Replace <span class="code">localhost</span> with the IP address of the server hosting AEM Forms. </p> 
    </note></li> 
   <li><p>Create an Output Client object.</p> 
    <ul> 
     <li><p>Create an <span class="code">OutputServiceClient</span> object by using its default constructor. </p></li> 
     <li><p>Create an <span class="code">OutputServiceClient.Endpoint.Address</span> object by using the <span class="code">System.ServiceModel.EndpointAddress</span> constructor. Pass a string value that specifies the WSDL to the AEM Forms service (for example, <span class="code">http://localhost:8080/soap/services/OutputService?blob=mtom</span>.) You do not need to use the <span class="code">lc_version</span> attribute. This attribute is used when you create a service reference. However, specify <span class="code">?blob=mtom</span> to use MTOM.</p></li> 
     <li><p>Create a <span class="code">System.ServiceModel.BasicHttpBinding</span> object by getting the value of the <span class="code">OutputServiceClient.Endpoint.Binding</span> field. Cast the return value to <span class="code">BasicHttpBinding</span>. </p></li> 
     <li><p>Set the <span class="code">System.ServiceModel.BasicHttpBinding</span> object’s <span class="code">MessageEncoding</span> field to <span class="code">WSMessageEncoding.Mtom</span>. This value ensures that MTOM is used. </p></li> 
     <li><p>Enable basic HTTP authentication by performing the following tasks:</p> 
      <ul> 
       <li><p>Assign the AEM forms user name to the field <span class="code">OutputServiceClient.ClientCredentials.UserName.UserName</span>.</p></li> 
       <li><p>Assign the corresponding password value to the field <span class="code">OutputServiceClient.ClientCredentials.UserName.Password</span>.</p></li> 
       <li><p>Assign the constant value <span class="code">HttpClientCredentialType.Basic</span> to the field <span class="code">BasicHttpBindingSecurity.Transport.ClientCredentialType</span>. </p></li> 
       <li><p>Assign the constant value <span class="code">BasicHttpSecurityMode.TransportCredentialOnly</span> to the field <span class="code">BasicHttpBindingSecurity.Security.Mode</span>. </p></li> 
      </ul></li> 
    </ul></li> 
   <li><p>Reference an XML data source.</p> 
    <ul> 
     <li><p>Create a <span class="code">BLOB</span> object by using its constructor. The <span class="code">BLOB</span> object is used to store data that will be merged with the PDF document.</p></li> 
     <li><p>Create a <span class="code">System.IO.FileStream</span> object by invoking its constructor and passing a string value that represents the file location of the PDF document to encrypt and the mode in which to open the file. </p></li> 
     <li><p>Create a byte array that stores the content of the <span class="code">System.IO.FileStream</span> object. You can determine the size of the byte array by getting the <span class="code">System.IO.FileStream</span> object’s <span class="code">Length</span> property. </p></li> 
     <li><p>Populate the byte array with stream data by invoking the <span class="code">System.IO.FileStream</span> object’s <span class="code">Read</span> method and passing the byte array, the starting position, and the stream length to read.</p></li> 
     <li><p>Populate the <span class="code">BLOB</span> object by assigning its <span class="code">MTOM</span> field with the contents of the byte array.</p></li> 
    </ul></li> 
   <li><p>Define search rules.</p> 
    <ul> 
     <li><p>Create a <span class="code">Rule</span> object by using its constructor. </p></li> 
     <li><p>Define a text pattern by assigning a string value that specifies a text pattern to the <span class="code">Rule</span> object’s <span class="code">pattern</span> data member.</p></li> 
     <li><p>Define the corresponding form design by assigning a string value that specifies the form design to the <span class="code">Rule</span> object’s <span class="code">form</span> data member.</p></li> 
    </ul> 
    <note> 
     <p>For each text pattern that you want to define, repeat the previous three sub-steps.</p> 
    </note> 
    <ul> 
     <li><p>Create a <span class="code">MyArrayOf_xsd_anyType</span> object that stores the rules.</p></li> 
     <li><p>Assign each <span class="code">Rule</span> object to an element of the <span class="code">MyArrayOf_xsd_anyType</span> array. Invoke the <span class="code">MyArrayOf_xsd_anyType</span> object’s <span class="code">Add</span> method for each <span class="code">Rule</span> object.</p></li> 
    </ul></li> 
   <li><p>Set PDF run-time options</p> 
    <ul> 
     <li><p>Create a <span class="code">PDFOutputOptionsSpec</span> object by using its constructor. </p></li> 
     <li><p>Set the file URI option by assigning a string value that specifies the location of the PDF file that the Output service generates to the <span class="code">PDFOutputOptionsSpec</span> object’s <span class="code">fileURI</span> data member. The File URI option is relative to the J2EE application server hosting AEM Forms, not the client computer. </p></li> 
     <li><p>Set the copies option by assigning an integer value that specifies the number of copies that the Output service generates to the <span class="code">PDFOutputOptionsSpec</span> object’s <span class="code">copies</span> data member.</p></li> 
     <li><p>Set the rules that you defined by assigning the <span class="code">MyArrayOf_xsd_anyType</span> object that stores the rules to the <span class="code">PDFOutputOptionsSpec</span> object’s <span class="code">rules</span> data member.</p></li> 
     <li><p>Set the number of bytes to scan for the defined text patterns by assigning an integer value that represents the numbers of bytes to scan to the <span class="code">PDFOutputOptionsSpec</span> object’s <span class="code">lookAhead</span> data method.</p></li> 
    </ul></li> 
   <li><p>Set rendering run-time options</p> 
    <ul> 
     <li><p>Create a <span class="code">RenderOptionsSpec</span> object by using its constructor.</p></li> 
     <li><p>Cache the form design in order to improve the performance of the Output service by assigning the value <span class="code">true</span> to the <span class="code">RenderOptionsSpec</span> object’s <span class="code">cacheEnabled</span> data member.</p></li> 
    </ul> 
    <note> 
     <p>You cannot set the version of the PDF document by using the <span class="code">RenderOptionsSpec</span> object’s <span class="code">pdfVersion</span> member if the input document is an Acrobat form. The output PDF document retains the PDF version of the Acrobat form. Likewise, you cannot set the tagged PDF option by using the <span class="code">RenderOptionsSpec</span> object’s <span class="code">taggedPDF</span> method if the input document is an Acrobat form. </p> 
    </note> 
    <note> 
     <p>You cannot set the linearized PDF option by using the <span class="code">RenderOptionsSpec</span> object’s <span class="code">linearizedPDF</span> member if the input PDF document is certified or digitally signed. For information, see <a href="/programming-with-aem-forms/digitally-signing-certifying-documents#digitally_signing_pdf_documents">Digitally Signing PDF Documents</a>. </p> 
    </note></li> 
   <li><p>Generate a PDF document</p><p>Create a PDF document by invoking the <span class="code">OutputServiceService</span> object’s <span class="code">generatePDFOutput </span>method and passing the following values:</p> 
    <ul> 
     <li><p>A <span class="code">TransformationFormat</span> enumeration value. To generate a PDF document, specify <span class="code">TransformationFormat.PDF</span>. </p></li> 
     <li><p>A string value that specifies the name of the form design.</p></li> 
     <li><p>A string value that specifies the content root where the form design is located.</p></li> 
     <li><p>A <span class="code">PDFOutputOptionsSpec</span> object that contains PDF run-time options.</p></li> 
     <li><p>A <span class="code">RenderOptionsSpec</span> object that contains rendering run-time options.</p></li> 
     <li><p>The <span class="code">BLOB</span> object that contains the XML data source that contains data to merge with the form design.</p></li> 
     <li><p>A <span class="code">BLOB</span> object that is populated by the <span class="code">generatePDFOutput</span> method. The <span class="code">generatePDFOutput</span> method populates this object with generated metadata that describes the document. (This parameter value is required only for web service invocation).</p></li> 
     <li><p>A <span class="code">BLOB</span> object that is populated by the <span class="code">generatePDFOutput</span> method. The <span class="code">generatePDFOutput</span> method populates this object with result data. (This parameter value is required only for web service invocation).</p></li> 
     <li><p>An <span class="code">OutputResult</span> object that contains the results of the operation. (This parameter value is required only for web service invocation).</p></li> 
    </ul> 
    <note> 
     <p>When generating a PDF document by invoking the <span class="code">generatePDFOutput</span> method, be aware that you cannot merge data with an XFA PDF form that is signed, certified, or contains usage rights. For information about usage rights, see <a href="/programming-with-aem-forms/assigning-usage-rights#applying_usage_rights_to_pdf_documents">Applying Usage Rights to PDF Documents</a>.</p> 
    </note></li> 
   <li><p>Retrieve the results of the operation</p> 
    <ul> 
     <li><p>Create a <span class="code">System.IO.FileStream</span> object by invoking its constructor and passing a string value that represents an XML file location that contains result data. Ensure that the file extension is XML.</p></li> 
     <li><p>Create a byte array that stores the data content of the <span class="code">BLOB</span> object that was populated with result data by the <span class="code">OutputServiceService</span> object’s <span class="code">generatePDFOutput</span> method (the eighth parameter). Populate the byte array by getting the value of the <span class="code">BLOB</span> object’s <span class="code">MTOM</span> data member.</p></li> 
     <li><p>Create a <span class="code">System.IO.BinaryWriter</span> object by invoking its constructor and passing the <span class="code">System.IO.FileStream</span> object.</p></li> 
     <li><p>Write the contents of the byte array to the XML file by invoking the <span class="code">System.IO.BinaryWriter</span> object’s <span class="code">Write</span> method and passing the byte array.</p></li> 
    </ul></li> 
  </ol> 
  <p><strong>See also</strong></p> 
  <p><a href="creating-document-output-streams#summary_of_steps">Summary of steps</a></p> 
  <p><a href="#unresolvedlink-lc-qs-output-ou.xml#ws624e3cba99b79e12e69a9941333732bac8-7d4e.2">Quick Start (MTOM): Creating search rules using the web service API</a></p> 
  <p><a href="#unresolvedlink-lc-qs-output-ou.xml#ws624e3cba99b79e12e69a9941333732bac8-7d4d.2">Quick Start (SwaRef): Creating search rules using the web service API</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-web#invoking_aem_forms_using_mtom">Invoking AEM Forms using MTOM</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-web#invoking_aem_forms_using_swaref">Invoking AEM Forms using SwaRef</a></p> 
  <draft-comment lastModifiedBy="khsingh" lastModifiedDate="2017-11-21T06:57:41.789-0500" prevFirstName="Khushwant" prevLastName="Singh" type="remark">
    Content Referenced from lc_ou_flatten_pdf_docs_fp.xml#WS624e3cba99b79e12e69a9941333732bac8-7d5b.2_ver6.1 
  </draft-comment> 
  <h2 id="flattening_pdf_documents">Flattening PDF Documents</h2> 
  <p></p> 
  <p>You can use the Output service to transform an interactive PDF document to a non-interactive PDF. An interactive PDF document lets users enter or modify data that is in the PDF document fields. The process of transforming an interactive PDF document to a non-interactive PDF document is called <i>flattening</i>. When a PDF document is flattened, a user cannot modify the data in the document fields. One reason to flatten a PDF document is to ensure that data cannot be modified.</p> 
  <p>You can flatten the following types of PDF documents:</p> 
  <ul> 
   <li><p>Interactive XFA PDF documents</p></li> 
   <li><p>Acrobat Forms </p></li> 
  </ul> 
  <p>Attempting to flatten a PDF that is a non-interactive PDF document causes an exception. </p> 
  <note> 
   <p>For more information about the Output service, see <a href="http://www.adobe.com/go/learn_aemforms_services_63">Services Reference for AEM Forms</a>.</p> 
  </note> 
  <h3 id="summary_of_steps">Summary of steps</h3> 
  <p></p> 
  <p>To flatten an interactive PDF document to a non-interactive PDF document, perform the following steps:</p> 
  <ol> 
   <li><p>Include project files.</p></li> 
   <li><p>Create an Output Client object. </p></li> 
   <li><p>Retrieve an interactive PDF document.</p></li> 
   <li><p>Transform the PDF document.</p></li> 
   <li><p>Save the non-interactive PDF document as a PDF file.</p></li> 
  </ol> 
  <p><strong>Include project files</strong></p> 
  <p>Include the necessary files in your development project. If you are creating a client application by using Java, include the necessary JAR files. If you are by using web services, make sure that you include the proxy files.</p> 
  <p>The following JAR files must be added to your project’s class path:</p> 
  <ul> 
   <li><p>adobe-livecycle-client.jar</p></li> 
   <li><p>adobe-usermanager-client.jar</p></li> 
   <li><p>adobe-output-client.jar</p></li> 
   <li><p>adobe-utilities.jar (required if AEM Forms is deployed on JBoss)</p></li> 
   <li><p>jbossall-client.jar (required if AEM Forms is deployed on JBoss)</p></li> 
  </ul> 
  <p>if AEM Forms is deployed on a supported J2EE application server that is not JBoss, you will need to replace the adobe-utilities.jar and jbossall-client.jar files with JAR files that are specific to the J2EE application server on which AEM Forms is deployed. For information about the location of all AEM Forms JAR files, see <a href="/programming-with-aem-forms/invoking-aem-forms-using-java#including_aem_forms_java_library_files">Including AEM Forms Java library files</a>.</p> 
  <p><strong>Create an Output Client object</strong></p> 
  <p>Before you can programmatically perform an Output service operation, you must create an Output service client object. If you are using the Java API, create an <span class="code">OutputClient</span> object. If you are using the Output web service API, create an <span class="code">OutputServiceService</span> object. </p> 
  <p><strong>Retrieve an interactive PDF document</strong></p> 
  <p>Retrieve an interactive PDF document that you want to transform to a non-interactive PDF document. Attempting to transform a non-interactive PDF document, causes an exception. </p> 
  <p><strong>Transform the PDF document</strong></p> 
  <p>After you retrieve an interactive PDF document, you can transform it to a non-interactive PDF document. The Output service returns a non-interactive PDF document. </p> 
  <p><strong>Save the non-interactive PDF document as a PDF file</strong></p> 
  <p>You can save the non-interactive PDF document as a PDF file.</p> 
  <p><strong>See also</strong></p> 
  <p><a href="creating-document-output-streams#flatten_a_pdf_document_using_the_java_api">Flatten a PDF document using the Java API</a></p> 
  <p><a href="creating-document-output-streams#flatten_a_pdf_document_using_the_web_service_api">Flatten a PDF document using the web service API</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#including_aem_forms_java_library_files">Including AEM Forms Java library files</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#setting_connection_properties">Setting connection properties</a></p> 
  <p><a href="/programming-with-aem-forms/output-service-java-api-quick#output_service_java_api_quick_start_soap">Output Service API Quick Starts</a></p> 
  <h3 id="flatten_a_pdf_document_using_the_java_api">Flatten a PDF document using the Java API</h3> 
  <p></p> 
  <p>Flatten an interactive PDF document to a non-interactive PDF document by using the Output API (Java):</p> 
  <ol> 
   <li><p>Include project files. </p><p>Include client JAR files, such as adobe-output-client.jar, in your Java project’s class path. </p></li> 
   <li><p>Create an Output Client object. </p> 
    <ul> 
     <li><p>Create a <span class="code">ServiceClientFactory</span> object that contains connection properties.</p></li> 
     <li><p>Create an <span class="code">OutputClient</span> object by using its constructor and passing the <span class="code">ServiceClientFactory</span> object. </p></li> 
    </ul></li> 
   <li><p>Retrieve an interactive PDF document. </p> 
    <ul> 
     <li><p>Create a <span class="code">java.io.FileInputStream</span> object that represents the interactive PDF document to transform by using its constructor and passing a string value that specifies the location of the interactive PDF file.</p></li> 
     <li><p>Create a <span class="code">com.adobe.idp.Document</span> object by using its constructor and passing the <span class="code">java.io.FileInputStream</span> object.</p></li> 
    </ul></li> 
   <li><p>Transform the PDF document. </p><p>Transform the interactive PDF document to a non-interactive PDF document by invoking the <span class="code">OutputServiceService</span> object’s <span class="code">transformPDF</span> method and passing the following values:</p> 
    <ul> 
     <li><p>The <span class="code">com.adobe.idp.Document</span> object that contains the interactive PDF document. </p></li> 
     <li><p>A <span class="code">TransformationFormat</span> enum value. To generate a non-interactive PDF document, specify <span class="code">TransformationFormat.PDF</span>.</p></li> 
     <li><p>A <span class="code">PDFARevisionNumber</span> enum value that specifies the revision number. Because this parameter is meant for a PDF/A document, you can specify <span class="code">null</span>.</p></li> 
     <li><p>A string value that represents the amendment number and year, separated by a colon. Because this parameter is meant for a PDF/A document, you can specify <span class="code">null</span>.</p></li> 
     <li><p>A <span class="code">PDFAConformance</span> enum value that represents the PDF/A conformance level. Because this parameter is meant for a PDF/A document, you can specify <span class="code">null</span>.</p></li> 
    </ul><p>The <span class="code">transformPDF</span> method returns a <span class="code">com.adobe.idp.Document</span> object that contains a non-interactive PDF document.</p></li> 
   <li><p>Save the non-interactive PDF document as a PDF file. </p> 
    <ul> 
     <li><p>Create a <span class="code">java.io.File</span> object and ensure that the file name extension is .pdf.</p></li> 
     <li><p>Invoke the <span class="code">Document</span> object’s <span class="code">copyToFile</span> method to copy the contents of the <span class="code">Document</span> object to the file (ensure that you use the <span class="code">Document</span> object that was returned by the <span class="code">transformPDF</span> method).</p></li> 
    </ul></li> 
  </ol> 
  <p><strong>See also</strong></p> 
  <p><a href="creating-document-output-streams#summary_of_steps">Summary of steps</a></p> 
  <p><a href="/programming-with-aem-forms/output-service-java-api-quick#quick_start_soap_mode_transforming_a_pdf_document_using_the_java_api">Quick Start (EJB mode): Transforming a PDF document using the Java API</a></p> 
  <p><a href="#unresolvedlink-lc-qs-output-ou.xml#ws624e3cba99b79e12e69a9941333732bac8-7d46.2">Quick Start (SOAP mode): Transforming a PDF document using the Java API</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#including_aem_forms_java_library_files">Including AEM Forms Java library files</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-java#setting_connection_properties">Setting connection properties</a></p> 
  <h3 id="flatten_a_pdf_document_using_the_web_service_api">Flatten a PDF document using the web service API</h3> 
  <p></p> 
  <p>Flatten an interactive PDF document to a non-interactive PDF document by using the Output API (web service):</p> 
  <ol> 
   <li><p>Include project files. </p><p>Create a Microsoft .NET project that uses MTOM. Ensure that you use the following WSDL definition: <span class="code">http://localhost:8080/soap/services/OutputService?WSDL&amp;lc_version=9.0.1</span>. </p> 
    <note> 
     <p>Replace <span class="code">localhost</span> with the IP address of the server hosting AEM Forms. </p> 
    </note></li> 
   <li><p>Create an Output Client object. </p> 
    <ul> 
     <li><p>Create an <span class="code">OutputServiceClient</span> object by using its default constructor. </p></li> 
     <li><p>Create an <span class="code">OutputServiceClient.Endpoint.Address</span> object by using the <span class="code">System.ServiceModel.EndpointAddress</span> constructor. Pass a string value that specifies the WSDL to the AEM Forms service (for example, <span class="code">http://localhost:8080/soap/services/OutputService?blob=mtom</span>.) You do not need to use the <span class="code">lc_version</span> attribute. This attribute is used when you create a service reference. However, specify <span class="code">?blob=mtom</span> to use MTOM.</p></li> 
     <li><p>Create a <span class="code">System.ServiceModel.BasicHttpBinding</span> object by getting the value of the <span class="code">OutputServiceClient.Endpoint.Binding</span> field. Cast the return value to <span class="code">BasicHttpBinding</span>. </p></li> 
     <li><p>Set the <span class="code">System.ServiceModel.BasicHttpBinding</span> object’s <span class="code">MessageEncoding</span> field to <span class="code">WSMessageEncoding.Mtom</span>. This value ensures that MTOM is used. </p></li> 
     <li><p>Enable basic HTTP authentication by performing the following tasks:</p> 
      <ul> 
       <li><p>Assign the AEM forms user name to the field <span class="code">OutputServiceClient.ClientCredentials.UserName.UserName</span>.</p></li> 
       <li><p>Assign the corresponding password value to the field <span class="code">OutputServiceClient.ClientCredentials.UserName.Password</span>.</p></li> 
       <li><p>Assign the constant value <span class="code">HttpClientCredentialType.Basic</span> to the field <span class="code">BasicHttpBindingSecurity.Transport.ClientCredentialType</span>. </p></li> 
       <li><p>Assign the constant value <span class="code">BasicHttpSecurityMode.TransportCredentialOnly</span> to the field <span class="code">BasicHttpBindingSecurity.Security.Mode</span>. </p></li> 
      </ul></li> 
    </ul></li> 
   <li><p>Retrieve an interactive PDF document. </p> 
    <ul> 
     <li><p>Create a <span class="code">BLOB</span> object by using its constructor. The <span class="code">BLOB</span> object is used to store the interactive PDF document.</p></li> 
     <li><p>Create a <span class="code">System.IO.FileStream</span> object by invoking its constructor and passing a string value that represents the file location of the interactive PDF document.</p></li> 
     <li><p>Create a byte array that stores the content of the <span class="code">System.IO.FileStream</span> object. You can determine the size of the byte array by getting the <span class="code">System.IO.FileStream</span> object’s <span class="code">Length</span> property. </p></li> 
     <li><p>Populate the byte array with stream data by invoking the <span class="code">System.IO.FileStream</span> object’s <span class="code">Read</span> method and passing the byte array, the starting position, and the stream length to read.</p></li> 
     <li><p>Populate the <span class="code">BLOB</span> object by assigning its <span class="code">MTOM</span> property with the contents of the byte array.</p></li> 
    </ul></li> 
   <li><p>Transform the PDF document. </p><p>Transform the interactive PDF document to a non-interactive PDF document by invoking the <span class="code">OutputClient</span> object’s <span class="code">transformPDF</span> method and passing the following values:</p> 
    <ul> 
     <li><p>A <span class="code">BLOB</span> object that contains the interactive PDF document. </p></li> 
     <li><p>A <span class="code">TransformationFormat</span> enumeration value. To generate a non-interactive PDF document, specify <span class="code">TransformationFormat.PDF</span>.</p></li> 
     <li><p>A <span class="code">PDFARevisionNumber</span> enum value that specifies the revision number. </p></li> 
     <li><p>A Boolean value that specifies whether the <span class="code">PDFARevisionNumber</span> enum value is used. Because this parameter is meant for a PDF/A document, you can specify <span class="code">false</span>.</p></li> 
     <li><p>A string value that represents the amendment number and year, separated by a colon. Because this parameter is meant for a PDF/A document, you can specify <span class="code">null</span>.</p></li> 
     <li><p>A <span class="code">PDFAConformance</span> enum value that represents the PDF/A conformance level. </p></li> 
     <li><p>Boolean value that specifies whether the <span class="code">PDFAConformance</span> enum value is used. Because this parameter is meant for a PDF/A document, you can specify <span class="code">false</span>.</p></li> 
    </ul><p>The <span class="code">transformPDF</span> method returns a <span class="code">BLOB</span> object that contains a non-interactive PDF document.</p></li> 
   <li><p>Save the non-interactive PDF document as a PDF file. </p> 
    <ul> 
     <li><p>Create a <span class="code">System.IO.FileStream</span> object by invoking its constructor and passing a string value that represents the file location of the non-interactive PDF document.</p></li> 
     <li><p>Create a byte array that stores the data content of the <span class="code">BLOB</span> object that was returned by the <span class="code">transformPDF</span> method. Populate the byte array by getting the value of the <span class="code">BLOB</span> object’s <span class="code">MTOM</span> data member.</p></li> 
     <li><p>Create a <span class="code">System.IO.BinaryWriter</span> object by invoking its constructor and passing the <span class="code">System.IO.FileStream</span> object.</p></li> 
     <li><p>Write the contents of the byte array to a PDF file by invoking the <span class="code">System.IO.BinaryWriter</span> object’s <span class="code">Write</span> method and passing the byte array.</p></li> 
    </ul></li> 
  </ol> 
  <p><strong>See also</strong></p> 
  <p><a href="creating-document-output-streams#summary_of_steps">Summary of steps</a></p> 
  <p><a href="#unresolvedlink-lc-qs-output-ou.xml#ws624e3cba99b79e12e69a9941333732bac8-7d44.2">Quick Start (MTOM): Transforming a PDF document using the web service API</a></p> 
  <p><a href="#unresolvedlink-lc-qs-output-ou.xml#ws624e3cba99b79e12e69a9941333732bac8-7d43.2">Quick Start (SwaRef): Transforming a PDF document using the web service API</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-web#invoking_aem_forms_using_mtom">Invoking AEM Forms using MTOM</a></p> 
  <p><a href="/programming-with-aem-forms/invoking-aem-forms-using-web#invoking_aem_forms_using_swaref">Invoking AEM Forms using SwaRef</a></p> 
 </body> 
</html>