<?xml version="1.1" encoding="UTF-8" standalone="yes"?>
<html>
 <head>
  <meta content="not_checked" name="acrolinxStatus" />
  <meta content="light" name="heroGradient" />
  <meta content="841" name="acrolinxWords" />
  <meta content="2016-06-30T09:30:15.136-0400" name="lastPublishExternalDate" />
  <meta content="help/components/pages/article-3" name="sling:resourceType" />
  <meta content="0abc1adb-b430-4f67-8b5d-4ce68d078adf" name="jcr:predecessors" />
  <meta content="http://checkstyle.corp.adobe.com:8031/output/en/submit_store_data_crx_repository_admin_5e12de0b318c6865_2068_report.xml" name="acrolinxReportURL" />
  <meta content="2017-11-30T06:08:25.063-0500" name="cq:lastModified" />
  <meta content="34" name="acrolinxSentences" />
  <meta content="" name="publishExternalURL" />
  <meta content="/etc/designs/help" name="cq:designPath" />
  <meta content="false" name="doNotLocalize" />
  <meta content="2016-09-05T07:19:52.137-0400" name="unpublishExternalDate" />
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/FORMS" name="primaryProductTag" />
  <meta content="true" name="jcr:isCheckedOut" />
  <meta content="content_type:reference;products:SG_EXPERIENCEMANAGER/6.4/FORMS" name="cq:tags" />
  <meta content="admin" name="jcr:createdBy" />
  <meta content="carlino" name="cq:lastModifiedBy" />
  <meta content="mix:versionable" name="jcr:mixinTypes" />
  <meta content="2d17620a-55e5-4d91-8ac7-2d629f59ead7" name="jcr:uuid" />
  <meta content="red" name="acrolinxPageStatus" />
  <meta content="vishgupt" name="acrolinxLastCheckedBy" />
  <meta content="2016-04-20T09:33:28.842-0400" name="firstPublishExternalDate" />
  <meta content="2019-02-11T20:42:47.347-0500" name="jcr:created" />
  <meta content="en_us" name="jcr:language" />
  <meta content="2015-11-25T06:06:19.148-0500" name="lastPublishQADate" />
  <meta content="true" name="preview" />
  <meta content="2016-05-31T06:43:44.809-0400" name="acrolinxDate" />
  <meta content="" name="jcr:baseVersion" />
  <meta content="video" name="pageLayout" />
  <meta content="left" name="sideColumn" />
  <meta content="2016-05-09T06:32:37.790-0400" name="locHandOffDate" />
  <meta content="/content/help/en/experience-manager/6-4/forms/using/morehelp/publish;/content/help/en/experience-manager/6-4/forms/using/morehelp/publish" name="moreHelpPaths" />
  <meta content="DO NOT PUBLISH - Submitting and storing content in JCR repository" name="jcr:title" />
  <meta content="vishgupt@adobe.com" name="lr_lastReplicatedBy" />
  <meta content="You can configure store content path for your Adaptive Forms to configure to store form data in JCR repository on form submission. " name="seoDescription" />
  <meta content="" name="jcr:versionHistory" />
  <meta content="/apps/help/templates/article-3" name="cq:template" />
  <meta content="" name="jcr:primaryType" />
  <meta content="Submit and store data in CRX repository" name="navTitle" />
 </head>
 <body>
  <draft-comment lastModifiedBy="vishgupt" lastModifiedDate="2017-11-30T06:08:24.560-0500" prevFirstName="Vishal." prevLastName="Gupta" type="remark">
   <p>Unpulished this article as we do not recommend storing forms data in JCR repo.</p> 
  </draft-comment>
  <p>Adaptive forms provides several out-of-the-box submit actions for submitting form data to different endpoints or workflows. This article discusses how you can use the Store content (deprecated) submit action to store form data in JCR repository. Also, it discusses how Store PDF (deprecated) submit action works.</p> 
  <note>
   <p>In a production environment, it is recommended not to store submitted form data in AEM repository. Submit actions such as Store Content (deprecated), Store PDF (deprecated), and Forms Portal store form data in AEM repository. These submit actions are meant only for demonstration purposes. Instead in a production environment, you must write a custom submit action that stores forms data in a more secure storage like your enterprise database. For more information, see <a href="../../../forms/using/custom-submit-action-form.md" target="_blank">Writing custom Submit action for adaptive forms</a>.</p> 
  </note>
  <h2>Storing content in the JCR repository</h2>
  <p>Store content (deprecated) action is one of the submit actions that can be used for storing form data in the JCR repository. When Store content (deprecated) action is configured on an Adaptive Form, the form field values are stored as properties on the JCR node at the configured store content path on form submission. The data is also captured in the XML that gets stored as <span class="code">jcr:data</span> property on the node.</p> 
  <p>In case of an XFA- or XSD-based Adaptive Form, only the unbound fields are stored as properties on the node. The file attachments in the Adaptive Form are stored as children nodes. A child node is created for each file attachment component and the files are stored under the corresponding child component nodes.</p> 
  <p>Once the data is stored, the user is redirected to the configured Thank you page. If the Thank you page is not configured, the user is redirected to the out-of-the-box Thank you Page. The path to the newly created node is passed as a URL parameter in the Thank you Page. </p> 
  <img alt="Node Structure of submitted form data " captionBottom="Node Structure of submitted form data " imageRotate="0" src="assets/crxstorewithfa.png" title="Node Structure of submitted form data" />
  <img alt="Properties of the node created for form submission" captionBottom="Node Properties" imageRotate="0" src="assets/crxsubmitprop.png" title="Node Properties" />
  <h3>Configuring store content path</h3>
  <p>The Store content (deprecated) submit action requires you to configure the store content path, which refers to the node in the repository where data needs to be stored. You can configure it in the <strong>Start of Adaptive Form</strong> dialog, at the top of an adaptive form.</p> 
  <img alt="Configuration for Store content path submit action" captionBottom="Configuration for Store content path submit action" imageRotate="0" src="assets/path1.png" title="Configuration for Store content path submit action" />
  <h4>Specifications of store content path</h4>
  <p>Consider the following when configuring the store content path:<br /> </p> 
  <ul> 
   <li>The user submitting data should have <span class="code">add_node</span> permission on the parent folder specified as the store content path. Here, the parent folder in the example used in this article is <span class="code">/content/usergenerated/content/forms/af/HMRCDemo</span>. The <span class="code">HMRCDemo</span> folder should have the <span class="code">addChildNodes</span> permission. This permission can also be inherited from any ancestor node of the parent folder.</li> 
   <li>If the path ends with <span class="code">/</span>, a unique node is created under the configured store content path and the data is stored on that unique node.<br /> If the path does not end with <span class="code">/</span>, the data is stored on the node at the configured path. No unique node is generated.<br /> </li> 
   <li>The node to which the store content path refers to, should be of the type <span class="code">sling:folder</span>. For example, in this example, <span class="code">HMRCDemo</span> is of the type <span class="code">sling:folder</span>.</li> 
  </ul> 
  <img alt="Store path node configured for store content submit action" captionBottom="Store path node" imageRotate="0" src="assets/slingfolder.png" title="Store path node" />
  <img alt="ACL for store path node configured for store content submit action" captionBottom="ACL for store path node" imageRotate="0" src="assets/access.png" title="ACL for store path node" />
  <note>
   <p>If there are multiple publish nodes linked to the same author node as publish far and are not clustered, the data submitted on one publish node will not be available on another publish node. In such cases, you need to configure Reverse Replication Agent associated with the Author instance. It ensures publishing the submitted nodes to all the publish instances linked to the author instance. For more information on configuring the Reverse Application Agent, see <a href="http://docs.adobe.com/docs/en/cq/current/deploying/replication.html" target="_blank">http://dev.day.com/docs/en/cq/current/deploying/replication.html</a></p> 
  </note>
  <h2>Store PDF (deprecated) submit action</h2>
  <p>The Store PDF (deprecated) submit action is available as part of the AEM Forms add-on package and applies only to XFA-based adaptive forms. In addition to storing the data on the node, the Store PDF (deprecated) submit action merges the form data with the XDP to generate and store a PDF at the configured store content path. If the form is configured to use Adobe Document Cloud eSign services for signing the PDF, the signed PDF is stored in the configured node as a child node.</p> 
  <draft-comment type="draft">
   <related-links>
    <a href="../../../forms/using/custom-submit-action-form.md" target="_blank">Submitting and storing content in a custom data store</a>
    <a href="../../../forms/using/form-submission-receipt-via-email.md" target="_blank">Sending a form submission acknowledgement via email</a>
    <a href="../../../forms/using/submit-form-data-livecycle-process.md" target="_blank">Submitting and processing your form data using forms workflows</a>
    <a href="/forms/using/aem-workflows-submit-process-form" target="_blank">Submitting and processing form data using AEM workflows</a>
    <a href="../../../forms/using/aem-document-services-programmatically.md" target="_blank">Using AEM Document Services programmatically</a>
    <a href="/forms/using/aem-workflows-using-document-services" target="_blank">Creating AEM workflows that use AEM Document Services</a>
   </related-links>
  </draft-comment>
 </body>
</html>