<?xml version="1.1" encoding="UTF-8" standalone="yes"?> 
<html> 
 <head> 
  <meta content="" name="jcr:versionHistory" /> 
  <meta content="vishgupt" name="cq:lastReplicatedBy" /> 
  <meta content="vishgupt" name="acrolinxLastCheckedBy" /> 
  <meta content="vishgupt" name="cq:lastModifiedBy" /> 
  <meta content="2018-04-30T03:14:55.034-0400" name="locHandOffDate" /> 
  <meta content="2018-03-15T09:02:44.622-0400" name="jcr:created" /> 
  <meta content="https://helpx.adobe.com/experience-manager/6-4/forms/using/user-management-handling-user-data.html" name="publishExternalURL" /> 
  <meta content="left" name="sideColumn" /> 
  <meta content="video" name="pageLayout" /> 
  <meta content="topic_tags:grdp;products:SG_EXPERIENCEMANAGER/6.4/FORMS" name="cq:tags" /> 
  <meta content="2018-05-03T06:24:33.316-0400" name="lastPublishExternalDate" /> 
  <meta content="vishgupt@adobe.com" name="lr_lastReplicatedBy" /> 
  <meta content="2018-04-19T10:46:22.111-0400" name="acrolinxDate" /> 
  <meta content="false" name="doNotLocalize" /> 
  <meta content="924" name="acrolinxWords" /> 
  <meta content="/content/help/en/experience-manager/6-4/morehelp/grdp;/content/help/en/experience-manager/6-4/forms/morehelp/grdp" name="moreHelpPaths" /> 
  <meta content="2018-04-06T04:29:03.706-0400" name="firstPublishExternalDate" /> 
  <meta content="2018-05-03T06:24:33.316-0400" name="publishExternalDate" /> 
  <meta content="2018-05-03T06:24:33.641-0400" name="cq:lastReplicated" /> 
  <meta content="" name="jcr:primaryType" /> 
  <meta content="green" name="acrolinxPageStatus" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4" name="primaryProductTag" /> 
  <meta content="Forms user management | Handling user data" name="jcr:title" /> 
  <meta content="en_us" name="jcr:language" /> 
  <meta content="light" name="heroGradient" /> 
  <meta content="80" name="acrolinxSentences" /> 
  <meta content="checked_not_improved" name="acrolinxStatus" /> 
  <meta content="cac77001-c0bf-4526-a0cf-08c2da364372" name="jcr:predecessors" /> 
  <meta content="true" name="jcr:isCheckedOut" /> 
  <meta content="http://acrolinx.corp.adobe.com:8031/output/en/user_management_handling_user_data_krs_workflow_0eaa5f398ed6741b_629_report.xml" name="acrolinxReportURL" /> 
  <meta content="/apps/help/templates/article-3" name="cq:template" /> 
  <meta content="/etc/designs/help" name="cq:designPath" /> 
  <meta content="admin" name="jcr:createdBy" /> 
  <meta content="fe922428-5b79-4ae8-a423-75fc24778c43" name="jcr:uuid" /> 
  <meta content="" name="jcr:baseVersion" /> 
  <meta content="2018-05-03T06:24:33.332-0400" name="cq:lastModified" /> 
  <meta content="en" name="pageCreatedAt" /> 
  <meta content="Activate" name="cq:lastReplicationAction" /> 
  <meta content="help/components/pages/article-3" name="sling:resourceType" /> 
  <meta content="2018-05-03T06:24:33.316-0400" name="topicBrowsingSortDate" /> 
  <meta content="mix:versionable" name="jcr:mixinTypes" /> 
 </head> 
 <body> 
  <p>User management is an AEM Forms JEE component that allows creating, managing, and authorizing AEM Forms users to access AEM Forms. User management uses domains as directory for obtaining user information. The following domain types are supported:</p> 
  <p><strong>Local domains</strong>: This type of domain is not connected to a third-party storage system. Instead, users and groups are created locally and reside in the User Management database. Passwords are stored locally, and authentication is done using a local database.</p> 
  <p><strong>Hybrid domains</strong>: This type of domain is not connected to a third-party storage system. Instead, users and groups are created locally and reside in the User Management database. Unlike local domains, hybrid domains use an external authentication provider, which can be LDAP, Kerberos, SAML, or a custom authentication provider.</p> 
  <p><strong>Enterprise domains</strong>: Consist of users and groups that reside in a third-party storage system, such as an LDAP directory. User Management does not write to the third-party storage system. Instead, User Management synchronizes the user and group information with the User Management database. Enterprise domains also use an external authentication provider, which can be LDAP, Kerberos, SAML, or a custom authentication provider.</p> 
  <p>For more information about how user management works and configured, see <a href="/forms/using/admin-help/topics" target="_blank">AEM Forms JEE administration help</a>.</p> 
  <h2>User data and data stores</h2> 
  <p>User management stores user data in a database, such as My Sql, Oracle, MS SQL Server, and IBM DB2. In addition, any user who has logged in at least once in Forms applications on AEM author at <span class="code">http://[<em>server</em>]:[<em>host</em>]/lc</span>, the user gets created in AEM repository. Therefore, user management is stored in the following data stores:</p> 
  <ul> 
   <li>Database</li> 
   <li>AEM repository</li> 
   <li>Third-party storage like LDAP directory</li> 
  </ul> 
  <note> 
   <p>Data stored in third-party storages is out of scope for this document. Contact the third-party vendor directly to manage user data in such storages.</p> 
  </note> 
  <h3>Database</h3> 
  <p>User management stores user data in the following database tables:</p> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <td>Database table</td> 
     <td>Description</td> 
    </tr> 
    <tr> 
     <td><span class="code">EdcPrincipalEntity</span></td> 
     <td><p>Stores information about principal entities. A principal can be a user, a group, or a role.</p> <p> </p> </td> 
    </tr> 
    <tr> 
     <td><span class="code">EdcPrincipalUserEntity</span></td> 
     <td>Stores personally identifiable information (PII) of users. It contains an entry for every user from local, enterprise, and hybrid domains.</td> 
    </tr> 
    <tr> 
     <td><p><span class="code">EdcPrincipalLocalAccountEntity</span></p> <p><code class="code">EdcPrincipalLocalAccount
        <discoiqbr /> </code>(Oracle and MS SQL databases)</p> </td> 
     <td>Stores data only for local users.</td> 
    </tr> 
    <tr> 
     <td><p><span class="code">EdcPrincipalEmailAliasEntity</span></p> <p><code class="code">EdcPrincipalEmailAliasEn 
        <discoiqbr /> </code>(Oracle and MS SQL databases)</p> </td> 
     <td>Contains entries of all users from local, enterprise, and hybrid domains. It contains user email IDs.</td> 
    </tr> 
    <tr> 
     <td><p><span class="code">EdcPrincipalGrpCtmntEntity</span></p> <p><span class="code">EdcPrincipalGrpCtmntEnti</span><br /> (Oracle and MS SQL databases)</p> </td> 
     <td>Stores the mapping between users and groups.</td> 
    </tr> 
    <tr> 
     <td><span class="code">EdcPrincipalRoleEntity</span></td> 
     <td>Stores the mapping between roles and principal for both users and groups.</td> 
    </tr> 
    <tr> 
     <td><span class="code">EdcPriResPrmEntity</span></td> 
     <td>Stores the mapping between principal and permissions for both users and groups.</td> 
    </tr> 
    <tr> 
     <td><p><span class="code">EdcPrincipalMappingEntity</span></p> <p><span class="code">EdcPrincipalMappingEntit</span><br /> (Oracle and MS SQL databases)</p> </td> 
     <td>Stores old and new attribute values corresponding to a principal.<br /> </td> 
    </tr> 
   </tbody> 
  </table> 
  <h3>AEM repository</h3> 
  <p>User management data for users who have at least once accessed the Forms applications under <span class="code">http://[<em>server</em>]:[<em>host</em>]/lc</span> is stored in AEM repository as well.</p> 
  <h2>Access and delete user data</h2> 
  <p>You can access and export user management data for users in the user management databases and AEM repository, and if required, delete it permanently.</p> 
  <h3>Database</h3> 
  <p>To export or delete user data from user management database, you need to connect to the database using a database client and find out the principal ID based on some PII of the user. For example, to retrieve the principal ID of a user using a login ID, run the following <span class="code">select</span> command on the database.</p> 
  <p>In the <span class="code">select</span> command, replace the <span class="code">&amp;lt;user_login_id&amp;gt;</span> with the login ID of the user whose principal ID you want to retrieve.</p> 
  <codeblock gutter="true" class="syntax sql">
    select&amp;nbsp;refprincipalid&amp;nbsp;from&amp;nbsp;EdcPrincipalUserEntity&amp;nbsp;where&amp;nbsp;uidstring&amp;nbsp;=&amp;nbsp;&lt;user_login_id&gt; 
  </codeblock> 
  <p>Once you know the principal ID, you can export or delete the user data.</p> 
  <h4>Export user data</h4> 
  <p>Run the following database commands to export user management data for a principal ID from database tables. In the <span class="code">select</span> command, replace <span class="code">&amp;lt;principal_id&amp;gt;</span> with the principal ID of the user whose data you want to export.</p> 
  <note> 
   <p>The following commands use database table names in My SQL and IBM DB2 databases. When running these commands on Oracle and MS SQL databases, replace the following table names in the commands:</p> 
   <ul> 
    <li>Replace <span class="code">EdcPrincipalLocalAccountEntity</span> with <span class="code">EdcPrincipalLocalAccount</span></li> 
    <li>Replace <span class="code">EdcPrincipalEmailAliasEntity</span> with <span class="code">EdcPrincipalEmailAliasEn</span></li> 
    <li>Replace <span class="code">EdcPrincipalMappingEntity</span> with <span class="code">EdcPrincipalMappingEntit</span></li> 
    <li>Replace <span class="code">EdcPrincipalGrpCtmntEntity</span> with <span class="code">EdcPrincipalGrpCtmntEnti</span></li> 
   </ul> 
   <p> </p> 
  </note> 
  <codeblock class="syntax sql">
    Select&amp;nbsp;*&amp;nbsp;from&amp;nbsp;EdcPrincipalLocalAccountEntity&amp;nbsp;where&amp;nbsp;refuserprincipalid&amp;nbsp;in&amp;nbsp;(Select&amp;nbsp;id&amp;nbsp;from&amp;nbsp;EdcPrincipalUserEntity&amp;nbsp;where&amp;nbsp;refprincipalid&amp;nbsp;in&amp;nbsp;(Select&amp;nbsp;id&amp;nbsp;from&amp;nbsp;EDCPRINCIPALENTITY&amp;nbsp;where&amp;nbsp;id='&lt;principal_id&gt;'));!!discoiqbr!!!!discoiqbr!!Select&amp;nbsp;*&amp;nbsp;from&amp;nbsp;EdcPrincipalEmailAliasEntity&amp;nbsp;where&amp;nbsp;refprincipalid&amp;nbsp;in&amp;nbsp;(Select&amp;nbsp;id&amp;nbsp;from&amp;nbsp;EdcPrincipalEntity&amp;nbsp;where&amp;nbsp;id='&lt;principal_id&gt;');!!discoiqbr!!!!discoiqbr!!Select&amp;nbsp;*&amp;nbsp;from&amp;nbsp;EdcPrincipalRoleEntity&amp;nbsp;where&amp;nbsp;refprincipalid&amp;nbsp;in&amp;nbsp;(Select&amp;nbsp;id&amp;nbsp;from&amp;nbsp;EdcPrincipalEntity&amp;nbsp;where&amp;nbsp;id='&lt;principal_id&gt;');!!discoiqbr!!!!discoiqbr!!Select&amp;nbsp;*&amp;nbsp;from&amp;nbsp;EdcPriResPrmEntity&amp;nbsp;where&amp;nbsp;refprinid&amp;nbsp;in&amp;nbsp;(Select&amp;nbsp;id&amp;nbsp;from&amp;nbsp;EdcPrincipalEntity&amp;nbsp;where&amp;nbsp;id='&lt;principal_id&gt;');!!discoiqbr!!!!discoiqbr!!Select&amp;nbsp;*&amp;nbsp;from&amp;nbsp;EdcPrincipalUserEntity&amp;nbsp;where&amp;nbsp;refprincipalid&amp;nbsp;in&amp;nbsp;(Select&amp;nbsp;id&amp;nbsp;from&amp;nbsp;EdcPrincipalEntity&amp;nbsp;where&amp;nbsp;id='&lt;principal_id&gt;');!!discoiqbr!!!!discoiqbr!!Select&amp;nbsp;*&amp;nbsp;from&amp;nbsp;EdcPrincipalMappingEntity&amp;nbsp;where&amp;nbsp;refprincipalid&amp;nbsp;in&amp;nbsp;(Select&amp;nbsp;id&amp;nbsp;from&amp;nbsp;EdcPrincipalEntity&amp;nbsp;where&amp;nbsp;id='&lt;principal_id&gt;');!!discoiqbr!!!!discoiqbr!!Select&amp;nbsp;*&amp;nbsp;from&amp;nbsp;EdcPrincipalGrpCtmntEntity&amp;nbsp;where&amp;nbsp;refchildprincipalid&amp;nbsp;in&amp;nbsp;(Select&amp;nbsp;id&amp;nbsp;from&amp;nbsp;EdcPrincipalEntity&amp;nbsp;where&amp;nbsp;id='&lt;principal_id&gt;');!!discoiqbr!!!!discoiqbr!!Select&amp;nbsp;*&amp;nbsp;from&amp;nbsp;EdcPrincipalEntity&amp;nbsp;where&amp;nbsp;id='&lt;principal_id&gt;'; 
  </codeblock> 
  <h4>Delete user data</h4> 
  <p>Do the following to delete user management data for a principal ID from database tables.</p> 
  <ol> 
   <li><p>Delete user data from AEM repository, if applicable, as described in <a href="../../forms/using/user-management-handling-user-data.md#delete-aem">Delete user data</a>.</p> </li> 
   <li><p>Shut down the AEM Forms server.</p> </li> 
   <li><p>Run the following database commands to delete user management data for a principal ID from database tables. In the <span class="code">Delete</span> command, replace <span class="code">&amp;lt;principal_id&amp;gt;</span> with the principal ID of the user whose data you want to delete.</p> 
    <codeblock class="syntax sql">
      Delete&amp;nbsp;from&amp;nbsp;EdcPrincipalLocalAccountEntity&amp;nbsp;where&amp;nbsp;refuserprincipalid&amp;nbsp;in&amp;nbsp;(Select&amp;nbsp;id&amp;nbsp;from&amp;nbsp;EdcPrincipalUserEntity&amp;nbsp;where&amp;nbsp;refprincipalid&amp;nbsp;in&amp;nbsp;(select&amp;nbsp;id&amp;nbsp;from&amp;nbsp;EdcPrincipalEntity&amp;nbsp;where&amp;nbsp;id='&lt;principal_id&gt;'));!!discoiqbr!!!!discoiqbr!!Delete&amp;nbsp;from&amp;nbsp;EdcPrincipalEmailAliasEntity&amp;nbsp;where&amp;nbsp;refprincipalid&amp;nbsp;in&amp;nbsp;(Select&amp;nbsp;id&amp;nbsp;from&amp;nbsp;EdcPrincipalEntity&amp;nbsp;where&amp;nbsp;id='&lt;principal_id&gt;');!!discoiqbr!!!!discoiqbr!!Delete&amp;nbsp;from&amp;nbsp;EdcPrincipalRoleEntity&amp;nbsp;where&amp;nbsp;refprincipalid&amp;nbsp;in&amp;nbsp;(Select&amp;nbsp;id&amp;nbsp;from&amp;nbsp;EdcPrincipalEntity&amp;nbsp;where&amp;nbsp;id='&lt;principal_id&gt;');!!discoiqbr!!!!discoiqbr!!Delete&amp;nbsp;from&amp;nbsp;EdcPriResPrmEntity&amp;nbsp;where&amp;nbsp;refprinid&amp;nbsp;in&amp;nbsp;(Select&amp;nbsp;id&amp;nbsp;from&amp;nbsp;EdcPrincipalEntity&amp;nbsp;where&amp;nbsp;id='&lt;principal_id&gt;');!!discoiqbr!!!!discoiqbr!!Delete&amp;nbsp;from&amp;nbsp;EdcPrincipalUserEntity&amp;nbsp;where&amp;nbsp;refprincipalid&amp;nbsp;in&amp;nbsp;(Select&amp;nbsp;id&amp;nbsp;from&amp;nbsp;EdcPrincipalEntity&amp;nbsp;where&amp;nbsp;id='&lt;principal_id&gt;');!!discoiqbr!!!!discoiqbr!!Delete&amp;nbsp;from&amp;nbsp;EdcPrincipalMappingEntity&amp;nbsp;where&amp;nbsp;refprincipalid&amp;nbsp;in&amp;nbsp;(Select&amp;nbsp;id&amp;nbsp;from&amp;nbsp;EdcPrincipalEntity&amp;nbsp;where&amp;nbsp;id='&lt;principal_id&gt;');!!discoiqbr!!!!discoiqbr!!Delete&amp;nbsp;from&amp;nbsp;EdcPrincipalGrpCtmntEntity&amp;nbsp;where&amp;nbsp;refchildprincipalid&amp;nbsp;in&amp;nbsp;(Select&amp;nbsp;id&amp;nbsp;from&amp;nbsp;EdcPrincipalEntity&amp;nbsp;where&amp;nbsp;id='&lt;principal_id&gt;');!!discoiqbr!!!!discoiqbr!!Delete&amp;nbsp;from&amp;nbsp;EdcPrincipalEntity&amp;nbsp;where&amp;nbsp;id='&lt;principal_id&gt;'; 
    </codeblock></li> 
   <li><p>Start the AEM Forms server.</p> </li> 
  </ol> 
  <h3>AEM repository</h3> 
  <p>Forms JEE users have their data in AEM repository if they have accessed the AEM Forms author instance at least one. You can access and delete their user data from AEM repository.</p> 
  <h4>Access user data</h4> 
  <p>To view user created in AEM repository, log into <span class="code">http://[<em>server</em>]:[<em>port</em>]/lc/useradmin</span> with AEM administrator credentials. Note that <span class="code"><em>server</em></span> and <span class="code"><em>port</em></span> in the URL are that of the AEM author instance. Here, you can search for users with their username. Double-click a user to view information like properties, permissions, and groups for the user. The <span class="code">Path</span> property for a user specifies the path to the user node created in AEM repository.</p> 
  <h4 id="delete-aem">Delete user data</h4> 
  <p>To delete a user:</p> 
  <ol> 
   <li><p>Go to <span class="code">http://[<em>server</em>]:[<em>port</em>]/lc/useradmin</span> with AEM administrator credentials.</p> </li> 
   <li><p>Search for a user and double-click the username to open user properties. Copy the <span class="code">Path</span> property.</p> </li> 
   <li><p>Go to AEM CRX DELite at <span class="code">http://[<em>server</em>]:[<em>port</em>]/lc/crx/de/index.jsp</span> and navigate or search the user path.</p> </li> 
   <li><p>Delete the path and click <span class="uicontrol">Save All</span> to permanently delete the user from AEM repository. </p> </li> 
  </ol> 
 </body> 
</html>