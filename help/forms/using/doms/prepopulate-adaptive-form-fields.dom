<?xml version="1.1" encoding="UTF-8" standalone="yes"?> 
<html> 
 <head> 
  <meta content="en_us" name="jcr:language" /> 
  <meta content="2018-11-15T01:12:23.533-0500" name="lastPublishExternalDate" /> 
  <meta content="http://acrolinx.corp.adobe.com:8031/output/en/prepopulate_adaptive_form_fields_krs_workflow_a9d8be2d910fe9fc_664_report.xml" name="acrolinxReportURL" /> 
  <meta content="/etc/designs/help" name="cq:designPath" /> 
  <meta content="not_checked" name="acrolinxStatus" /> 
  <meta content="/content/help/en/experience-manager/6-4/forms/morehelp/develop;/content/help/en/experience-manager/6-4/forms/morehelp/develop" name="moreHelpPaths" /> 
  <meta content="Use existing data to prefill fields of an adaptive form." name="jcr:description" /> 
  <meta content="2018-01-06T19:01:34.798-0500" name="jcr:created" /> 
  <meta content="khsingh" name="cq:lastReplicatedBy" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/FORMS;topic_tags:develop" name="cq:tags" /> 
  <meta content="2018-11-19T08:16:52.117-0500" name="locHandOffDate" /> 
  <meta content="admin" name="jcr:createdBy" /> 
  <meta content="left" name="sideColumn" /> 
  <meta content="2018-11-19T08:16:52.117-0500" name="cq:lastModified" /> 
  <meta content="false" name="isReadyForLocalization" /> 
  <meta content="locales:fr;locales:de;locales:ja" name="locLangTag" /> 
  <meta content="/apps/help/templates/article-3" name="cq:template" /> 
  <meta content="light" name="heroGradient" /> 
  <meta content="Prefill adaptive forms" name="navTitle" /> 
  <meta content="khsingh" name="cq:lastModifiedBy" /> 
  <meta content="2015-06-12T04:26:47.394-0400" name="lastPublishQADate" /> 
  <meta content="2018-11-15T01:12:23.533-0500" name="publishExternalDate" /> 
  <meta content="" name="jcr:baseVersion" /> 
  <meta content="a6a9edec-c105-475c-bade-b4695ee0ab21" name="jcr:predecessors" /> 
  <meta content="https://helpx.adobe.com/experience-manager/6-4/forms/using/prepopulate-adaptive-form-fields.html" name="publishExternalURL" /> 
  <meta content="4064d36a-9dc3-41d9-bba4-fe142d7297bc" name="jcr:uuid" /> 
  <meta content="green" name="acrolinxPageStatus" /> 
  <meta content="" name="jcr:versionHistory" /> 
  <meta content="true" name="jcr:isCheckedOut" /> 
  <meta content="Activate" name="cq:lastReplicationAction" /> 
  <meta content="With adaptive forms, you users can prefill basic information in a form by logging in with their social profiles. This article describes how you can accomplish this." name="seoDescription" /> 
  <meta content="" name="jcr:primaryType" /> 
  <meta content="false" name="doNotLocalize" /> 
  <meta content="video" name="pageLayout" /> 
  <meta content="help/components/pages/article-3" name="sling:resourceType" /> 
  <meta content="2016-04-20T09:47:25.584-0400" name="firstPublishExternalDate" /> 
  <meta content="khsingh@adobe.com" name="lr_lastReplicatedBy" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/FORMS" name="primaryProductTag" /> 
  <meta content="2018-11-15T01:12:23.613-0500" name="cq:lastReplicated" /> 
  <meta content="156" name="acrolinxSentences" /> 
  <meta content="2149" name="acrolinxWords" /> 
  <meta content="khsingh" name="acrolinxLastCheckedBy" /> 
  <meta content="2018-09-11T04:31:28.015-0400" name="acrolinxDate" /> 
  <meta content="mix:versionable" name="jcr:mixinTypes" /> 
  <meta content="Prefill adaptive form fields" name="jcr:title" /> 
  <meta content="2018-11-15T01:12:23.533-0500" name="topicBrowsingSortDate" /> 
 </head> 
 <body> 
  <h2>Introduction</h2> 
  <p>You can prefill the fields of an adaptive form using existing data. When a user opens a form, the values for those fields are prefilled. To prefill data in an adaptive form, make the user data available as a prefill XML / JSON in the format that adheres to prefill data structure of adaptive forms.</p> 
  <h2 id="The prefill structure">Structure of prefill data</h2> 
  <p>An adaptive form can have mix of bound and unbound fields. Bound fields are fields which are dragged from the Content Finder tab and contain non-empty <span class="code">bindRef</span> property value in the field edit dialog. Unbound fields are dragged directly from the component browser of Sidekick and have an empty <span class="code">bindRef</span> value. </p> 
  <p>You can prefill both bound and unbound fields of an adaptive form. The prefill data contains the afBoundData and afUnBoundData sections to prefill both bound and unbound fields of an adaptive form. The <span class="code">afBoundData</span> section contains the prefill data for bound fields and panels. This data must be compliant with the associated form model schema:</p> 
  <ul> 
   <li>For adaptive forms using the <a href="../../forms/using/prepopulate-adaptive-form-fields.md">XFA form template</a>, use the prefill XML compliant with the data schema of the XFA template.</li> 
   <li>For adaptive forms using <a href="../../forms/using/prepopulate-adaptive-form-fields.md#main-pars-header-3">XML schema</a>, use the prefill XML compliant with the XML schema structure.</li> 
   <li>For adaptive forms using <a href="../../forms/using/prepopulate-adaptive-form-fields.md#main-pars-header-1478369221">JSON schema</a>, use the prefill JSON compliant with the JSON schema.</li> 
   <li>For adaptive forms using FDM schema, use the prefill JSON compliant with FDM schema.</li> 
   <li>For adaptive forms with <a href="../../forms/using/prepopulate-adaptive-form-fields.md#main-pars-header-9">no form model</a>, there is no bound data. Every field is an unbound field and is prefilled using the unbound XML.</li> 
  </ul> 
  <p> </p> 
  <h4>Sample Prefill XML structure</h4> 
  <codeblock gutter="true" class="syntax xml">
    &lt;?xml&amp;nbsp;version="1.0"&amp;nbsp;encoding="UTF-8"?&gt;!!discoiqbr!!&lt;afData&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&lt;afBoundData&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;employeeData&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/employeeData&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&lt;/afBoundData&gt;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&lt;afUnboundData&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;data&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;textbox&gt;Hello&amp;nbsp;World&lt;/textbox&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;numericbox&gt;12&lt;/numericbox&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/data&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&lt;/afUnboundData&gt;!!discoiqbr!!&lt;/afData&gt; 
  </codeblock> 
  <h4>Sample Prefill JSON structure</h4> 
  <codeblock gutter="true" class="syntax js">
    {!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;"afBoundData":&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"employeeData":&amp;nbsp;{&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;},!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;"afUnboundData":&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"data":&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"textbox":&amp;nbsp;"Hello&amp;nbsp;World",!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"numericbox":&amp;nbsp;"12"!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!} 
  </codeblock> 
  <p>For bound fields with same bindref or unbound fields with same name, data specified in the XML tag or JSON object is filled in all the fields. For example, two fields in a form are mapped to the name <span class="code">textbox</span> in the prefill data. During runtime, if the first text box field contains "A", then "A" is automatically filled in the second text box. This linking is called live linking of adaptive form fields. To prevent live linking:</p> 
  <ol> 
   <li><p>Open <span class="uicontrol">Adobe Experience Manager Web Console Configuration</span>.<br /> URL:<span class="code"> http://&amp;lt;server&amp;gt;:&amp;lt;port&amp;gt;/system/console/configMgr</span></p> </li> 
   <li><p>Search and open <strong>Adaptive Form and Interactive Communication Web Channel Configuration</strong>. </p> </li> 
   <li><p>In the Adaptive Form and Interactive Communication Web Channel Configuration dialog, enable <strong>Prevent Sync of Same Mapped Fields</strong>. When you prevent sync of same mapped fields, at the runtime, you can fill different values in the fields. But in the submitted data, only one value is retained. For example, you fill "A" and "B" in the two fields in the above example. In the submitted data, you see "B" in the <strong><span class="kbd">textbox</span></strong> tag of the xml (object in JSON).</p> </li> 
  </ol> 
  <h3 id="XFA_based_AF">Adaptive form using XFA form template</h3> 
  <p><br /> The structure of prefill XML and the submitted XML for XFA-based adaptive forms is as follows:</p> 
  <ul> 
   <li><strong>Prefill XML Structure</strong>: The prefill XML for XFA-based adaptive form must be compliant with the data schema of the XFA form template. To prefill unbound fields, wrap the prefill XML structure into <span class="code">/afData/afBoundData</span> tag.</li> 
   <li><strong>Submitted XML Structure</strong>: When no prefill XML is used, the submitted XML contains data for both bound and unbound fields in <span class="code">afData</span><strong> </strong>wrapper tag. If a prefill XML is used, the submitted XML has the same structure as the prefill XML. If the prefill XML starts with the <span class="code">afData</span> root tag, the output XML also has the same format. If the prefill XML does not have <span class="code">afData/afBoundData </span>wrapper and instead starts directly from the schema root tag like <span class="code">employeeData</span>, the submitted XML also starts with the <span class="code">employeeData</span> tag.</li> 
  </ul> 
  <div> 
   <p>Prefill-Submit-Data-ContentPackage.zip</p> 
   <p><a alt="Prefill-Submit-Data-ContentPackage.zip" href="assets/prefill-submit-data-contentpackage.zip">Get File</a></p> 
  </div> 
  <p>Sample containing prefill data and submitted data</p> 
  <h3 id="XML_schema_af">XML schema-based adaptive forms&amp;nbsp;</h3> 
  <p>The structure of prefill XML and submitted XML for adaptive forms based on XML schema is as follows:</p> 
  <ul> 
   <li><strong>Prefill XML structure</strong>: The prefill XML must be compliant to associated XML Schema. To prefill unbound fields, wrap the prefill XML structure into /afData/afBoundData tag.</li> 
   <li><strong>Submitted XML structure</strong>: if no prefill XML is used, the submitted XML contains data for both bound and unbound fields in <span class="code">afData</span><strong> </strong>wrapper tag. If the prefill XML is used, the submitted XML has the same structure as the prefill XML. If the prefill XML starts with the <span class="code">afData</span> root tag, the output XML has the same format. If the prefill XML does not have <span class="code">afData/afBoundData</span> wrapper and instead start directly from the schema root tag like <span class="code">employeeData</span>, the submitted XML also starts with the <span class="code">employeeData</span> tag.</li> 
  </ul> 
  <codeblock gutter="true" class="syntax xml">
    &lt;?xml&amp;nbsp;version="1.0"&amp;nbsp;encoding="utf-8"&amp;nbsp;?&gt;&amp;nbsp;!!discoiqbr!!&lt;xs:schema&amp;nbsp;targetNamespace="http://adobe.com/sample.xsd"!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;xmlns="http://adobe.com/sample.xsd"!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;xmlns:xs="http://www.w3.org/2001/XMLSchema"&gt;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;xs:element&amp;nbsp;name="sample"&amp;nbsp;type="SampleType"/&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;xs:complexType&amp;nbsp;name="SampleType"&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;xs:sequence&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;xs:element&amp;nbsp;name="noOfProjectsAssigned"&amp;nbsp;type="xs:string"/&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/xs:sequence&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/xs:complexType&gt;!!discoiqbr!!&lt;/xs:schema&gt; 
  </codeblock> 
  <p>For fields whose model is XML schema, the data is prefilled in the <span class="code">afBoundData</span> tag as shown in the sample XML below. It can be used for prefilling an adaptive form with one or more unbound text fields.</p> 
  <codeblock gutter="true" class="syntax xml">
    &lt;?xml&amp;nbsp;version="1.0"&amp;nbsp;encoding="UTF-8"?&gt;&lt;afData&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&lt;afUnboundData&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;data&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;textbox&gt;Ignorance&amp;nbsp;is&amp;nbsp;bliss&amp;nbsp;:)&amp;nbsp;&lt;/textbox&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/data&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&lt;/afUnboundData&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&lt;afBoundData&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;data&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;noOfProjectsAssigned&gt;twelve&lt;/noOfProjectsAssigned&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/data&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&lt;/afBoundData&gt;!!discoiqbr!!&lt;/afData&gt;!!discoiqbr!! 
  </codeblock> 
  <note> 
   <p>It is recommended not to use unbound fields in bound panels (panels with non-empty <span class="code">bindRef</span> that has been created by dragging components from Sidekick or Data Sources tab). It may cause loss of data of these unbound fields. Also, it is recommended that the names of the fields are unique across the form, specially for unbound fields.</p> 
  </note> 
  <h4>An example without afData and afBoundData wrapper</h4> 
  <codeblock gutter="true" class="syntax xml">
    &lt;?xml&amp;nbsp;version="1.0"&amp;nbsp;encoding="UTF-8"?&gt;&lt;config&gt;!!discoiqbr!!&amp;nbsp;&lt;assignmentDetails&amp;nbsp;descriptionOfAssignment="Some&amp;nbsp;Science&amp;nbsp;Project"&amp;nbsp;durationOfAssignment="34"&amp;nbsp;financeRelatedProject="1"&amp;nbsp;name="Lisa"&amp;nbsp;numberOfMentees="1"/&gt;!!discoiqbr!!&amp;nbsp;&lt;assignmentDetails&amp;nbsp;descriptionOfAssignment="Kidding,&amp;nbsp;right?"&amp;nbsp;durationOfAssignment="4"&amp;nbsp;financeRelatedProject="1"&amp;nbsp;name="House"&amp;nbsp;numberOfMentees="3"/&gt;!!discoiqbr!!&lt;/config&gt;!!discoiqbr!! 
  </codeblock> 
  <h3>JSON schema-based adaptive forms</h3> 
  <p>For adaptive forms based on JSON schema, the structure of prefill JSON and submitted JSON is described below. For more information, see <a href="../../forms/using/adaptive-form-json-schema-form-model.md" target="_blank">Creating adaptive forms using JSON schema</a>.</p> 
  <ul> 
   <li><strong>Prefill JSON structure</strong>: The prefill JSON must be compliant with the associated JSON Schema. Optionally, it can be wrapped into the /afData/afBoundData Object if you want to prefill unbound fields as well.</li> 
   <li><strong>Submitted JSON structure</strong>: if no prefill JSON is used, the submitted JSON contains data for both bound and unbound fields in afData<strong> </strong>wrapper tag. If the prefill JSON is used, the submitted JSON has the same structure as the prefill JSON. If the prefill JSON starts with the afData root object, the output JSON has the same format. If the prefill JSON does not have afData/afBoundData wrapper and instead starts directly from the schema root object such as user, the submitted JSON also starts with the user object.</li> 
  </ul> 
  <codeblock gutter="true" lineWrap="true" class="syntax js">
    {!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"id":&amp;nbsp;"http://some.site.somewhere/entry-schema#",!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"$schema":&amp;nbsp;"http://json-schema.org/draft-04/schema#",!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"type":&amp;nbsp;"object",!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"properties":&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"address":&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"type":&amp;nbsp;"object",!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"properties":&amp;nbsp;{&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"name":&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"type":&amp;nbsp;"string"!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;},!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"age":&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"type":&amp;nbsp;"integer"!!discoiqbr!!}}}}} 
  </codeblock> 
  <p>For fields which use JSON schema model, the data is prefilled in the afBoundData object as shown in the sample JSON below. It can be used for prefilling an adaptive form with one or more unbound text fields. Below is an example of data with <span class="code">afData/afBoundData</span> wrapper:</p> 
  <codeblock gutter="true" class="syntax js">
    {!!discoiqbr!!&amp;nbsp;&amp;nbsp;"afData":&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"afUnboundData":&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"data":&amp;nbsp;{&amp;nbsp;"textbox":&amp;nbsp;"Ignorance&amp;nbsp;is&amp;nbsp;bliss&amp;nbsp;:)&amp;nbsp;"&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;},!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"afBoundData":&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"data":&amp;nbsp;{&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;"user":&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"address":&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"city":&amp;nbsp;"Noida",!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"country":&amp;nbsp;"India"!!discoiqbr!!}}}}}}} 
  </codeblock> 
  <p>Below is an example without <span class="code">afData/afBoundData</span> wrapper:</p> 
  <codeblock gutter="true" class="syntax js">
    {!!discoiqbr!!&amp;nbsp;"user":&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;"address":&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;"city":&amp;nbsp;"Noida",!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;"country":&amp;nbsp;"India"!!discoiqbr!!}}} 
  </codeblock> 
  <note> 
   <p>Using unbound fields in bound panels (panels with non-empty bindRef that have been created by dragging components from the Sidekick or Data Sources tab) is <strong>not</strong> recommended as it might cause loss of data of the unbound fields. It is recommended to have unique field names across the form, especially for unbound fields.</p> 
  </note> 
  <h3>Adaptive Form with no form model</h3> 
  <p>For adaptive forms with no form model, the data for all the fields is under the <span class="code">&amp;lt;data&amp;gt;</span> tag of <span class="code">&amp;lt;afUnboundData&amp;gt; tag</span>.</p> 
  <p>Also, take note of the following:</p> 
  <p>The XML tags for the user data submitted for various fields are generated using the name of the fields. Therefore, the field names must be unique.</p> 
  <codeblock gutter="true" class="syntax xml">
    &lt;?xml&amp;nbsp;version="1.0"&amp;nbsp;encoding="UTF-8"?&gt;&lt;afData&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&lt;afUnboundData&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;data&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;radiobutton&gt;2&lt;/radiobutton&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;repeatable_panel_no_form_model&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;numericbox&gt;12&lt;/numericbox&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/repeatable_panel_no_form_model&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;repeatable_panel_no_form_model&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;numericbox&gt;21&lt;/numericbox&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/repeatable_panel_no_form_model&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;checkbox&gt;2&lt;/checkbox&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;textbox&gt;Nopes&lt;/textbox&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/data&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&lt;/afUnboundData&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&lt;afBoundData/&gt;!!discoiqbr!!&lt;/afData&gt;!!discoiqbr!! 
  </codeblock> 
  <h2>Configuring prefill service using Configuration Manager</h2> 
  <p>To enable prefill service, specify the Default Prefill Service Configuration in the AEM Web Console Configuration. Use the following steps to configure the Prefill service:</p> 
  <note> 
   <p>Prefill Service Configuration is applicable for adaptive forms, HTML5 forms, and HTML5 form sets. </p> 
  </note> 
  <ol> 
   <li><p>Open <span class="uicontrol">Adobe Experience Manager Web Console Configuration</span> by using the URL: <br /> http://&amp;lt;server&amp;gt;:&amp;lt;port&amp;gt;/system/console/configMgr</p> </li> 
   <li><p>Search and open <span class="uicontrol">Default Prefill Service Configuration</span>. </p> <img imageRotate="0" src="assets/prefill_config.png" /></li> 
   <li><p>Enter the data location or a regex (regular expression) for the <strong>Data files locations</strong>. Examples of valid Data files locations are:</p> 
    <ul> 
     <li>file:///C:/Users/public/Document/Prefill/.*</li> 
     <li>http://localhost:8000/somesamplexmlfile.xml</li> 
    </ul> 
    <note> 
     <p>By default, prefill is allowed through crx files for all types of Adaptive Forms (XSD, XDP, JSON, FDM, and no Form Model based). Prefill is allowed only with JSON and XML files.</p> 
    </note></li> 
   <li><p>The prefill service is now configured for your form.</p> 
    <note> 
     <p>The crx protocol takes care of prefilled data security and hence, is allowed by default. Prefilling via other protocols using generic regex might cause vulnerability. In the configuration, specify a secure URL configuration for protecting your data.</p> 
    </note></li> 
  </ol> 
  <h2>The curious case of repeatable panels</h2> 
  <p>Generally, bound (form schema) and unbound fields are authored in the same adaptive form, but the following are a few exceptions in case the bound are repeatable:</p> 
  <ul> 
   <li>Unbound repeatable panels are not supported for adaptive forms using the XFA form template, XSD, JSON schema, or FDM schema.</li> 
   <li>Do not use unbound fields in bound repeatable panels.</li> 
  </ul> 
  <note> 
   <p>As a rule of thumb, do not mix bound and unbound fields if they are intersected in data filled by the end user in unbound fields. If possible, you should modify the schema or the XFA form template and add an entry for unbound fields, so that it also becomes bound and its data is available like other fields in submitted data.</p> 
  </note> 
  <h2>Supported protocols for prefilling user data</h2> 
  <p>Adaptive forms can be prefilled with user data in prefill data format via the following protocols when configured with valid regex:</p> 
  <h3>The crx:// protocol</h3> 
  <codeblock gutter="true" class="syntax xml">
    http://localhost:4502/content/forms/af/xml.html?wcmmode=disabled&amp;dataRef=crx:///tmp/fd/af/myassets/sample.xml 
  </codeblock> 
  <p>The specified node must have a property called <span class="code">jcr:data</span> and hold the data.</p> 
  <h3>The file:// protocol&amp;nbsp;</h3> 
  <codeblock gutter="true" class="syntax xml">
    http://localhost:4502/content/forms/af/someAF.html?wcmmode=disabled&amp;dataRef=file:///C:/Users/form-user/Downloads/somesamplexml.xml!!discoiqbr!! 
  </codeblock> 
  <p>The referred file must be on the same server.</p> 
  <h3>The http:// protocol</h3> 
  <codeblock gutter="true" class="syntax xml">
    http://localhost:4502/content/forms/af/xml.html?wcmmode=disabled&amp;dataRef=http://localhost:8000/somesamplexmlfile.xml 
  </codeblock> 
  <h3>The service:// protocol</h3> 
  <codeblock gutter="true" class="syntax xml">
    http://localhost:4502/content/forms/af/abc.html?wcmmode=disabled&amp;dataRef=service://[SERVICE_NAME]/[IDENTIFIER] 
  </codeblock> 
  <ul> 
   <li>SERVICE_NAME refers to the name of the OSGI prefill service. Refer <a href="../../forms/using/prepopulate-adaptive-form-fields.md#main-pars-header-1004678940">Create and run a prefill service</a>.</li> 
   <li>IDENTIFIER refers to any metadata required by the OSGI prefill service to fetch the prefill data. An identifier to the logged-in user is an example of metadata that could be used.</li> 
  </ul> 
  <note> 
   <p>Passing authentication parameters is not supported.</p> 
  </note> 
  <h3>Setting data attribute in slingRequest</h3> 
  <p>You can also set the <span class="code">data</span><strong> </strong>attribute in <span class="code">slingRequest</span>, where the <span class="code">data</span> attribute is a string containing XML or JSON, as shown in the sample code below (Example is for XML): </p> 
  <codeblock gutter="true" class="syntax java">
    &lt;%!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;dataXML="&lt;afData&gt;"&amp;nbsp;+!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"&lt;afUnboundData&gt;"&amp;nbsp;+!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"&lt;data&gt;"&amp;nbsp;+!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"&lt;first_name&gt;"+&amp;nbsp;"Tyler"&amp;nbsp;+&amp;nbsp;"&lt;/first_name&gt;"&amp;nbsp;+!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"&lt;last_name&gt;"+&amp;nbsp;"Durden&amp;nbsp;"&amp;nbsp;+&amp;nbsp;"&lt;/last_name&gt;"&amp;nbsp;+!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"&lt;gender&gt;"+&amp;nbsp;"Male"&amp;nbsp;+&amp;nbsp;"&lt;/gender&gt;"&amp;nbsp;+!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"&lt;location&gt;"+&amp;nbsp;"Texas"&amp;nbsp;+&amp;nbsp;"&lt;/location&gt;"&amp;nbsp;+!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"&lt;/data&gt;"&amp;nbsp;+!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"&lt;/afUnboundData&gt;"&amp;nbsp;+!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"&lt;/afData&gt;";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;slingRequest.setAttribute("data",&amp;nbsp;dataXML);!!discoiqbr!!%&gt; 
  </codeblock> 
  <p>You can write a simple XML or JSON string containing all your data and set it in slingRequest. This can easily be done in your renderer JSP for any component, which you want to include in the page where you can set the slingRequest data attribute.</p> 
  <p>For example, where you want a specific design for your page with a specific type of header. To achieve this, you can write your own <span class="code">header.jsp</span>, which you can include in your page component and set the <span class="code">data</span> attribute. </p> 
  <p>Another good example is a use case where you would like to prefill data on login through social accounts like Facebook, Twitter, or LinkedIn. In this case, you can include a simple JSP in <span class="code">header.jsp</span>, which fetches data from the user account and sets the data parameter.</p> 
  <div> 
   <p>prefill-page component.zip</p> 
   <p><a alt="prefill-page component.zip" href="assets/prefill-page-component.zip">Get File</a></p> 
  </div> 
  <p>Sample prefill.jsp in page component</p> 
  <h2>AEM Forms custom prefill service</h2> 
  <p>You can use custom prefill service for the scenarios, where you constantly read data from a pre-defined source. The prefill service reads data from defined data sources and prefills the fields of the adaptive form with the content of the prefill data file. It also helps you permanently associate prefilled data with an adaptive form. </p> 
  <h3>Create and run a prefill service</h3> 
  <p>The prefill service is an OSGi service and is packaged through OSGi bundle. You create the OSGi bundle, upload, and install it to AEM Forms bundles. Before you get started with creating the bundle:</p> 
  <ul> 
   <li><a href="/content/help/en/aem-forms/kb/aem-forms-releases" target="_blank">Download the AEM Forms Client SDK</a></li> 
   <li><a href="../../forms/using/prepopulate-adaptive-form-fields.md#main-pars-download-section-711716493">Download the boilerplate package</a><br /> </li> 
   <li>Place the data (prefill data) file in the crx-repository. You can place the file at any location in the \contents folder of crx-repository.<br /> </li> 
  </ul> 
  <div> 
   <p></p> 
   <p><a alt="Prefill-Sumbit-XMLsAndContentPackage.zip" href="assets/prefill-sumbit-xmlsandcontentpackage.zip" status="changing">Get File</a></p> 
  </div> 
  <h4>Create a prefill service</h4> 
  <p>The boilerplate package (sample prefill service package) contains sample implementation of AEM Forms prefill service. Open the boilerplate package in a code editor. For example, open the boilerplate project in Eclipse for editing. After you open the boilerplate package in a code editor, perform the following steps to create the service.</p> 
  <ol> 
   <li><p>Open the src\main\java\com\adobe\test\Prefill.java file for editing.</p> </li> 
   <li><p>In the code, set value of:</p> 
    <ul> 
     <li><span class="code">nodePath:</span> The node path variable pointing to crx-repository location contains path of the data (prefill) file. For example, /content/prefilldata.xml</li> 
     <li><span class="code">label:</span> The label parameter specifies display name of the service. For example, Default Prefill Service</li> 
    </ul> </li> 
   <li><p>Save and close the <span class="code">Prefill.java</span> file.</p> </li> 
   <li><p>Add the <span class="code">AEM Forms Client SDK</span> package to the build path of the boilerplate project.</p> </li> 
   <li><p>Compile the project and create the .jar for the bundle.</p> </li> 
  </ol> 
  <h4>Start and use the prefill service</h4> 
  <p>To start the prefill service, upload the JAR file to AEM Forms Web Console, and activate the service. Now, the service starts appearing in adaptive forms editor. To associate a prefill service to an adaptive form:</p> 
  <ol> 
   <li><p>Open the adaptive form in Forms Editor and open the Properties panel for the Form Container.</p> </li> 
   <li><p>In the Properties console, navigate to AEM Forms container &amp;gt; Basic &amp;gt; Prefill Service.</p> </li> 
   <li><p>Select the Default Prefill Service and click <span class="uicontrol">Save</span>. The service is associated to the form.</p> </li> 
  </ol> 
  <related-links> 
   <a href="../../forms/using/creating-accessible-adaptive-forms.md" target="_blank">Introduction to authoring adaptive forms</a> 
   <a href="../../forms/using/introduction-form-sequence.md" target="_blank">Introduction to multi-step form sequence</a> 
   <a href="../../forms/using/creating-accessible-adaptive-forms.md" target="_blank">Creating accessible adaptive forms</a> 
   <a href="../../forms/using/authoring-in-field-help.md" target="_blank">Authoring in-context help for form fields</a> 
   <a href="../../forms/using/configuring-submit-actions.md" target="_blank">Configuring the submit action</a> 
   <a href="../../forms/using/adaptive-form-xml-schema-form-model.md" target="_blank">Creating adaptive forms using XML Schema</a> 
  </related-links> 
 </body> 
</html>