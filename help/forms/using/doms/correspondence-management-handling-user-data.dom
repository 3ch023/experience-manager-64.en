<?xml version="1.1" encoding="UTF-8" standalone="yes"?>
<html>
 <head>
  <meta content="Correspondence Management | Handling user data" name="jcr:title" />
  <meta content="2018-05-03T06:24:32.414-0400" name="cq:lastReplicated" />
  <meta content="checked_improved" name="acrolinxStatus" />
  <meta content="vishgupt" name="cq:lastReplicatedBy" />
  <meta content="false" name="doNotLocalize" />
  <meta content="2018-04-06T04:29:03.843-0400" name="firstPublishExternalDate" />
  <meta content="bd1352b6-f542-4ed8-8cdd-c1c5c4be9d3f" name="jcr:predecessors" />
  <meta content="en_us" name="jcr:language" />
  <meta content="vishgupt" name="acrolinxLastCheckedBy" />
  <meta content="mix:versionable" name="jcr:mixinTypes" />
  <meta content="2018-05-03T06:24:32.029-0400" name="cq:lastModified" />
  <meta content="2018-04-19T10:46:18.550-0400" name="acrolinxDate" />
  <meta content="https://helpx.adobe.com/experience-manager/6-4/forms/using/correspondence-management-handling-user-data.html" name="publishExternalURL" />
  <meta content="" name="jcr:baseVersion" />
  <meta content="admin" name="jcr:createdBy" />
  <meta content="2018-05-03T06:24:32.002-0400" name="lastPublishExternalDate" />
  <meta content="left" name="sideColumn" />
  <meta content="help/components/pages/article-3" name="sling:resourceType" />
  <meta content="" name="jcr:primaryType" />
  <meta content="2018-05-03T06:24:32.002-0400" name="publishExternalDate" />
  <meta content="vishgupt" name="cq:lastModifiedBy" />
  <meta content="true" name="jcr:isCheckedOut" />
  <meta content="2018-04-30T03:14:54.485-0400" name="locHandOffDate" />
  <meta content="822627b1-c1af-41c7-a5eb-dfef30454c8a" name="jcr:uuid" />
  <meta content="/content/help/en/experience-manager/6-4/morehelp/grdp;/content/help/en/experience-manager/6-4/forms/morehelp/grdp" name="moreHelpPaths" />
  <meta content="2018-05-03T06:24:32.002-0400" name="topicBrowsingSortDate" />
  <meta content="products:SG_EXPERIENCEMANAGER/6.4" name="primaryProductTag" />
  <meta content="green" name="acrolinxPageStatus" />
  <meta content="light" name="heroGradient" />
  <meta content="http://acrolinx.corp.adobe.com:8031/output/en/correspondence_management_handling_user_data_krs_workflow_0eaa5f398ed6741b_628_report.xml" name="acrolinxReportURL" />
  <meta content="video" name="pageLayout" />
  <meta content="553" name="acrolinxWords" />
  <meta content="/etc/designs/help" name="cq:designPath" />
  <meta content="Activate" name="cq:lastReplicationAction" />
  <meta content="2018-03-19T07:28:16.605-0400" name="jcr:created" />
  <meta content="46" name="acrolinxSentences" />
  <meta content="" name="jcr:versionHistory" />
  <meta content="en" name="pageCreatedAt" />
  <meta content="topic_tags:grdp;products:SG_EXPERIENCEMANAGER/6.4/FORMS" name="cq:tags" />
  <meta content="/apps/help/templates/article-3" name="cq:template" />
  <meta content="vishgupt@adobe.com" name="lr_lastReplicatedBy" />
 </head>
 <body>
  <p>AEM Forms Correspondence Management enables you to create, manage, and streamline secure and personalized customer correspondences. It provides an intuitive user interface for business users to create correspondences using pre-approved content blocks and media elements. For more information about creating correspondences, see <a href="../../forms/using/create-correspondence.md" target="_blank">Create Correspondence</a>.</p> 
  <p>When a business user or an agent saves a correspondence as draft or submits it, a letter instance is saved in the AEM repository. The letter instance includes correspondence data and metadata.</p> 
  <note>
   <p>In AEM 6.4 Forms, correspondence management is not available out of the box. If you are upgrading from a previous AEM Forms version, install the compatibility package and migrate your correspondence management assets to continue to use them in AEM 6.4 Forms. For more information, see <a href="../../forms/using/compatibility-package.md" target="_blank">Compatibility package</a>.</p> 
  </note>
  <h2 id="data">User data and data stores</h2>
  <p>Correspondence management stores data for draft and submitted letters in AEM repository only if the publish instance is configured to manage letter instances. For more information about the configuration, see <a href="../../forms/using/cm-configuration-properties.md" target="_blank">Correspondence Management configuration properties</a>.</p> 
  <p>Depending on the data store persistence configured for your AEM deployment, drafts and submitted correspondence data is stored at the following locations.</p> 
  <table border="1" cellpadding="0" cellspacing="0"> 
   <tbody>
    <tr>
     <td valign="top" width="98"><p><strong>Persistence type</strong></p> </td> 
     <td valign="top" width="315"><p><strong>Data store</strong></p> </td> 
     <td valign="top" width="234"><p><strong>Location</strong></p> </td> 
    </tr>
    <tr>
     <td valign="top" width="98"><p>Default</p> </td> 
     <td valign="top" width="315"><p>AEM repository of publish instance and author instances specified in reverse replication configuration</p> </td> 
     <td valign="top" width="234"><p><span class="code">/content/apps/cm/letterInstances/[yyyy]/[mm]/[dd]/[node-id]/[letter-instance-name]/</span><br /> </p> </td> 
    </tr>
    <tr>
     <td valign="top" width="98"><p>Remote</p> </td> 
     <td valign="top" width="315"><p>AEM repository of the remote processing author instance</p> </td> 
     <td valign="top" width="234"><p><span class="code">/content/apps/cm/letterInstances/[yyyy]/[mm]/[dd]/[node-id]/[letter-instance-name]/</span></p> </td> 
    </tr>
   </tbody>
  </table> 
  <p>In the above specified AEM repository location:</p> 
  <ul> 
   <li><span class="code">[yyyy]/[mm]/[dd]</span> is the node structure based on the date when the letter instance was created</li> 
   <li><span class="code">[node-id]</span> is the ID assigned to the folder containing the letter</li> 
   <li><span class="code">[letter-instance-name]</span> is the name specified when saving or submitting a letter</li> 
  </ul> 
  <p>Under the [letter-instance-name] node, the following node structure is created and the data for each letter instance is stored in the AEM repository:</p> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody>
    <tr>
     <td>Node</td> 
     <td>Description</td> 
    </tr>
    <tr>
     <td><span class="code">extendedProperties</span></td> 
     <td>Stores metadata properties of the letter instance.</td> 
    </tr>
    <tr>
     <td><span class="code">dataXML</span></td> 
     <td>Stores a downloadable dataXML file containing the correspondence data in binary format.</td> 
    </tr>
    <tr>
     <td><span class="code">processedXDP</span></td> 
     <td>Includes the details of the XDP template used to create the submitted letter. This node is created only for submitted correspondences.</td> 
    </tr>
    <tr>
     <td><span class="code">submittedLetter</span></td> 
     <td>Stores the submitted letter data in downloadable binary format. This node is created only for submitted correspondences.</td> 
    </tr>
   </tbody>
  </table> 
  <h2>Access and delete user data</h2>
  <p>You can access draft and submitted correspondence data in the configured data stores, and if necessary, delete it.</p> 
  <h3>Access user data</h3>
  <p>Correspondence management provides APIs that you can use to find and access draft and submitted letter instances. Using the APIs, you can find and open letter instances using the letter instance ID or the user who saved or submitted the correspondence. For more information, see <a href="../../forms/using/cm-apis-to-access-letter-instances.md" target="_blank">APIs to access letter instances</a>.</p> 
  <p>Alternatively, you can navigate to the letter instance in AEM repository using CRX DELite. See <a href="/forms/using/correspondence-management-handling-user-data.html?cq_ck=1521445862743#data">User data and data stores</a> for information about stored data and repository location.</p> 
  <h3>Delete user data</h3>
  <p>To find a letter instance containing the data of a specific user, you can:</p> 
  <ul> 
   <li>Use correspondence management APIs if letter instance name or the user who saved the draft or submitted the correspondence is known</li> 
   <li>Use AEM repository search using personally identifiable information like the email ID or name to find the node where the information is stored </li> 
  </ul> 
  <p>To delete user data from draft and submitted correspondences completely from AEM systems, you must manually delete the letter instance node from all applicable AEM instances.</p> 
 </body>
</html>