<?xml version="1.1" encoding="UTF-8" standalone="yes"?> 
<html> 
 <head> 
  <meta content="content_type:reference;geptopics:SG_AEMFORMS/categories/rendering_forms;products:SG_EXPERIENCEMANAGER/6.4/FORMS;topic_tags:operations" name="cq:tags" /> 
  <meta content="Activate" name="cq:lastReplicationAction" /> 
  <meta content="2017-10-03T06:52:10.991-0400" name="firstPublishExternalDate" /> 
  <meta content="2018-04-03T08:31:32.866-0400" name="cq:lastReplicated" /> 
  <meta content="admin" name="lr_lastModifiedBy" /> 
  <meta content="Creating PDF Documents with SubmittedXML Data" name="jcr:title" /> 
  <meta content="khsingh@adobe.com" name="lr_lastReplicatedBy" /> 
  <meta content="AEMForms/6.1/ProgramLC/WS624e3cba99b79e12e69a9941333732bac8-7ff3.2,AEMForms/6.1/ProgramLC/WS43e711c0d7cb0d7619e03f8f15a1c86a0f0-8000,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12ac547811336a352d40-7ffc.2,AEMForms/6.1/ProgramLC/WS624e3cba99b79e12e69a9941333732bac8-79bb.2" name="cq:gepId" /> 
  <meta content="Creating PDF Documents with Submitted&amp;#xA;XML Data Creating PDF Documents with Submitted&amp;#xA;XML Data Creating PDF Documents with Submitted&amp;#xA;XML Data" name="navTitle" /> 
  <meta content="light" name="heroGradient" /> 
  <meta content="" name="jcr:baseVersion" /> 
  <meta content="2017-10-03T06:52:10.991-0400" name="lastPublishExternalDate" /> 
  <meta content="2017-08-09T03:29:41.717-0400" name="lr_lastModified" /> 
  <meta content="2017-11-21T06:59:28.368-0500" name="cq:lastModified" /> 
  <meta content="carlino" name="cq:lastModifiedBy" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/FORMS" name="primaryProductTag" /> 
  <meta content="carlino" name="cq:lastReplicatedBy" /> 
  <meta content="2017-11-22T19:06:21.248-0500" name="jcr:created" /> 
  <meta content="fe4fc029-24fe-4aec-8810-6cbbc701e7e0" name="jcr:predecessors" /> 
  <meta content="admin" name="contentOwner" /> 
  <meta content="not_checked" name="acrolinxStatus" /> 
  <meta content="2017-08-09T03:29:00.000-0400" name="sortDate" /> 
  <meta content="eaafc39a-445d-43bd-9a8d-36e82010d46a" name="jcr:uuid" /> 
  <meta content="/etc/designs/help" name="cq:designPath" /> 
  <meta content="" name="jcr:versionHistory" /> 
  <meta content="true" name="jcr:isCheckedOut" /> 
  <meta content="admin" name="jcr:createdBy" /> 
  <meta content="2017-08-09T03:29:00.000-0400" name="topicBrowsingSortDate" /> 
  <meta content="https://helpx.adobe.com/aem-forms/6-3/developing/creating-pdf-documents-submitted-xml.html" name="publishExternalURL" /> 
  <meta content="audience:developing" name="primaryAudienceTag" /> 
  <meta content="left" name="sideColumn" /> 
  <meta content="" name="jcr:primaryType" /> 
  <meta content="/apps/help/templates/article-3" name="cq:template" /> 
  <meta content="false" name="doNotLocalize" /> 
  <meta content="video" name="pageLayout" /> 
  <meta content="head1_20111213" name="gep_conversion_script_version" /> 
  <meta content="help/components/pages/article-3" name="sling:resourceType" /> 
  <meta content="2017-10-03T06:52:10.991-0400" name="publishExternalDate" /> 
  <meta content="mix:versionable" name="jcr:mixinTypes" /> 
  <meta content="admin" name="lr_creator" /> 
  <meta content="en_us" name="jcr:language" /> 
 </head> 
 <body> 
  <h2 id="creating_pdf_documents_with_submitted_xml_data">Creating PDF Documents with Submitted XML Data</h2> 
  <p></p> 
  <p>Web-based applications that enable users to fill interactive forms require the data to be submitted back to the server. Using the Forms service, you can retrieve the form data that the user entered into an interactive form. Then you can pass the form data to another AEM Forms service operation and create a PDF document using the data. </p> 
  <note> 
   <p>Before you read this content, it is recommended that you have a solid understanding of handling submitted forms. Concepts such as the relationship between a form design and submitted XML data are covered in <a href="/programming-with-aem-forms/rendering-forms-rendering-forms handling-submitted-forms-handling-submitted#handling_submitted_forms">Handling Submitted Forms</a>. </p> 
  </note> 
  <p>Consider the following workflow that involves three AEM Forms services: </p> 
  <ul> 
   <li><p>A user submits XML data to the Forms service from a web-based application. </p></li> 
   <li><p>The Forms service is used to process the submitted form and extract form fields. Form data can be processed. For example, the data can be submitted to an enterprise database. </p></li> 
   <li><p>Form data is sent to the Output service to create a non-interactive PDF document. </p></li> 
   <li><p>The non-interactive PDF document is stored in Content Services (deprecated).</p></li> 
  </ul> 
  <p>The following diagram provides a visual representation of this workflow. </p> 
  <img alt="" src="assets/cd_cd_finsrv_architecture_xml_pdf1.png" /> 
  <p>After the user submits the form from the client web browser, the non-interactive PDF document is stored in Content Services (deprecated). The following illustration shows a PDF document stored in Content Services (deprecated). </p> 
  <img alt="" src="assets/cd_cd_cs_gui.png" /> 
  <h3 id="summary_of_steps">Summary of steps</h3> 
  <p></p> 
  <p>To create a non-interactive PDF document with submitted XML data and store in the PDF document in Content Services (deprecated), perform the following tasks:</p> 
  <ol> 
   <li><p>Include project files.</p></li> 
   <li><p>Create Forms, Output, and Document Management objects. </p></li> 
   <li><p>Retrieve form data by using the Forms service.</p></li> 
   <li><p>Create a non-interactive PDF document by using the Output service.</p></li> 
   <li><p>Store the PDF form in Content Services (deprecated) by using the Document Management service.</p></li> 
  </ol> 
  <p><strong>Include project files</strong></p> 
  <p>Include necessary files into your development project. If you are creating a client application using Java, include the necessary JAR files. If you are using web services, ensure that you include the proxy files.</p> 
  <p><strong>Create Forms, Output, and Document Management objects</strong></p> 
  <p>Before you can programmatically perform a Forms service API operation, create a Forms Client API object. Likewise, because this workflow invokes the Output and Document Management services, create both an Output Client API object and a Document Management Client API object.</p> 
  <p><strong>Retrieve form data using the Forms service</strong></p> 
  <p>Retrieve form data that was submitted to the Forms service. You can process submitted data to meet your business requirements. For example, you can store form data in an enterprise database. However, to create a non-interactive PDF document, the form data is passed to the Output service.</p> 
  <p><strong>Create a non-interactive PDF document using the Output service.</strong></p> 
  <p>Use the Output service to create a non-interactive PDF document that is based on a form design and XML form data. In the workflow, the form data is retrieved from the Forms service. </p> 
  <p><strong>Store the PDF form in Content Services (deprecated) using the Document Management service</strong></p> 
  <p>Use the Document Management service API to store a PDF document in Content Services (deprecated).</p> 
  <p><strong>See also</strong></p> 
  <p><a href="/programming-with-aem-forms/rendering-forms-rendering-forms creating-pdf-documents-submitted-xml creating-pdf-documents-submitted-xml#create_a_pdf_document_with_submitted_xml_data_using_the_java_api">Create a PDF Document with submitted XML data using the Java API</a></p> 
  <p><a href="#unresolvedlink-lc-in-invoke-using-java-iu.xml#ws624e3cba99b79e12e69a9941333732bac8-7b4b.2">Including AEM Forms Java library files</a></p> 
  <p><a href="#unresolvedlink-lc-in-invoke-using-java-iu.xml#ws624e3cba99b79e12e69a9941333732bac8-7fd6.2">Setting connection properties</a></p> 
  <p><a href="#unresolvedlink-lc-qs-forms-fo.xml#ws624e3cba99b79e12e69a9941333732bac8-7af6.2">Forms Service API Quick Starts</a></p> 
  <p><a href="/programming-with-aem-forms/creating-document-output-streams-creating creating-document-output-streams-creating#creating_pdf_documents">Creating PDF Documents</a></p> 
  <p><a href="#unresolvedlink-lc-cs-api-add-content-ac.xml#ws624e3cba99b79e12e69a9941333732bac8-7ffd.2">Adding Content to Content Services (deprecated)</a></p> 
  <h3 id="create_a_pdf_document_with_submitted_xml_data_using_the_java_api">Create a PDF Document with submitted XML data using the Java API</h3> 
  <p></p> 
  <p>Create a PDF document with submitted XML data by using the Forms, Output, and Document Management API (Java): </p> 
  <ol> 
   <li><p>Include project files </p><p>Include client JAR files, such as adobe-forms-client.jar, adobe-output-client.jar, and adobe-contentservices-client.jar in your Java project’s class path.</p></li> 
   <li><p>Create Forms, Output, and Document Management objects </p> 
    <ul> 
     <li><p>Create a <span class="code">ServiceClientFactory</span> object that contains connection properties.</p></li> 
     <li><p>Create a <span class="code">FormsServiceClient</span> object by using its constructor and passing the <span class="code">ServiceClientFactory</span> object. </p></li> 
     <li><p>Create an <span class="code">OutputClient</span> object by using its constructor and passing the <span class="code">ServiceClientFactory</span> object. </p></li> 
     <li><p>Create a <span class="code">DocumentManagementServiceClientImpl</span> object by using its constructor and passing the <span class="code">ServiceClientFactory</span> object. </p></li> 
    </ul></li> 
   <li><p>Retrieve form data using the Forms service </p> 
    <ul> 
     <li><p>Invoke the <span class="code">FormsServiceClient</span> object’s <span class="code">processFormSubmission</span> method and pass the following values:</p> 
      <ul> 
       <li><p>The <span class="code">com.adobe.idp.Document</span> object that contains the form data. </p></li> 
       <li><p>A string value that specifies environment variables, including all relevant HTTP headers. Specify the content type to handle by specifying one or more values for the <span class="code">CONTENT_TYPE</span> environment variable. For example, to handle XML data, specify the following string value for this parameter: <span class="code">CONTENT_TYPE=text/xml</span>.</p></li> 
       <li><p>A string value that specifies the <span class="code">HTTP_USER_AGENT</span> header value, such as <span class="code">Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.1.4322)</span>.</p></li> 
       <li><p>A <span class="code">RenderOptionsSpec</span> object that stores run-time options.</p></li> 
      </ul><p>The <span class="code">processFormSubmission</span> method returns a <span class="code">FormsResult</span> object containing the results of the form submission.</p></li> 
     <li><p>Determine whether the Forms service is finished processing the form data by invoking the <span class="code">FormsResult</span> object’s <span class="code">getAction</span> method. If this method returns the value <span class="code">0</span>, the data is ready to be processed.</p></li> 
     <li><p>Retrieve form data by creating a <span class="code">com.adobe.idp.Document</span> object by invoking the <span class="code">FormsResult</span> object’s <span class="code">getOutputContent</span> method. (This object contains form data that can be sent to the Output service.)</p></li> 
     <li><p>Create a <span class="code">java.io.InputStream</span> object by invoking the <span class="code">java.io.DataInputStream</span> constructor and passing the <span class="code">com.adobe.idp.Document</span> object.</p></li> 
     <li><p>Create an <span class="code">org.w3c.dom.DocumentBuilderFactory</span> object by calling the static <span class="code">org.w3c.dom.DocumentBuilderFactory</span> object’s <span class="code">newInstance</span> method.</p></li> 
     <li><p>Create an <span class="code">org.w3c.dom.DocumentBuilder</span> object by invoking the <span class="code">org.w3c.dom.DocumentBuilderFactory</span> object’s <span class="code">newDocumentBuilder</span> method.</p></li> 
     <li><p>Create an <span class="code">org.w3c.dom.Document</span> object by invoking the <span class="code">org.w3c.dom.DocumentBuilder</span> object’s <span class="code">parse</span> method and passing the <span class="code">java.io.InputStream</span> object.</p></li> 
     <li><p>Retrieve the value of each node within the XML document. One way to accomplish this task is to create a custom method that accepts two parameters: the <span class="code">org.w3c.dom.Document</span> object and the name of the node whose value you want to retrieve. This method returns a string value representing the value of the node. In the code example that follows this process, this custom method is called <span class="code">getNodeText</span>. The body of this method is shown. </p></li> 
    </ul></li> 
   <li><p>Create a non-interactive PDF document using the Output service. </p><p>Create a PDF document by invoking the <span class="code">OutputClient</span> object’s <span class="code">generatePDFOutput</span> method and passing the following values:</p> 
    <ul> 
     <li><p>A <span class="code">TransformationFormat</span> enum value. To generate a PDF document, specify <span class="code">TransformationFormat.PDF</span>. </p></li> 
     <li><p>A string value that specifies the name of the form design. Ensure that the form design is compatible with the form data retrieved from the Forms service. </p></li> 
     <li><p>A string value that specifies the content root where the form design is located.</p></li> 
     <li><p>A <span class="code">PDFOutputOptionsSpec</span> object that contains PDF run-time options.</p></li> 
     <li><p>A <span class="code">RenderOptionsSpec</span> object that contains rendering run-time options.</p></li> 
     <li><p>The <span class="code">com.adobe.idp.Document</span> object that contains the XML data source that contains data to merge with the form design. Ensure that this object was returned by the <span class="code">FormsResult</span> object’s <span class="code">getOutputContent</span> method.</p></li> 
     <li><p>The <span class="code">generatePDFOutput</span> method returns an <span class="code">OutputResult</span> object that contains the results of the operation.</p></li> 
     <li><p>Retrieve the non-interactive PDF document by invoking the <span class="code">OutputResult</span> object’s <span class="code">getGeneratedDoc</span> method. This method returns a <span class="code">com.adobe.idp.Document</span> instance that represents the non-interactive PDF document.</p></li> 
    </ul></li> 
   <li><p>Store the PDF form in Content Services (deprecated)using the Document Management service </p><p>Add the content by invoking the <span class="code">DocumentManagementServiceClientImpl</span> object’s <span class="code">storeContent</span> method and passing the following values:</p> 
    <ul> 
     <li><p>A string value that specifies the store where the content is added. The default store is <span class="code">SpacesStore</span>. This value is a mandatory parameter. </p></li> 
     <li><p>A string value that specifies the fully qualified path of the space where the content is added (for example, <span class="code">/Company Home/Test Directory</span>). This value is a mandatory parameter. </p></li> 
     <li><p>The node name that represents the new content (for example, <span class="code">MortgageForm.pdf</span>). This value is a mandatory parameter. </p></li> 
     <li><p>A string value that specifies the node type. To add new content, such as a PDF file, specify <span class="code">{http://www.alfresco.org/model/content/1.0}content</span>. This value is a mandatory parameter. </p></li> 
     <li><p>A <span class="code">com.adobe.idp.Document</span> object that represents the content. This value is a mandatory parameter. </p></li> 
     <li><p>A string value that specifies the encoding value (for example, <span class="code">UTF-8</span>). This value is a mandatory parameter.</p></li> 
     <li><p>An <span class="code">UpdateVersionType</span> enumeration value that specifies how to handle version information (for example, <span class="code">UpdateVersionType.INCREMENT_MAJOR_VERSION</span> to increment the content version. ) This value is a mandatory parameter.</p></li> 
     <li><p>A <span class="code">java.util.List</span> instance that specifies aspects related to the content. This value is an optional parameter and you can specify <span class="code">null</span>. </p></li> 
     <li><p>A <span class="code">java.util.Map</span> object that stores content attributes.</p></li> 
    </ul><p>The <span class="code">storeContent</span> method returns a <span class="code">CRCResult</span> object that describes the content. Using a <span class="code">CRCResult</span> object, you can, for example, obtain the content’s unique identifier value. To perform this task, invoke the <span class="code">CRCResult</span> object’s <span class="code">getNodeUuid</span> method.</p></li> 
  </ol> 
  <p><strong>See also</strong></p> 
  <p><a href="/programming-with-aem-forms/rendering-forms-rendering-forms creating-pdf-documents-submitted-xml#creating_pdf_documents_with_submitted_xml_data">Creating PDF Documents with Submitted XML Data</a></p> 
  <p><a href="#unresolvedlink-lc-qs-forms-fo.xml#ws624e3cba99b79e12e69a9941333732bac8-7fd2.2">Quick Start (EJB mode): Creating PDF Documents with submitted XML data using the Java API</a></p> 
  <p><a href="#unresolvedlink-lc-in-invoke-using-java-iu.xml#ws624e3cba99b79e12e69a9941333732bac8-7b4b.2">Including AEM Forms Java library files</a></p> 
  <p><a href="#unresolvedlink-lc-in-invoke-using-java-iu.xml#ws624e3cba99b79e12e69a9941333732bac8-7fd6.2">Setting connection properties</a></p> 
 </body> 
</html>