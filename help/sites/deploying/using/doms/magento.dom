<?xml version="1.1" encoding="UTF-8" standalone="yes"?> 
<html> 
 <head> 
  <meta content="Guillaume Carlino" name="contentOwner" /> 
  <meta content="2017-10-31T16:17:55.730-0400" name="firstPublishExternalDate" /> 
  <meta content="/apps/help/templates/article-3" name="cq:template" /> 
  <meta content="Magento" name="navTitle" /> 
  <meta content="Activate" name="cq:lastReplicationAction" /> 
  <meta content="2018-11-09T09:02:53.026-0500" name="publishExternalDate" /> 
  <meta content="dist5" name="distType" /> 
  <meta content="en_us" name="jcr:language" /> 
  <meta content="light" name="gnavTheme" /> 
  <meta content="https://helpx.adobe.com/experience-manager/6-4/sites/deploying/using/magento.html" name="publishExternalURL" /> 
  <meta content="" name="jcr:baseVersion" /> 
  <meta content="inherit" name="hidePromoComponent" /> 
  <meta content="2019-01-30T04:32:57.820-0500" name="cq:lastModified" /> 
  <meta content="/content/help/en/experience-manager/6-4/sites/deploying/morehelp/e-commerce;/content/help/en/experience-manager/6-4/sites/deploying/morehelp/e-commerce" name="moreHelpPaths" /> 
  <meta content="2018-11-09T09:02:53.026-0500" name="lastPublishExternalDate" /> 
  <meta content="" name="jcr:primaryType" /> 
  <meta content="Magento" name="seoTitle" /> 
  <meta content="426x240" name="modalSize" /> 
  <meta content="inherit" name="hideMerchandisingBar" /> 
  <meta content="/content/docs/en/aem/6-3/deploy/ecommerce/magento" name="qaNotes" /> 
  <meta content="admin" name="jcr:createdBy" /> 
  <meta content="de76205a-208c-4558-b66e-296cabc20635" name="jcr:uuid" /> 
  <meta content="2017-10-12T21:46:58.665-0400" name="mwpw_migration_script_version" /> 
  <meta content="" name="jcr:versionHistory" /> 
  <meta content="false" name="isReadyForLocalization" /> 
  <meta content="2018-11-09T09:02:53.026-0500" name="topicBrowsingSortDate" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES;topic_tags:e-commerce;content_type:reference" name="cq:tags" /> 
  <meta content="carlino@adobe.com" name="lr_lastReplicatedBy" /> 
  <meta content="f58ef0d0-7a7f-46b1-bf79-791620e3f955" name="jcr:predecessors" /> 
  <meta content="2017-10-12T21:46:00.000-0400" name="qaDate" /> 
  <meta content="locales:fr;locales:de;locales:ja" name="locLangTag" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES" name="primaryProductTag" /> 
  <meta content="Deploying eCommerce with Magento" name="pageTitle" /> 
  <meta content="carlino" name="cq:lastReplicatedBy" /> 
  <meta content="no" name="groupSectionNavItems" /> 
  <meta content="true" name="jcr:isCheckedOut" /> 
  <meta content="mix:versionable" name="jcr:mixinTypes" /> 
  <meta content="2017-12-01T19:06:18.223-0500" name="jcr:created" /> 
  <meta content="audience:deploying" name="primaryAudienceTag" /> 
  <meta content="Magento" name="jcr:title" /> 
  <meta content="2018-11-09T09:27:33.600-0500" name="locHandOffDate" /> 
  <meta content="carlino" name="cq:lastModifiedBy" /> 
  <meta content="/etc/designs/help" name="cq:designPath" /> 
  <meta content="Learn how to deploy eCommerce with Magento." name="seoDescription" /> 
  <meta content="2018-11-09T09:02:53.057-0500" name="cq:lastReplicated" /> 
  <meta content="help/components/pages/article-3" name="sling:resourceType" /> 
 </head> 
 <body> 
  <p>Deploying the necessary eCommerce packages will provide the full functionality of the eCommerce framework, together with a reference implementation of eCommerce functionality as provided with a Magento Commerce implementation (including a demonstration catalog).</p> 
  <h2>Packages Needed for eCommerce with Magento</h2> 
  <p>You need to download the following connector:</p> 
  <div> 
   <p></p> 
   <p><a alt="magento2-aem-connector-master.zip" href="assets/magento2-aem-connector-master.zip">Get File</a></p> 
  </div> 
  <h2>Installation of eCommerce with Magento</h2> 
  <p>To install AEM with a Magento Commerce integration configuration, the basic steps are as follows. </p> 
  <p>First in Magento:</p> 
  <ol> 
   <li><p>Instal the AEM Connector.</p> </li> 
   <li><p>Import the we.retail sample catalog.</p> </li> 
  </ol> 
  <p>Then in AEM:</p> 
  <ol> 
   <li><p><a href="https://github.com/Adobe-Marketing-Cloud/aem-sample-we-retail/releases">Download and Install</a> We.retail.</p> </li> 
   <li><p>Instal the AEM / Magento 2 Connector package.</p> </li> 
   <li><p>Install the Demo AEM content package.</p> </li> 
  </ol> 
  <h2>Configuration</h2> 
  <h3>Authentication</h3> 
  <p>The AEM / Magento 2 connector uses standard AEM authentication mechanism (External Login Module) to support both login and registration against Magento. In order to allow authentication you need to configure the Magento 2 Identity Provider in AEM like so.</p> 
  <p>To configure the Identity Provider:<br /> </p> 
  <ol> 
   <li><p>Navigate to <a href="http://localhost:4502/system/console/configMgr">http://localhost:4502/system/console/configMgr</a>.</p> </li> 
   <li><p>Click <strong>Magento Identity Provider</strong>.</p> <img imageRotate="0" src="assets/chlimage_1-8.jpeg" /></li> 
   <li><p>Enter the following information:</p> 
    <ul> 
     <li><p><strong>Magento Server</strong>: Full URL of your Magento server </p> </li> 
     <li><p><strong>Admin Username</strong>: Magento admin user to connect to Magento (for non production / demo purposes) </p> </li> 
     <li><p><strong>Admin Password</strong>: Magento admin password </p> </li> 
    </ul> </li> 
   <li><p>Click <strong>Save</strong>.</p> </li> 
  </ol> 
  <p>To configure the Sync Handler:<br /> </p> 
  <ol> 
   <li><p>Navigate to <a href="http://localhost:4502/system/console/configMgr">http://localhost:4502/system/console/configMgr</a>.</p> </li> 
   <li><p>Click <strong>Apache Jackrabbit Oak Default Sync Handler.</strong></p> <img imageRotate="0" src="assets/chlimage_1-9.jpeg" /></li> 
   <li><p>Enter the following information:</p> 
    <ul> 
     <li><strong>Sync Handler Name</strong>: default</li> 
     <li><p><strong>User Expiration Time</strong>: 1m</p> </li> 
     <li><strong>User auto membership</strong>: everyone</li> 
     <li><strong>User property mapping</strong>: 
      <ul> 
       <li>rep:fullname=cn</li> 
       <li>profile/nt:primaryType="nt:unstructured"</li> 
       <li>profile/givenName=givenname</li> 
       <li>profile/familyName=familyname</li> 
       <li>profile/email=email</li> 
       <li>magento-token=token</li> 
      </ul> </li> 
     <li><strong>User Path Prefix</strong>: /magento</li> 
     <li><strong>User Membership Expiration</strong>: 1h</li> 
     <li><strong>User membership nesting depth</strong>: 0</li> 
     <li><strong>Group Expiration Time</strong>: 1d</li> 
     <li><strong>Group auto membership</strong>: &amp;lt;leave blank&amp;gt;</li> 
     <li><strong>Group property mapping</strong>: &amp;lt;leave blank&amp;gt;</li> 
     <li><strong>Group Path Prefix</strong>: /magento</li> 
    </ul> </li> 
   <li><p>Click <strong>Save</strong>.</p> </li> 
  </ol> 
  <p>The external login module is the bridge between the login, the idp and the sync handler, that's why a new configuration that pairs the new magento idp with the default sync handler is needed. To configure the external login module:</p> 
  <ol> 
   <li><p>Navigate to <a href="http://localhost:4502/system/console/configMgr">http://localhost:4502/system/console/configMgr</a>.</p> </li> 
   <li><p>Click <strong>Apache Jackrabbit External Login Module</strong>.</p> <img imageRotate="0" src="assets/chlimage_1-10.jpeg" /></li> 
   <li><p>Enter the following information:</p> 
    <ul> 
     <li><p><strong>JAAS Ranking</strong>: 50</p> </li> 
     <li><p><strong>JAAS Control Flag:</strong> SUFFICIENT</p> </li> 
     <li><p><strong>JAAS Realm</strong>: &amp;lt;leave blank&amp;gt;</p> </li> 
     <li><p><strong>Identity Provider Name</strong>: magento</p> </li> 
     <li><p><strong>Sync Handler Name</strong>: default </p> </li> 
    </ul> </li> 
   <li><p>Click <strong>Save</strong>.</p> </li> 
  </ol> 
 </body> 
</html>