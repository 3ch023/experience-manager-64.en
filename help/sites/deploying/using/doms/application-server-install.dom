<?xml version="1.1" encoding="UTF-8" standalone="yes"?> 
<html> 
 <head> 
  <meta content="audience:deploying" name="primaryAudienceTag" /> 
  <meta content="Application Server Install" name="seoTitle" /> 
  <meta content="2018-04-30T03:26:37.771-0400" name="locHandOffDate" /> 
  <meta content="https://helpx.adobe.com/experience-manager/6-4/sites/deploying/using/application-server-install.html" name="publishExternalURL" /> 
  <meta content="help/components/pages/article-3" name="sling:resourceType" /> 
  <meta content="msm-service" name="cq:lastModifiedBy" /> 
  <meta content="2017-10-12T21:46:00.000-0400" name="qaDate" /> 
  <meta content="mix:versionable" name="jcr:mixinTypes" /> 
  <meta content="/etc/designs/help" name="cq:designPath" /> 
  <meta content="" name="jcr:versionHistory" /> 
  <meta content="2017-10-31T16:18:15.524-0400" name="firstPublishExternalDate" /> 
  <meta content="Application Server Install" name="jcr:title" /> 
  <meta content="false" name="isReadyForLocalization" /> 
  <meta content="remove-legacypath-6-1" name="jcr:lastModifiedBy" /> 
  <meta content="Guillaume Carlino" name="contentOwner" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES" name="primaryProductTag" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES;content_type:reference;topic_tags:deploying" name="cq:tags" /> 
  <meta content="" name="jcr:baseVersion" /> 
  <meta content="2018-04-03T08:39:24.200-0400" name="lastPublishExternalDate" /> 
  <meta content="Activate" name="cq:lastReplicationAction" /> 
  <meta content="2018-03-13T09:02:55.459-0400" name="jcr:created" /> 
  <meta content="457cee9e-97e4-4510-b156-2f49912448d0" name="jcr:uuid" /> 
  <meta content="" name="jcr:primaryType" /> 
  <meta content="/content/docs/en/aem/6-3/deploy/application-server-install" name="qaNotes" /> 
  <meta content="en_us" name="jcr:language" /> 
  <meta content="carlino@adobe.com" name="lr_lastReplicatedBy" /> 
  <meta content="2018-04-03T08:39:24.200-0400" name="topicBrowsingSortDate" /> 
  <meta content="2018-04-30T03:26:37.772-0400" name="cq:lastModified" /> 
  <meta content="2018-04-03T08:39:26.540-0400" name="cq:lastReplicated" /> 
  <meta content="b3d7811b-22f5-4b9f-beac-9100261939df" name="jcr:predecessors" /> 
  <meta content="admin" name="jcr:createdBy" /> 
  <meta content="2017-10-12T21:46:58.665-0400" name="mwpw_migration_script_version" /> 
  <meta content="/apps/help/templates/article-3" name="cq:template" /> 
  <meta content="Application Server Install" name="navTitle" /> 
  <meta content="/content/help/en/experience-manager/6-4/sites/deploying/morehelp/deploying;/content/help/en/experience-manager/6-4/sites/deploying/morehelp/deploying" name="moreHelpPaths" /> 
  <meta content="2018-04-03T08:39:24.200-0400" name="publishExternalDate" /> 
  <meta content="true" name="jcr:isCheckedOut" /> 
  <meta content="carlino" name="cq:lastReplicatedBy" /> 
  <meta content="Learn how to install AEM with an application server." name="seoDescription" /> 
 </head> 
 <body> 
  <note> 
   <p><span class="code">JAR</span> and <span class="code">WAR</span> are the file types AEM is released in. These formats are undergoing quality assurance to accomodate the support levels Adobe has committed to.</p> 
   <p> </p> 
  </note>  
  <p>This section tells you how to install Adobe Experience Manager (AEM) with an application server. Consult the <a href="../../../sites/deploying/using/technical-requirements.md#servletenginesapplicationservers">Supported Platforms</a> section to see the specific support levels provided for the individual application servers.<br /> </p> 
  <p>The installation steps of the following Application Servers are described:<br /> </p> 
  <ul> 
   <li><a href="#websphere85">WebSphere 8.5</a></li> 
   <li><a href="#jbosseap630640">JBoss EAP 6.3.0/6.4.0</a></li> 
   <li><a href="#oracleweblogic1213122">Oracle WebLogic 12.1.3/12.2</a></li> 
   <li><a href="#tomcat885">Tomcat 8/8.5</a></li> 
  </ul> 
  <p>Consult the appropriate application server documentation for more information on installing web applications, server configurations and how to start and stop the server.<br /> </p> 
  <note> 
   <p>If you are using Dynamic Media in a WAR deployment, please see the <a href="../../../assets/using/config-dynamic.md#enablingdynamicmedia">dynamic media documentation</a>. </p> 
  </note> 
  <h2>General Description</h2> 
  <h4>Default behaviour when installing AEM in an Application Server</h4> 
  <p>AEM comes as a single war file to deploy.</p> 
  <p>If deployed the following will happen by default:</p> 
  <ul> 
   <li>the run mode is <span class="code">author</span></li> 
   <li>the instance (Repository, Felix OSGI environment, bundles etc.) is installed in <span class="code">${user.dir}/crx-quickstart </span>where <span class="code">${user.dir}</span> is the current working directory, this path to crx-quickstart is called <span class="code">sling.home</span><br /> </li> 
   <li>the context root is the war file name e.g : <span class="code">aem-6</span><span class="uicontrol"><br /> </span></li> 
  </ul> 
  <h4>Configuration</h4> 
  <p>You can change the default behaviour in the following way:</p> 
  <ul> 
   <li>run mode : configure the <span class="code">sling.run.modes</span> parameter in the <span class="code">WEB-INF/web.xml</span> file of the AEM war file before deployment</li> 
   <li>sling.home: configure the <span class="code">sling.home</span> parameter in the <span class="code">WEB-INF/web.xml </span>file of the AEM war file before deployment<br /> </li> 
   <li>context root: rename the AEM war file<br /> </li> 
  </ul>  
  <h4>Publish installation</h4> 
  <p>To get a publish instance deployed you need to set the run mode to publish:<br /> </p> 
  <ul> 
   <li>Unpack the WEB-INF/web.xml from the AEM war file</li> 
   <li>Change sling.run.modes parameter to publish</li> 
   <li>Repack web.xml file into AEM war file</li> 
   <li>Deploy AEM war file<br /> </li> 
  </ul> 
  <h4>Installation check</h4> 
  <p>To check if all is installed you can:</p> 
  <ul> 
   <li>tail the <span class="code">error.log </span>file to see that all content is installed</li> 
   <li>look in <span class="code">/system/console</span> that all bundles are installed</li> 
  </ul> 
  <h4>Two Instances on the same Application Server</h4> 
  <p>For demonstration purposes it can be appropriate to install author and publish instance in one application server. For that do the following:</p> 
  <ol> 
   <li><p>Change sling.home variable and sling.run.modes variables of the publish instance.</p> </li> 
   <li><p>Unpack WEB-INF/web.xml file from the AEM war file.</p> </li> 
   <li><p>Change sling.home parameter to a different path, (absolute and relative paths are possible).</p> </li> 
   <li><p>Change sling.run.modes to publish for the publish instance.</p> </li> 
   <li><p>Repack the web.xml file.</p> </li> 
   <li><p>Rename the war files, so they have different names: e.g. one rename to aemauthor.war and the other to aempublish.war.</p> </li> 
   <li><p>Use higher memory settings, e.g. for default AEM instances use e.g.: -Xmx3072m</p> </li> 
   <li><p>Deploy the two web applications.</p> </li> 
   <li><p>After Deployment stop the two web applications.</p> </li> 
   <li><p>In both author and publish instances assure that in the sling.properties files the property felix.service.urlhandlers=false is set to false (default is that it is set to true).</p> </li> 
   <li><p>Start the two web applications again.</p> </li> 
  </ol>       
  <h2>Application Servers Installation Procedures</h2> 
  <h4>WebSphere 8.5</h4> 
  <p>Before a deployment read the <a href="#generaldescription">General Description</a> above.<br /> </p> 
  <p><strong>Server Preparation</strong></p> 
  <ul> 
   <li>Let Basic Auth Headers pass through: 
    <ul> 
     <li>One way to let AEM to authenticate a user is to disable the global administrative security of the WebSphere server, to do so: go to Security -&amp;gt; Global Security and uncheck the Enable administrative security checkbox, save and restart the server.</li> 
    </ul> </li> 
   <li>set <span class="code">"JAVA_OPTS= -Xmx2048m"</span></li> 
   <li>If you want to install AEM using context root = / then you have first to change the context root of the existing Default web application</li> 
  </ul> 
  <p><strong>Deploy AEM web application</strong><br /> </p> 
  <ul> 
   <li>Download AEM war file</li> 
   <li>Make your configurations In web.xml if needed (see above in the General Description) 
    <ul> 
     <li>Unpack WEB-INF/web.xml file</li> 
     <li>change sling.run.modes parameter to publish</li> 
     <li>uncomment sling.home initial parameter and set this path as you need</li> 
     <li>Repack web.xml file</li> 
    </ul> </li> 
   <li>Deploy AEM war file 
    <ul> 
     <li>Choose a context root (if you want to set the sling run modes you need to select the detailed steps of the deploy wizard, then specify it in step 6 of the wizard)</li> 
    </ul> </li> 
   <li>Start AEM web application</li> 
  </ul> 
  <h4>JBoss EAP 6.3.0/6.4.0</h4> 
  <p>Before a deployment read the <a href="#generaldescription">General Description</a> above.<br /> </p> 
  <p><strong>Prepare JBoss server</strong></p> 
  <p>Set Memory arguments in your conf file(e.g. <span class="code">standalone.conf</span>)</p> 
  <ul> 
   <li>JAVA_OPTS="-Xms64m -Xmx2048m"</li> 
  </ul> 
  <p>if you use the deployment-scanner for to install the AEM web application it might be good to increase the <span class="code">deployment-timeout,</span> for that set a <span class="code">deployment-tiimeout</span> attribute in the xml file of your instance (e.g <span class="code">configuration/standalone.xml)</span>:</p> 
  <codeblock gutter="true" class="syntax xml">
    &lt;subsystem&amp;nbsp;xmlns="urn:jboss:domain:deployment-scanner:1.1"&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;deployment-scanner&amp;nbsp;path="deployments"&amp;nbsp;relative-to="jboss.server.base.dir"&amp;nbsp;scan-interval="5000"&amp;nbsp;deployment-timeout="1000"/&gt;!!discoiqbr!!&lt;/subsystem&gt; 
  </codeblock> 
  <p><strong>Deploy AEM web application</strong></p> 
  <p>- Upload the AEM web application in your JBoss Administration Console.</p> 
  <p>- Enable the AEM web application.</p> 
  <h4>Oracle WebLogic 12.1.3/12.2</h4> 
  <p>Before a deployment read the <a href="#generaldescription">General Description</a> above.<br /> </p> 
  <p>This uses a simple Server Layout with only an Admin Server.</p> 
  <p><strong>WebLogic Server Preparation</strong></p> 
  <ul> 
   <li>In <span class="code">${myDomain}/config/config.xml </span>add to the security-configuration section: 
    <ul> 
     <li><span class="code">&amp;lt;enforce-valid-basic-auth-credentials&amp;gt;false&amp;lt;/enforce-valid-basic-auth-credentials&amp;gt;</span> see on <a href="http://xmlns.oracle.com/weblogic/domain/1.0/domain.xsd">http://xmlns.oracle.com/weblogic/domain/1.0/domain.xsd</a> for the correct position (per default to position it at the end of the section is ok)</li> 
    </ul> </li> 
  </ul> 
  <ul> 
   <li>Increase VM Memory settings: 
    <ul> 
     <li>open <span class="code">${myDomain}/bin/setDomainEnv.cmd</span> (resp .sh)search for WLS_MEM_ARGS, set e.g set <span class="code">WLS_MEM_ARGS_64BIT=-Xms256m -Xmx2048m</span></li> 
     <li>restart WebLogic Server</li> 
    </ul> </li> 
   <li>Create in <span class="code">${myDomain}</span> a packages folder and inside a cq folder and in it a Plan folder</li> 
  </ul> 
  <p><strong>Deploy AEM web application</strong><br /> </p> 
  <ul> 
   <li>Download AEM war file</li> 
   <li>Put the AEM war file into the ${myDomain}/packages/cq folder</li> 
   <li>Make your configurations In <span class="code">WEB-INF/web.xml</span> if needed (see above in the General Description) 
    <ul> 
     <li>Unpack <span class="code">WEB-INF/web.xml </span>file</li> 
     <li>change sling.run.modes parameter to publish</li> 
     <li>uncomment sling.home initial parameter and set this path as you need (see General Description)</li> 
     <li>Repack web.xml file</li> 
    </ul> </li> 
  </ul> 
  <ul> 
   <li>Deploy AEM war file as an Application, (for the other settings use the default settings)</li> 
   <li>The installation can take time...</li> 
   <li>Check that the installation has finished as mentioned above in the General Description (e.g. tailing the error.log)</li> 
   <li>You can change the context root in the Configuration tab of the web application in the WebLogic <span class="code">/console</span></li> 
  </ul> 
  <h4>Tomcat 8/8.5</h4> 
  <p>Before a deployment read the <a href="#generaldescription">General Description</a> above.<br /> </p> 
  <ul> 
   <li> 
    <ul> 
     <li>Increase VM memory settings: 
      <ul> 
       <li>In <span class="code">bin/catalina.bat</span> (resp <span class="code">catalina.sh</span> on unix) add the following setting:</li> 
       <li><span class="code">set "JAVA_OPTS= -Xmx2048m</span></li> 
      </ul> </li> 
    </ul> 
    <ul> 
     <li>Tomcat enables neither admin nor manager access at installation. Therefore you have to manually edit <span class="code">tomcat-users.xml</span> to allow access for these accounts: 
      <ul> 
       <li>Edit <span class="code">tomcat-users.xml</span> to include access for admin and manager. The configuration should look similar to the following example:</li> 
       <li><code class="code">&amp;lt;?xml version='1.0' encoding='utf-8'?&amp;gt;
         <discoiqbr /> &amp;lt;tomcat-users&amp;gt;
         <discoiqbr /> &amp;lt;role rolename="manager"/&amp;gt;
         <discoiqbr /> &amp;lt;role rolename="tomcat"/&amp;gt;
         <discoiqbr /> &amp;lt;role rolename="admin"/&amp;gt;
         <discoiqbr /> &amp;lt;role rolename="role1"/&amp;gt;
         <discoiqbr /> &amp;lt;role rolename="manager-gui"/&amp;gt;
         <discoiqbr /> &amp;lt;user username="both" password="tomcat" roles="tomcat,role1"/&amp;gt;
         <discoiqbr /> &amp;lt;user username="tomcat" password="tomcat" roles="tomcat"/&amp;gt;
         <discoiqbr /> &amp;lt;user username="admin" password="admin" roles="admin,manager-gui"/&amp;gt;
         <discoiqbr /> &amp;lt;user username="role1" password="tomcat" roles="role1"/&amp;gt;
         <discoiqbr /> &amp;lt;/tomcat-users&amp;gt;</code></li> 
      </ul> </li> 
    </ul> 
    <ul> 
     <li>If you like to deploy AEM with context root "/" then you have to change context root of the existing ROOT webapp: 
      <ul> 
       <li>Stop and undeploy ROOT webapp</li> 
       <li>Rename ROOT.war folder in tomcat's webapps folder</li> 
       <li>Start webapp again</li> 
      </ul> </li> 
    </ul> 
    <ul> 
     <li>If you install the AEM web application using the manager-gui then you need to increase the maximal size of an uploaded file, as the default only allows 50MB upload size. For that open the web.xml of the manager web application, <br /> <code class="code"> webapps/manager/WEB-INF/web.xml 
       <discoiqbr /> </code>and increase the max-file-size and max-request-size to at least 500MB, see the following <span class="code">multipart-config</span> example of such a a <span class="code">web.xml</span> file: 
      <ul> 
       <li><code class="code">&amp;lt;multipart-config&amp;gt;
         <discoiqbr /> &amp;lt;!-- 500MB max --&amp;gt;
         <discoiqbr /> &amp;lt;max-file-size&amp;gt;524288000&amp;lt;/max-file-size&amp;gt;
         <discoiqbr /> &amp;lt;max-request-size&amp;gt;524288000&amp;lt;/max-request-size&amp;gt;
         <discoiqbr /> &amp;lt;file-size-threshold&amp;gt;0&amp;lt;/file-size-threshold&amp;gt;
         <discoiqbr /> &amp;lt;/multipart-config&amp;gt;</code></li> 
      </ul> </li> 
    </ul> </li> 
   <li> 
    <ul> 
     <li>Download AEM war file</li> 
     <li>Make your configurations In web.xml if needed (see above in the General Description) 
      <ul> 
       <li>Unpack WEB-INF/web.xml file</li> 
       <li>change sling.run.modes parameter to publish</li> 
       <li>uncomment sling.home initial parameter and set this path as you need</li> 
       <li>Repack web.xml file</li> 
      </ul> </li> 
     <li>Rename AEM war file to ROOT.war if you like to deploy it as root webapp, rename it to e.g aemauthor.war if you like to have aemauthor as context root</li> 
     <li>copy it into tomcat's webapps folder</li> 
     <li>wait until AEM is installed</li> 
    </ul>  </li> 
  </ul> 
  <h2>Troubleshooting</h2> 
  <p>For information on dealing with issues that may come up during installation, see:</p> 
  <ul> 
   <li><a href="../../../sites/deploying/using/troubleshooting.md">Troubleshooting</a></li> 
  </ul> 
 </body> 
</html>