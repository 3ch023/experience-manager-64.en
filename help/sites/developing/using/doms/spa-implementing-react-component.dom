<?xml version="1.1" encoding="UTF-8" standalone="yes"?> 
<html> 
 <head> 
  <meta content="2018-12-11T04:52:25.934-0500" name="cq:lastReplicated" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES" name="primaryProductTag" /> 
  <meta content="mix:versionable" name="jcr:mixinTypes" /> 
  <meta content="This article presents an example of how to adapt a simple, existing React component to work with the AEM SPA Editor." name="seoDescription" /> 
  <meta content="reference-adjustment-service" name="cq:lastModifiedBy" /> 
  <meta content="" name="jcr:primaryType" /> 
  <meta content="2018-06-29T13:59:47.224-0400" name="firstPublishExternalDate" /> 
  <meta content="true" name="jcr:isCheckedOut" /> 
  <meta content="audience:developing" name="primaryAudienceTag" /> 
  <meta content="admin" name="jcr:createdBy" /> 
  <meta content="en_us" name="jcr:language" /> 
  <meta content="bohnert" name="contentOwner" /> 
  <meta content="2018-12-11T04:52:25.490-0500" name="lastPublishExternalDate" /> 
  <meta content="en" name="pageCreatedAt" /> 
  <meta content="Implementing a React Component for SPA" name="jcr:title" /> 
  <meta content="81280d51-5fd1-4a93-8251-a937c7733b23" name="jcr:uuid" /> 
  <meta content="" name="jcr:baseVersion" /> 
  <meta content="Activate" name="cq:lastReplicationAction" /> 
  <meta content="2018-12-11T04:52:25.500-0500" name="cq:lastModified" /> 
  <meta content="/etc/designs/help" name="cq:designPath" /> 
  <meta content="7a130997-63b3-41c3-a196-29074fdbda99" name="jcr:predecessors" /> 
  <meta content="2018-06-09T07:29:03.137-0400" name="jcr:created" /> 
  <meta content="bohnert" name="cq:lastReplicatedBy" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES;topic_tags:spa;content_type:reference" name="cq:tags" /> 
  <meta content="2018-12-11T04:52:25.490-0500" name="topicBrowsingSortDate" /> 
  <meta content="/content/help/en/experience-manager/6-4/sites/developing/morehelp/spa;/content/help/en/experience-manager/6-4/sites/developing/morehelp/spa" name="moreHelpPaths" /> 
  <meta content="" name="jcr:versionHistory" /> 
  <meta content="2018-12-11T04:52:25.490-0500" name="publishExternalDate" /> 
  <meta content="/apps/help/templates/article-3" name="cq:template" /> 
  <meta content="bohnert@adobe.com" name="lr_lastReplicatedBy" /> 
  <meta content="https://helpx.adobe.com/experience-manager/6-4/sites/developing/using/spa-implementing-react-component.html" name="publishExternalURL" /> 
  <meta content="help/components/pages/article-3" name="sling:resourceType" /> 
 </head> 
 <body> 
  <p>Single page applications (SPAs) can offer compelling experiences for website users. Developers want to be able to build sites using SPA frameworks and authors want to seamlessly edit content within AEM for a site built using SPA frameworks.</p> 
  <p>The SPA authoring feature offers a comprehensive solution for supporting SPAs within AEM. This article presents an example of how to adapt a simple, existing React component to work with the AEM SPA Editor.</p> 
  <h2>Introduction</h2> 
  <p>Thanks to the simple and lightweight contract that is required by AEM and established between the SPA and the SPA Editor, taking an existing Javascript application and adapting it for use with an SPA in AEM is a straightforward matter.</p> 
  <p>This article illustrates the example of the weather component on the We.Retail Journal sample SPA.</p> 
  <p>You should be familiar with the <a href="../../../sites/developing/using/spa-getting-started-react.md">structure of an SPA application for AEM</a> before reading this article.</p> 
  <h2>The Weather Component</h2> 
  <p>The weather component is found in the top-left of the We.Retail Journal app. It displays the current weather of a defined location, pulling weather data dynamically.</p> 
  <h3>Using the Weather Widget</h3> 
  <img imageRotate="0" src="assets/screen_shot_2018-06-08at143224.png" /> 
  <p>When authoring content of the SPA in the SPA Editor, the weather component appears as any other AEM component, complete with a toolbar, and is editable.</p> 
  <img imageRotate="0" src="assets/screen_shot_2018-06-08at143304.png" /> 
  <p>The city can be updated in a dialog just like any other AEM component.</p> 
  <img imageRotate="0" src="assets/screen_shot_2018-06-08at143446.png" /> 
  <p>The change is persisted and the component updates itself automatically with new weather data.</p> 
  <img imageRotate="0" src="assets/screen_shot_2018-06-08at143524.png" /> 
  <h3>Weather Component Implementation</h3> 
  <p>The weather component is actually based on a publicly-available React component, called <a href="https://www.npmjs.com/package/react-open-weather">React Open Weather</a>, that has been adapted to work as a component within the We.Retail Journal sample SPA application.</p> 
  <p>The following are snippets of the NPM documentation of the usage of the React Open Weather component.</p> 
  <img imageRotate="0" src="assets/screen_shot_2018-06-08at144723.png" /> 
  <img imageRotate="0" src="assets/screen_shot_2018-06-08at144215.png" /> 
  <p>Reviewing the code of the customized weather component (<span class="code">Weather.js</span>) in the We.Retail Journal application:</p> 
  <ul> 
   <li><strong>Line 16</strong>: The React Open Weather widget is loaded as required.</li> 
   <li><strong>Line 46</strong>: The <span class="code">MapTo</span> function relates this React component to a corresponding AEM component so that it can be edited in the SPA Editor.</li> 
   <li><strong>Lines 22-29</strong>: The <span class="code">EditConfig</span> is defined, checking if the city has been populated and defining the value if empty.</li> 
   <li><strong>Lines 31-44</strong>: The Weather component extends the <span class="code">Component</span> class and provides the required data as defined in the NPM usage documentation for the React Open Weather component and renders the component.</li> 
  </ul> 
  <codeblock gutter="true" class="syntax js">
    /*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~!!discoiqbr!!&amp;nbsp;~&amp;nbsp;Copyright&amp;nbsp;2018&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated!!discoiqbr!!&amp;nbsp;~!!discoiqbr!!&amp;nbsp;~&amp;nbsp;Licensed&amp;nbsp;under&amp;nbsp;the&amp;nbsp;Apache&amp;nbsp;License,&amp;nbsp;Version&amp;nbsp;2.0&amp;nbsp;(the&amp;nbsp;"License");!!discoiqbr!!&amp;nbsp;~&amp;nbsp;you&amp;nbsp;may&amp;nbsp;not&amp;nbsp;use&amp;nbsp;this&amp;nbsp;file&amp;nbsp;except&amp;nbsp;in&amp;nbsp;compliance&amp;nbsp;with&amp;nbsp;the&amp;nbsp;License.!!discoiqbr!!&amp;nbsp;~&amp;nbsp;You&amp;nbsp;may&amp;nbsp;obtain&amp;nbsp;a&amp;nbsp;copy&amp;nbsp;of&amp;nbsp;the&amp;nbsp;License&amp;nbsp;at!!discoiqbr!!&amp;nbsp;~!!discoiqbr!!&amp;nbsp;~&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;http://www.apache.org/licenses/LICENSE-2.0!!discoiqbr!!&amp;nbsp;~!!discoiqbr!!&amp;nbsp;~&amp;nbsp;Unless&amp;nbsp;required&amp;nbsp;by&amp;nbsp;applicable&amp;nbsp;law&amp;nbsp;or&amp;nbsp;agreed&amp;nbsp;to&amp;nbsp;in&amp;nbsp;writing,&amp;nbsp;software!!discoiqbr!!&amp;nbsp;~&amp;nbsp;distributed&amp;nbsp;under&amp;nbsp;the&amp;nbsp;License&amp;nbsp;is&amp;nbsp;distributed&amp;nbsp;on&amp;nbsp;an&amp;nbsp;"AS&amp;nbsp;IS"&amp;nbsp;BASIS,!!discoiqbr!!&amp;nbsp;~&amp;nbsp;WITHOUT&amp;nbsp;WARRANTIES&amp;nbsp;OR&amp;nbsp;CONDITIONS&amp;nbsp;OF&amp;nbsp;ANY&amp;nbsp;KIND,&amp;nbsp;either&amp;nbsp;express&amp;nbsp;or&amp;nbsp;implied.!!discoiqbr!!&amp;nbsp;~&amp;nbsp;See&amp;nbsp;the&amp;nbsp;License&amp;nbsp;for&amp;nbsp;the&amp;nbsp;specific&amp;nbsp;language&amp;nbsp;governing&amp;nbsp;permissions&amp;nbsp;and!!discoiqbr!!&amp;nbsp;~&amp;nbsp;limitations&amp;nbsp;under&amp;nbsp;the&amp;nbsp;License.!!discoiqbr!!&amp;nbsp;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/!!discoiqbr!!import&amp;nbsp;React,&amp;nbsp;{Component}&amp;nbsp;from&amp;nbsp;'react';!!discoiqbr!!import&amp;nbsp;ReactWeather&amp;nbsp;from&amp;nbsp;'react-open-weather';!!discoiqbr!!import&amp;nbsp;{MapTo}&amp;nbsp;from&amp;nbsp;'@adobe/cq-react-editable-components';!!discoiqbr!!!!discoiqbr!!require('./Weather.css');!!discoiqbr!!!!discoiqbr!!const&amp;nbsp;WeatherEditConfig&amp;nbsp;=&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;emptyLabel:&amp;nbsp;'Weather',!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;isEmpty:&amp;nbsp;function()&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;!this.props&amp;nbsp;||&amp;nbsp;!this.props.cq_model&amp;nbsp;||&amp;nbsp;!this.props.cq_model.city&amp;nbsp;||&amp;nbsp;this.props.cq_model.city.trim().length&amp;nbsp;&lt;&amp;nbsp;1;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!};!!discoiqbr!!!!discoiqbr!!class&amp;nbsp;Weather&amp;nbsp;extends&amp;nbsp;Component&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;render()&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;let&amp;nbsp;apiKey&amp;nbsp;=&amp;nbsp;"12345678901234567890";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;let&amp;nbsp;city;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&amp;nbsp;(this.props.cq_model)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;city&amp;nbsp;=&amp;nbsp;this.props.cq_model.city;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;&lt;ReactWeather&amp;nbsp;key={'react-weather'&amp;nbsp;+&amp;nbsp;Date.now()}&amp;nbsp;forecast="today"&amp;nbsp;apikey={apiKey}&amp;nbsp;type="city"&amp;nbsp;city={city}&amp;nbsp;/&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!}!!discoiqbr!!!!discoiqbr!!MapTo('we-retail-journal/global/components/weather')(Weather,&amp;nbsp;WeatherEditConfig);!!discoiqbr!! 
  </codeblock> 
  <p>Although a back-end component must already exist, the front-end developer can leverage the React Open Weather component in the We.Retail Journal SPA with very little coding.</p> 
  <h2>Next Step</h2> 
  <p>For further information about developing SPAs for AEM see the article <a href="../../../sites/developing/using/spa-architecture.md">Developing SPAs for AEM</a>.</p> 
 </body> 
</html>