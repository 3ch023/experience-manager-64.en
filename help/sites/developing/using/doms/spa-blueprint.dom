<?xml version="1.1" encoding="UTF-8" standalone="yes"?> 
<html> 
 <head> 
  <meta content="" name="jcr:versionHistory" /> 
  <meta content="/content/help/en/experience-manager/6-4/sites/developing/morehelp/spa;/content/help/en/experience-manager/6-4/sites/developing/morehelp/spa" name="moreHelpPaths" /> 
  <meta content="This document describes the general, framework-independent contract that any SPA framework should fulfill in order to implement editable SPA components within AEM." name="seoDescription" /> 
  <meta content="admin" name="jcr:createdBy" /> 
  <meta content="audience:developing" name="primaryAudienceTag" /> 
  <meta content="2018-05-08T12:45:14.713-0400" name="locHandOffDate" /> 
  <meta content="SPA Blueprint" name="jcr:title" /> 
  <meta content="SPA Blueprint" name="seoTitle" /> 
  <meta content="bohnert@adobe.com" name="lr_lastReplicatedBy" /> 
  <meta content="mix:versionable" name="jcr:mixinTypes" /> 
  <meta content="true" name="jcr:isCheckedOut" /> 
  <meta content="" name="jcr:baseVersion" /> 
  <meta content="2018-12-11T04:52:16.761-0500" name="lastPublishExternalDate" /> 
  <meta content="d0315a6b-b81f-4b80-ac61-9a22b08cfa2a" name="jcr:uuid" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES" name="primaryProductTag" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES;topic_tags:spa;content_type:reference" name="cq:tags" /> 
  <meta content="https://helpx.adobe.com/experience-manager/6-4/sites/developing/using/spa-blueprint.html" name="publishExternalURL" /> 
  <meta content="en" name="pageCreatedAt" /> 
  <meta content="/etc/designs/help" name="cq:designPath" /> 
  <meta content="reference-adjustment-service" name="cq:lastModifiedBy" /> 
  <meta content="" name="jcr:primaryType" /> 
  <meta content="help/components/pages/article-3" name="sling:resourceType" /> 
  <meta content="bohnert" name="cq:lastReplicatedBy" /> 
  <meta content="2018-12-11T04:52:16.761-0500" name="topicBrowsingSortDate" /> 
  <meta content="Activate" name="cq:lastReplicationAction" /> 
  <meta content="c53f5605-ab7f-4fdb-8947-fbbf7ded183f" name="jcr:predecessors" /> 
  <meta content="/apps/help/templates/article-3" name="cq:template" /> 
  <meta content="2018-12-11T04:52:16.771-0500" name="cq:lastModified" /> 
  <meta content="2018-12-11T04:52:16.943-0500" name="cq:lastReplicated" /> 
  <meta content="2018-09-07T12:31:21.966-0400" name="firstPublishExternalDate" /> 
  <meta content="en_us" name="jcr:language" /> 
  <meta content="2018-04-12T07:28:37.859-0400" name="jcr:created" /> 
  <meta content="2018-12-11T04:52:16.761-0500" name="publishExternalDate" /> 
 </head> 
 <body> 
  <p>To enable the author to use the AEM SPA Editor to edit the content of an SPA, there are requirements that the SPA must fulfill, which are described in this document.</p> 
  <h2>Introduction</h2> 
  <p>This document describes the general contract that any SPA framework should fulfill (i.e. the kind of AEM support layer) in order to implement editable SPA components within AEM.<br /> </p> 
  <note> 
   <p>The following requirements are framework-independent. If these requirements are fulfilled, a framework-specific layer composed of modules, components, and services can be provided.</p> 
   <p><strong>These requirements are already met for the React and Angular frameworks in AEM.</strong> The requirements in this blueprint are only relevant if you wish to implement another framework for use with AEM.<br /> </p> 
  </note> 
  <note> 
   <p>Although the SPA capabilities of AEM are framework-independent, currently only the React and Angular frameworks are is supported.<br /> </p> 
  </note> 
  <p>To enable the author to use the AEM Page Editor to edit the data exposed by an Single Page Application framework, a project must be able to interpret the structure of the model representing the semantic of the data stored for an application within the AEM repository. To achieve this goal, two framework-agnostic libraries are provided: the <span class="code">PageModelManager</span> and the <span class="code">ComponentMapping</span>.</p> 
  <h3>PageModelManager</h3> 
  <p>The <span class="code">PageModelManager</span> library is provided as an NPM package to be used by an SPA project. It accompanies the SPA and serves as a data model manager.</p> 
  <p>On behalf of the SPA, it abstracts the retrieval and management of the JSON structure that represents the actual content structure. It is also responsible for syncing with the SPA to let it know when it has to re-render its components.</p> 
  <p>See the NPM package <a href="https://www.npmjs.com/package/@adobe/cq-spa-page-model-manager">@adobe/cq-spa-page-model-manager</a></p> 
  <p>When initializing the <span class="code">PageModelManager</span>, the library first loads the provided root model of the App (via parameter, meta property, or current URL). If the library identifies that the model of the current page is not part of the root model it fetches and include it as the model of a child page.</p> 
  <img imageRotate="0" src="assets/page_model_consolidation.png" /> 
  <h3>ComponentMapping</h3> 
  <p>The <span class="code">ComponentMapping</span> module is provided as an NPM package to the front-end project. It stores front-end components and provides a way for the SPA to map front-end components to AEM resource types. This enables a dynamic resolution of components when parsing the JSON model of the application.</p> 
  <p>Each items present in the model contains a <span class="code">:type</span> field that exposes an AEM resource type. When mounted, the front-end component can render itself using the fragment of model it has received from the underlying libraries.</p> 
  <h4>Dynamic Model to Component Mapping</h4> 
  <p>For details about how the dynamic model to component mapping occurs in the Javascript SPA SDK for AEM see the article <a href="../../../sites/developing/using/spa-dynamic-model-to-component-mapping.md">Dynamic Model to Component Mapping for SPAs</a>.<br /> </p> 
  <h3>Framework-Specific Layer</h3> 
  <p>A third layer must be implemented for each front end framework. This third library is responsible for interacting with the underlying libraries and provide a series of well-integrated and easy-to-use entry points for interacting with the data model.</p> 
  <p>The remainder of this document describes the requirements of this intermediary framework specific layer and aspires to be framework-independent. By respecting the following requirements, a framework-specific layer can be provided for the project components to interact with the underlying libraries in charge of managing the data model.</p> 
  <h2>General Concepts</h2> 
  <h3>Page Model</h3> 
  <p>The content structure of the page is stored in AEM. The model of the page is used to map and instantiate SPA components. The SPA developers create SPA components which they map to AEM components. To do this, they use the resource type (or path to the AEM component) as a unique key.</p> 
  <p>The SPA components must be in synch with the page model and be updated with any changes to its content accordingly. A pattern leveraging dynamic components must be used to instantiate components on the fly following the provided page model structure.</p> 
  <h3>Meta Fields</h3> 
  <p>The page model leverages the JSON Model Exporter, which is itself based on the <a href="https://sling.apache.org/documentation/bundles/models.html">Sling Model</a> API. The exportable sling models expose the following list of fields in order to enable the underlying libraries interpret the data model:</p> 
  <ul> 
   <li><span class="code">:type</span>: Type of the AEM resource (default = resource type)</li> 
   <li><span class="code">:children</span>: Hierarchical children of the current resource. Children are not part of the inner content of the current resource (can be found on items representing a page)</li> 
   <li><span class="code">:hierarchyType</span>: Hierarchical type of a resource. The <span class="code">PageModelManager</span> currently supports the page type</li> 
   <li><span class="code">:items</span>: Child content resources of the current resource (nested structure, only present on containers)</li> 
   <li><span class="code">:itemsOrder</span>: Ordered list of the children. The JSON map object doesn't guaranty the order of its fields. By having both the map and the current array the consumer of the API has the benefits of both structures</li> 
   <li><span class="code">:path</span>: Content path of an item (present on items representing a page)</li> 
  </ul> 
  <p>See also <a href="/content/help/en/experience-manager/kt/sites/using/content-services-tutorial-use">Getting Started with AEM Content Services.</a></p> 
  <h3>Framework-Specific Module</h3> 
  <p>Separating concerns helps to facilitate project implementation. Therefore an npm-specific package should be provided. This package is responsible for aggregating and exposing the base modules, services, and components. These components must encapsulate the data model management logic and provide access to the data the project's component is expecting. The module is also responsible for transitively exposing useful entry points of the underlying libraries.</p> 
  <p>To facilitate the interoperability of the libraries, Adobe advise the framework-specific module to bundle the following libraries. If necessary, the layer can encapsulate and adapt the underlying APIs before exposing them to the project.</p> 
  <ul> 
   <li><a href="https://www.npmjs.com/package/@adobe/cq-spa-page-model-manager">@adobe/cq-spa-page-model-manager</a></li> 
   <li><a href="https://www.npmjs.com/package/@adobe/cq-spa-component-mapping">@adobe/cq-spa-component-mapping</a></li> 
  </ul> 
  <h4>Implementations</h4> 
  <h4>React</h4> 
  <p>npm module: <a href="https://www.npmjs.com/package/@adobe/cq-react-editable-components">@adobe/cq-react-editable-components</a></p> 
  <h4>Angular</h4> 
  <p>npm module: coming soon</p> 
  <h2>Main Services and Components</h2> 
  <p>The following entities should be implemented in accordance with the guidelines specific to each framework. Based on the framework architecture, the implementation can vary widely, but the described functionalities must be provided.</p> 
  <h3>The Model Provider</h3> 
  <p>Project components must delegate access to the fragments of a model to a Model Provider. The Model Provider is then in charge of listening for changes made to the specified fragment of the model and return the updated model to the delegating component.</p> 
  <p>To do this, the Model Provider must register to the <span class="code"><a href="../../../sites/developing/using/spa-blueprint.md#main-pars-header-249430796">PageModelManager</a></span>. Then when a change occurs it receives and and pass the updated data to the delegating component. By convention, the property made available to the delegating component that will carry the fragment of model is named <span class="code">cqModel</span>. The implementation is free to provide this property to the component but should consider aspects such as the integration with framework architecture, discoverability, and ease of use.</p> 
  <h3>The Component HTML Decorator</h3> 
  <p>The Component Decorator is responsible for decorating the outer HTML of the element of each component instances with a series of data attributes and class names expected by the Page Editor.</p> 
  <h4>Component Declaration</h4> 
  <p>The following meta data must be added to the outer HTML element produced by the project's component. They enable the Page Editor to retrieve the corresponding editing configuration.</p> 
  <ul> 
   <li><span class="code">data-cq-data-path</span>: Path to the resource relative to the <span class="code">jcr:content</span></li> 
  </ul> 
  <h4>Editing Capability Declaration and Placeholder</h4> 
  <p>The following meta data and class names must be added to the outer HTML element produced by the project's component. They enable the Page Editor to offer related functionalities.</p> 
  <ul> 
   <li><span class="code">cq-placeholder</span>: Class name that identifies the placeholder for an empty component</li> 
   <li><span class="code">data-emptytext</span>: Label to be displayed by the overlay when a component instance is empty</li> 
  </ul> 
  <p><strong>Placeholder for Empty Components</strong></p> 
  <p>Each component must be extended with a functionality that will decorate the outer HTML element with data attributes and class names specific to placeholders and related overlays when the component is identified as empty.</p> 
  <p><strong>About the Emptiness of a Component</strong></p> 
  <ul> 
   <li>Is the component logically empty?</li> 
   <li>What should be the label displayed by the overlay when the component is empty?<br /> </li> 
  </ul> 
  <h3>Container</h3> 
  <p>A container is a component meant to contain and render child components. To do so, the container iterates over the <span class="code">:itemsOrder</span>, <span class="code">:items</span> and <span class="code">:children</span> properties of its model.</p> 
  <p>The container dynamically gets the child components from the store of the <span class="code"><a href="../../../sites/developing/using/spa-blueprint.md#main-pars-header-906602219">ComponentMapping</a></span> library. The container then extends the child component with the Model Provider capabilities and finally instantiate it.</p> 
  <h3>Page</h3> 
  <p>The <span class="code">Page</span> component extends the <span class="code">Container</span> component. A container is a component meant to contain and render child components including child pages. To do so, the container iterates over the <span class="code">:itemsOrder</span>, <span class="code">:items</span>, and <span class="code">:children</span> properties of its model. The <span class="code">Page</span> component dynamically gets the child components from the store of the <a href="../../../sites/developing/using/spa-blueprint.md#main-pars-header-906602219">ComponentMapping</a> library. The <span class="code">Page</span> is responsible for instantiating child components.</p> 
  <h3>Responsive Grid</h3> 
  <p>The Responsive Grid component is a container. It contains an specific variant of the Model Provider representing its columns. The Responsive Grid and its columns are responsible for decorating the outer HTML element of the project's component with the specific class names contained in the model.</p> 
  <p>The Responsive Grid component should come pre-mapped to its AEM counterpart as this component is complex and rarely customized.</p> 
  <h4>Specific Model Fields</h4> 
  <ul> 
   <li><span class="code">gridClassNames:</span> Provided class names for the responsive grid</li> 
   <li><span class="code">columnClassNames:</span> Provided class names for the responsive column</li> 
  </ul> 
  <p>See also the npm resource <a href="https://www.npmjs.com/package/@adobe/cq-react-editable-components#srccomponentsresponsivegridjsx">@adobe/cq-react-editable-components#srccomponentsresponsivegridjsx</a></p> 
  <h4>Placeholder of the Reponsive Grid</h4> 
  <p>The SPA component is mapped to a graphical container such as the Responsive Grid and must add a virtual child placeholder when the content is being authored. When the content of the SPA is being authored by the Page Editor, that content is embedded into the editor using an iframe and the <span class="code">data-cq-editor</span> attribute is added to the document node of that content. When the <span class="code">data-cq-editor</span> attribute is present, the container must include an HTMLElement to represent the area with which the author interacts when inserting a new component into the page.</p> 
  <p>For example:<br /> </p> 
  <codeblock class="syntax js">
    &lt;div&amp;nbsp;data-cq-data-path={"path/to/the/responsivegrid/*"}&amp;nbsp;className="new&amp;nbsp;section&amp;nbsp;aem-Grid-newComponent"/&gt; 
  </codeblock> 
  <note> 
   <p>The class names used in the example are currently required by the page editor.</p> 
   <ul> 
    <li><span class="code">"new section"</span>: Indicates that the current element is the container's placeholder</li> 
    <li><span class="code">"aem-Grid-newComponent"</span>: Normalizes the component for the layout authoring</li> 
   </ul> 
  </note> 
  <h4>Component Mapping</h4> 
  <p>The underlying <a href="../../../sites/developing/using/spa-blueprint.md#main-pars-header-906602219">Component Mapping</a> library and its <span class="code">MapTo</span> function can be encapsulated and extended to provide the functionalities relative to the edit configuration provided alongside the current component class.<br /> </p> 
  <codeblock gutter="true" class="syntax js">
    const&amp;nbsp;EditConfig&amp;nbsp;=&amp;nbsp;{!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;emptyLabel:&amp;nbsp;'My&amp;nbsp;Component',!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;isEmpty:&amp;nbsp;function()&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;!this.props&amp;nbsp;||&amp;nbsp;!this.props.cqModel&amp;nbsp;||&amp;nbsp;this.props.cqModel.isEmpty;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!};!!discoiqbr!!&amp;nbsp;!!discoiqbr!!class&amp;nbsp;MyComponent&amp;nbsp;extends&amp;nbsp;Component&amp;nbsp;{!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;render()&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;&lt;div&amp;nbsp;className={'my-component'}&gt;&lt;/div&gt;;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!}!!discoiqbr!!&amp;nbsp;!!discoiqbr!!MapTo('component/resource/path')(MyComponent,&amp;nbsp;EditConfig); 
  </codeblock> 
  <p>In the above implementation, the project component is extended with the emptiness functionality before the being actually registered in the <a href="../../../sites/developing/using/spa-blueprint.md#main-pars-header-906602219">Component Mapping</a> store. This is done by encapsulating and extending the <span class="code"><a href="/content#main-pars_header_906602219">ComponentMapping</a></span> library to introduce the support of the <span class="code">EditConfig</span> configuration object:</p> 
  <codeblock gutter="true" class="syntax js">
    /**!!discoiqbr!!&amp;nbsp;*&amp;nbsp;Configuration&amp;nbsp;object&amp;nbsp;in&amp;nbsp;charge&amp;nbsp;of&amp;nbsp;providing&amp;nbsp;the&amp;nbsp;necessary&amp;nbsp;data&amp;nbsp;expected&amp;nbsp;by&amp;nbsp;the&amp;nbsp;page&amp;nbsp;editor&amp;nbsp;to&amp;nbsp;initiate&amp;nbsp;the&amp;nbsp;authoring.&amp;nbsp;The&amp;nbsp;provided&amp;nbsp;data&amp;nbsp;will&amp;nbsp;be&amp;nbsp;decorating&amp;nbsp;the&amp;nbsp;associated&amp;nbsp;component!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;@typedef&amp;nbsp;{{}}&amp;nbsp;EditConfig!!discoiqbr!!&amp;nbsp;*&amp;nbsp;@property&amp;nbsp;{String}&amp;nbsp;[dragDropName]&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;If&amp;nbsp;defined,&amp;nbsp;adds&amp;nbsp;a&amp;nbsp;specific&amp;nbsp;class&amp;nbsp;name&amp;nbsp;enabling&amp;nbsp;the&amp;nbsp;drag&amp;nbsp;and&amp;nbsp;drop&amp;nbsp;functionality!!discoiqbr!!&amp;nbsp;*&amp;nbsp;@property&amp;nbsp;{String}&amp;nbsp;emptyLabel&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Label&amp;nbsp;to&amp;nbsp;be&amp;nbsp;displayed&amp;nbsp;by&amp;nbsp;the&amp;nbsp;placeholder&amp;nbsp;when&amp;nbsp;the&amp;nbsp;component&amp;nbsp;is&amp;nbsp;empty.&amp;nbsp;Optionally&amp;nbsp;returns&amp;nbsp;an&amp;nbsp;empty&amp;nbsp;text&amp;nbsp;value!!discoiqbr!!&amp;nbsp;*&amp;nbsp;@property&amp;nbsp;{function}&amp;nbsp;isEmpty&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Should&amp;nbsp;the&amp;nbsp;component&amp;nbsp;be&amp;nbsp;considered&amp;nbsp;empty.&amp;nbsp;The&amp;nbsp;function&amp;nbsp;is&amp;nbsp;called&amp;nbsp;using&amp;nbsp;the&amp;nbsp;context&amp;nbsp;of&amp;nbsp;the&amp;nbsp;wrapper&amp;nbsp;component&amp;nbsp;giving&amp;nbsp;you&amp;nbsp;access&amp;nbsp;to&amp;nbsp;the&amp;nbsp;component&amp;nbsp;model!!discoiqbr!!&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;!!discoiqbr!!/**!!discoiqbr!!&amp;nbsp;*&amp;nbsp;Map&amp;nbsp;a&amp;nbsp;React&amp;nbsp;component&amp;nbsp;with&amp;nbsp;the&amp;nbsp;given&amp;nbsp;resource&amp;nbsp;types.&amp;nbsp;If&amp;nbsp;an&amp;nbsp;{@link&amp;nbsp;EditConfig}&amp;nbsp;is&amp;nbsp;provided&amp;nbsp;the&amp;nbsp;&lt;i&gt;clazz&lt;/i&gt;&amp;nbsp;is&amp;nbsp;wrapped&amp;nbsp;to&amp;nbsp;provide&amp;nbsp;edition&amp;nbsp;capabilities&amp;nbsp;on&amp;nbsp;the&amp;nbsp;AEM&amp;nbsp;Page&amp;nbsp;Editor!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;{string[]}&amp;nbsp;resourceTypes&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;List&amp;nbsp;of&amp;nbsp;resource&amp;nbsp;types&amp;nbsp;for&amp;nbsp;which&amp;nbsp;to&amp;nbsp;use&amp;nbsp;the&amp;nbsp;given&amp;nbsp;&lt;i&gt;clazz&lt;/i&gt;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;{class}&amp;nbsp;clazz&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;Class&amp;nbsp;to&amp;nbsp;be&amp;nbsp;instantiated&amp;nbsp;for&amp;nbsp;the&amp;nbsp;given&amp;nbsp;resource&amp;nbsp;types!!discoiqbr!!&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;{EditConfig}&amp;nbsp;[editConfig]&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;Configuration&amp;nbsp;object&amp;nbsp;for&amp;nbsp;enabling&amp;nbsp;the&amp;nbsp;edition&amp;nbsp;capabilities!!discoiqbr!!&amp;nbsp;*&amp;nbsp;@returns&amp;nbsp;{class}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;The&amp;nbsp;resulting&amp;nbsp;decorated&amp;nbsp;Class!!discoiqbr!!&amp;nbsp;*/!!discoiqbr!!ComponentMapping.map&amp;nbsp;=&amp;nbsp;function&amp;nbsp;map&amp;nbsp;(resourceTypes,&amp;nbsp;clazz,&amp;nbsp;editConfig)&amp;nbsp;{}; 
  </codeblock> 
  <h2>Contract wtih the Page Editor</h2> 
  <p>The project components must generate at a minimum the following data attributes to allow the editor to interact with them.</p> 
  <ul> 
   <li><span class="code">data-cq-data-path</span>: Relative path of the component as provided by the <span class="code">PageModel</span> (e.g., <span class="code">"root/responsivegrid/image"</span>). This attribute should not be added to pages.</li> 
  </ul> 
  <p>In summary, to be interpreted by the page editor as editable, a project component must respect the following contract:</p> 
  <ul> 
   <li>Provide the expected attributes to associate a front end component instance to an AEM resource.</li> 
   <li>Provide the expected series of attributes and class names that enables the creation of empty placeholders.</li> 
   <li>Provide the expected class names enabling the drag-and-drop of assets.</li> 
  </ul> 
  <h3>Typical HTML Element Structure</h3> 
  <p>The following fragment illustrates the typical HTML representation of a page content structure. Here are a few important points:</p> 
  <ul> 
   <li>The responsive grid element carries class names prefixed with <span class="code">aem-Grid--</span></li> 
   <li>The responsive column element carries class names prefixed with <span class="code">aem-GridColumn--</span></li> 
   <li>A responsive grid which is also the column of a parent grid is wrapped such as the two previous prefixes are not appearing on the same element</li> 
   <li>Elements corresponding to editable resources carry a <span class="code">data-cq-data-path</span> property. See the <a href="#main-pars-header-582373595">Contract wtih the Page Editor</a> section of this document.<br /> </li> 
  </ul> 
  <codeblock gutter="true" class="syntax js">
    &lt;div&amp;nbsp;data-cq-data-path="/content/page"&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;div&amp;nbsp;class="aem-Grid&amp;nbsp;aem-Grid--12&amp;nbsp;aem-Grid--default--12"&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;div&amp;nbsp;class="aem-container&amp;nbsp;aem-GridColumn&amp;nbsp;aem-GridColumn--default--12"&amp;nbsp;data-cq-data-path="/content/page/jcr:content/root/responsivegrid"&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;div&amp;nbsp;class="aem-Grid&amp;nbsp;aem-Grid--12&amp;nbsp;aem-Grid--default--12"&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;div&amp;nbsp;class="cmp-image&amp;nbsp;cq-dd-image&amp;nbsp;aem-GridColumn&amp;nbsp;aem-GridColumn--default--12"&amp;nbsp;data-cq-data-path="/root/responsivegrid/image"&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;img&amp;nbsp;src="/content/we-retail-spa-sample/react/jcr%3acontent/root/responsivegrid/image.img.jpeg/1512113734019.jpeg"&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/div&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/div&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/div&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/div&gt;!!discoiqbr!!&lt;/div&gt; 
  </codeblock> 
  <h2>Navigation and Routing</h2> 
  <p>The App owns the routing. The front end developer first needs to implement a Navigation component (mapped to an AEM navigation component). This component would render URL links to be used in conjunction with a series of routes that will display or hide fragments of content.</p> 
  <p>The underlying <a href="../../../sites/developing/using/spa-blueprint.md#main-pars-header-249430796"><span class="code">PageModelManager</span></a> library and its <span class="code"><a href="../../../sites/developing/using/spa-routing.md">ModelRouter</a></span> module (enabled by default) are responsible for pre-fetching and providing access to the model associated with a given resource path.</p> 
  <p>The two entities relate to the notion of routing but the <span class="code"><a href="../../../sites/developing/using/spa-routing.md">ModelRouter</a></span> is only responsible for having the <span class="code"><a href="../../../sites/developing/using/spa-blueprint.md#main-pars-header-249430796">PageModelManager</a></span> loaded with a data model structured in sync with the current application state.</p> 
  <p>See the article <a href="../../../sites/developing/using/spa-routing.md">SPA Model Routing</a> for more information.<br /> </p> 
  <h2>SPA in Action</h2> 
  <p>See how a simple SPA works and experiment with an SPA yourself by continuing on to the document <a href="../../../sites/developing/using/spa-getting-started-react.md">Getting Started with SPAs in AEM</a>.<br /> </p> 
  <h2>Further Reading</h2> 
  <p>For more information about SPAs in AEM, see the following documents:</p> 
  <ul> 
   <li><a href="../../../sites/developing/using/spa-overview.md">SPA Authoring Overview</a> for an overview of SPAs in AEM and the communication model<br /> </li> 
   <li><a href="../../../sites/developing/using/spa-getting-started-react.md">Getting Started with SPAs in AEM</a> for a guide to a simple SPA and how it works</li> 
  </ul> 
 </body> 
</html>