<?xml version="1.1" encoding="UTF-8" standalone="yes"?> 
<html> 
 <head> 
  <meta content="Guillaume Carlino" name="contentOwner" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES" name="primaryProductTag" /> 
  <meta content="en_us" name="jcr:language" /> 
  <meta content="carlino@adobe.com" name="lr_lastReplicatedBy" /> 
  <meta content="Activate" name="cq:lastReplicationAction" /> 
  <meta content="2017-10-12T21:46:58.665-0400" name="mwpw_migration_script_version" /> 
  <meta content="2017-10-31T16:17:10.038-0400" name="firstPublishExternalDate" /> 
  <meta content="/content/help/en/experience-manager/6-4/sites/developing/morehelp/introduction;/content/help/en/experience-manager/6-4/sites/developing/morehelp/introduction" name="moreHelpPaths" /> 
  <meta content="2018-11-13T10:39:17.898-0500" name="topicBrowsingSortDate" /> 
  <meta content="mix:versionable" name="jcr:mixinTypes" /> 
  <meta content="2018-11-13T10:39:17.898-0500" name="lastPublishExternalDate" /> 
  <meta content="help/components/pages/article-3" name="sling:resourceType" /> 
  <meta content="2017-10-12T21:46:58.665-0400" name="qaDate" /> 
  <meta content="true" name="jcr:isCheckedOut" /> 
  <meta content="" name="jcr:baseVersion" /> 
  <meta content="2018-11-13T10:39:17.907-0500" name="cq:lastModified" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES;topic_tags:introduction;content_type:reference" name="cq:tags" /> 
  <meta content="15f8b82a-f5b7-4d7f-99fc-941b24617574" name="jcr:uuid" /> 
  <meta content="carlino" name="cq:lastReplicatedBy" /> 
  <meta content="The CSRF Protection Framework" name="jcr:title" /> 
  <meta content="2018-05-08T12:41:42.022-0400" name="locHandOffDate" /> 
  <meta content="2018-11-13T10:39:17.942-0500" name="cq:lastReplicated" /> 
  <meta content="admin" name="jcr:createdBy" /> 
  <meta content="false" name="isReadyForLocalization" /> 
  <meta content="" name="jcr:versionHistory" /> 
  <meta content="2018-01-19T19:04:21.211-0500" name="jcr:created" /> 
  <meta content="The CSRF Protection Framework" name="navTitle" /> 
  <meta content="/etc/designs/help" name="cq:designPath" /> 
  <meta content="/apps/help/templates/article-3" name="cq:template" /> 
  <meta content="" name="jcr:primaryType" /> 
  <meta content="audience:developing" name="primaryAudienceTag" /> 
  <meta content="The framework makes use of tokens to guarantee that the client request is legitimate" name="seoDescription" /> 
  <meta content="The CSRF Protection Framework" name="seoTitle" /> 
  <meta content="2018-11-13T10:39:17.898-0500" name="publishExternalDate" /> 
  <meta content="/content/docs/en/aem/6-3/develop/security/csrf-protection" name="qaNotes" /> 
  <meta content="af2c792b-6604-4bbc-baff-e9c68d2104c9" name="jcr:predecessors" /> 
  <meta content="carlino" name="cq:lastModifiedBy" /> 
  <meta content="https://helpx.adobe.com/experience-manager/6-4/sites/developing/using/csrf-protection.html" name="publishExternalURL" /> 
 </head> 
 <body> 
  <p>In addition to the Apache Sling Referrer Filter, Adobe also provides a new CSRF Protection Framework to protect against this type of attack.</p> 
  <p>The framework makes use of tokens to guarantee that the client request is legitimate. The tokens are generated when the form is sent to the client and validated when the form is sent back to the server.</p> 
  <note> 
   <p>There are no tokens on the publish instances for anonymous users.</p> 
  </note> 
  <h3>Requirements</h3> 
  <p><strong><u>Dependencies</u></strong></p> 
  <p>Any component that relies on the <span class="code">granite.jquery</span> dependency will benefit from the CSRF Protection Framework automatically. If this is not the case for any of your components, you must declare a dependency to <span class="code">granite.csrf.standalone</span> before you can use the framework.</p> 
  <p><strong><u>Replicating the Crypto Key</u></strong></p> 
  <p>In order to make use of the tokens, you need to replicate the <span class="code">/etc/keys/hmac</span> binary to all of the instances in your deployment. A convenient way to copy the HMAC key to all the instances is to create a package containing the key and install it via the Package Manager on all the instances.</p>  
  <note> 
   <p>Make sure you also make the necessary <a href="/content/help/en/experience-manager/dispatcher/user-guide">Dispatcher configuration changes</a> in order to use the CSRF Protection Framework.<br /> </p> 
  </note>   
  <note> 
   <p>If you use the manifest cache with your web application, make sure you add "<strong>*</strong>" to the manifest in order to make sure the token does not take the CSRF token generation call offline. For more information, consult this <a href="http://www.w3.org/TR/offline-webapps/">link</a>.</p> 
   <p>For more information on CSRF attacks and ways to mitigate them, see the <a href="https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29">Cross-Site Request Forgery OWASP page</a>.</p> 
  </note> 
 </body> 
</html>