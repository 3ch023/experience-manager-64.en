<?xml version="1.1" encoding="UTF-8" standalone="yes"?> 
<html> 
 <head> 
  <meta content="2018-03-09T08:01:57.329-0500" name="jcr:created" /> 
  <meta content="/content/help/en/experience-manager/6-4/sites/developing/morehelp/extending-aem;/content/help/en/experience-manager/6-4/sites/developing/morehelp/extending-aem" name="moreHelpPaths" /> 
  <meta content="2017-10-12T21:46:58.665-0400" name="mwpw_migration_script_version" /> 
  <meta content="" name="jcr:baseVersion" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES" name="primaryProductTag" /> 
  <meta content="/etc/designs/help" name="cq:designPath" /> 
  <meta content="" name="jcr:primaryType" /> 
  <meta content="false" name="isReadyForLocalization" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES;topic_tags:extending-aem;content_type:reference" name="cq:tags" /> 
  <meta content="2017-10-12T21:46:00.000-0400" name="qaDate" /> 
  <meta content="/content/docs/en/aem/6-3/develop/extending/workflows/models" name="qaNotes" /> 
  <meta content="remove-legacypath-6-1" name="jcr:lastModifiedBy" /> 
  <meta content="/apps/help/templates/article-3" name="cq:template" /> 
  <meta content="2018-04-22T01:33:42.091-0400" name="publishExternalDate" /> 
  <meta content="2018-04-22T01:33:42.091-0400" name="topicBrowsingSortDate" /> 
  <meta content="admin" name="jcr:createdBy" /> 
  <meta content="2018-05-08T12:46:55.563-0400" name="cq:lastModified" /> 
  <meta content="" name="jcr:versionHistory" /> 
  <meta content="2018-10-27T23:47:54.380-0400" name="cq:lastReplicated" /> 
  <meta content="audience:developing" name="primaryAudienceTag" /> 
  <meta content="https://helpx.adobe.com/experience-manager/6-4/sites/developing/using/workflows-models.html" name="publishExternalURL" /> 
  <meta content="aheimoz@adobe.com" name="lr_lastReplicatedBy" /> 
  <meta content="User" name="contentOwner" /> 
  <meta content="You create a workflow model to define the series of steps executed when a user starts the workflow." name="seoDescription" /> 
  <meta content="aheimoz" name="cq:lastModifiedBy" /> 
  <meta content="2017-10-31T16:15:46.774-0400" name="firstPublishExternalDate" /> 
  <meta content="true" name="jcr:isCheckedOut" /> 
  <meta content="Activate" name="cq:lastReplicationAction" /> 
  <meta content="jsyal" name="cq:lastReplicatedBy" /> 
  <meta content="mix:versionable" name="jcr:mixinTypes" /> 
  <meta content="Creating Workflow Models" name="seoTitle" /> 
  <meta content="Creating Workflow Models" name="navTitle" /> 
  <meta content="a3c81774-2a37-4356-9021-d2a5cd8cbed6" name="jcr:uuid" /> 
  <meta content="en_us" name="jcr:language" /> 
  <meta content="a34c97a8-30c0-4a7f-9fb8-788ab10fab2e" name="jcr:predecessors" /> 
  <meta content="Creating Workflow Models" name="jcr:title" /> 
  <meta content="2018-05-08T12:46:55.562-0400" name="locHandOffDate" /> 
  <meta content="2018-04-22T01:33:42.091-0400" name="lastPublishExternalDate" /> 
  <meta content="help/components/pages/article-3" name="sling:resourceType" /> 
 </head> 
 <body> 
  <note> 
   <p>For use of the classic UI, please see the <a href="/content/help/en/experience-manager/6-3/sites/developing/using/workflows-models">AEM 6.3 documentation</a> for reference.</p> 
  </note> 
  <p>You create a <a href="../../../sites/developing/using/workflows.md#model">workflow model</a> to define the series of steps executed when a user starts the workflow. You can also define model properties, such as whether the workflow is transient or uses multiple resources.</p> 
  <p>When a user starts a workflow, an instance is started; this is the corresponding runtime model, created when you <a href="#syncyourworkflowgeneratearuntimemodel">Sync</a> your changes.</p> 
  <h2>Creating a New Workflow</h2> 
  <p>When you first create a new workflow model it contains:</p> 
  <ul> 
   <li>The steps, <strong>Flow Start</strong> and <strong>Flow End</strong>.<br /> These represent the beginning and end of the workflow. These steps are required and cannot be edited/removed. </li> 
   <li>An example <strong>Participant</strong> step named <strong>Step 1</strong>.<br /> This step is configured to assign a work item to the workflow initiator. Edit or delete this step, and add steps as required.</li> 
  </ul> 
  <p>To create a new workflow with the editor:<br /> </p> 
  <ol> 
   <li><p>Open the <strong>Workflow Models</strong> console; via <strong>Tools</strong>, <strong>Workflow</strong>, <strong>Models</strong> or, for example:</p>  </li> 
   <li><p>Select <strong>Create</strong>, then <strong>Create Model</strong>.</p> </li> 
   <li><p>The <strong>Add Workflow Model</strong> dialog appears. Enter the <strong>Title</strong> and <strong>Name</strong> (optional) before selecting <strong>Done</strong>.</p> </li> 
   <li><p>The new model is listed in the <strong>Workflow Models</strong> console.</p> </li> 
   <li><p>Select your new workflow, then use <a href="#editinganexistingworkflow"><strong>Edit</strong> to open it for configuration</a>:</p> <img imageRotate="0" src="assets/wf-01.png" /></li> 
  </ol> 
  <note> 
   <p>If creating models programmatically (using a crx package) you can also create a sub-folder within:</p> 
   <p style="margin-left: 40px;"> <span class="code">/var/workflow/models</span> <br /> </p> 
   <p>For example, <span class="code">/var/workflow/models/prototypes</span></p> 
   <p>This folder can then be used for <a href="/sites/administering/using/workflows-managing.html?cq_ck=1524050766250#CreateasubfolderinvarworkflowmodelsandapplytheACLtothat">managing access to the models in that folder</a>.</p> 
  </note> 
  <h2>Editing a Workflow</h2> 
  <p>You can edit any existing workflow model to:</p> 
  <ul> 
   <li><a href="#addingasteptoamodel-">define steps</a> and their <a href="#configuringaworkflowstep">parameters</a></li> 
   <li>configure workflow properties, including <a href="#configuringworkflowstagesthatshowworkflowprogress">stages</a>, <a href="#creatingatransientworkflow-">whether the workflow is transient</a> and/or <a href="#configuringaworkflowformultiresourcesupport">uses multiple resources</a></li> 
  </ul> 
  <p>Editing a <a href="#editingadefaultorlegacyworkflowforthefirsttime"><strong>Default and/or Legacy</strong> (out-of-the-box) workflow</a> has an additional step, to ensure that a <a href="../../../sites/developing/using/workflows-best-practices.md#locationsworkflowmodels">safe copy</a> is taken prior to your changes being made.</p> 
  <p>When updates to your workflow are complete you must use <strong>Sync</strong> to <strong>Generate a Runtime Model</strong>. See <a href="#syncyourworkflowgeneratearuntimemodel">Sync your Workflow</a> for details.</p> 
  <h3>Sync your Workflow - Generate a Runtime Model</h3> 
  <p><strong>Sync</strong> (right in the editor toolbar) generates a <a href="../../../sites/developing/using/workflows.md#runtimemodel">runtime model</a>. The runtime model is the model actually used when a user starts a workflow. If you do not <strong>Sync</strong> your changes, then the changes will not be available at runtime.<br /> </p> 
  <p>When you (or any other user) make any changes to the workflow you must use <strong>Sync</strong> to generate a runtime model - even when individual dialogs (for example, for steps) have had their own save options.</p> 
  <p>When the changes are synchronized with the runtime (saved) model, <strong>Synched</strong> is shown instead.</p> 
  <p>Some steps have mandatory fields and/or built in validation. When these conditions are not satisfied an error will be shown when you attempt to <strong>Sync</strong> the model. For example, when no participant has been defined for a <strong>Participant</strong> step:<br /> </p> 
  <img imageRotate="0" src="assets/wf-21.png" /> 
  <h3>Editing a Default or Legacy Workflow for the First Time</h3> 
  <p>When you open a <a href="../../../sites/developing/using/workflows.md#workflowtypes">Default and/or Legacy model</a> for editing:</p> 
  <ul> 
   <li>The Steps browser is not available (left side).<br /> </li> 
   <li>There is an <strong>Edit</strong> action available in the toolbar (right side).</li> 
   <li>Initially the model, and its properties, is presented in read-only mode as:<br /> 
    <ul> 
     <li>Default workflows are located in <span class="code">/libs</span></li> 
     <li>Legacy workflows are located in <span class="code">/etc</span><br /> </li> 
    </ul> </li> 
  </ul> 
  <p>Selecting <strong>Edit</strong> will:</p> 
  <ul> 
   <li>take a copy of the workflow into <span class="code">/conf</span></li> 
   <li>make the Steps browser available</li> 
   <li>enable you to make changes<br /> </li> 
  </ul> 
  <note> 
   <p>See <a href="../../../sites/developing/using/workflows-best-practices.md#locationsworkflowmodels">Locations of Workflow Models</a> for further information.</p> 
  </note> 
  <img imageRotate="0" src="assets/wf-22.png" /> 
  <h3>Adding a Step to a Model</h3> 
  <p>You will need to add steps to your model to represent the activity to perform - each step performs a specific activity. A selection of step components are available in a standard AEM instance. </p> 
  <p>When you edit a model, the available steps appear in the various groups of the <strong>Steps browser</strong>. For example:</p> 
  <img imageRotate="0" src="assets/wf-10.png" /> 
  <note> 
   <p>For information about the primary step components that are installed with AEM, see <a href="../../../sites/developing/using/workflows-step-ref.md">Workflow Steps Reference</a>.</p> 
  </note> 
  <p>To add steps to your workflow model:</p> 
  <ol> 
   <li><p>Open an existing workflow model for editing. From the <strong>Workflows Model</strong> console, select the required model, then <strong>Edit</strong>. </p> </li> 
   <li><p>Open the Steps browser; using <strong>Toggle Side Panel</strong>, at the far left of the top toolbar. Here you can:</p> 
    <ul> 
     <li><strong>Filter</strong> for specific steps.</li> 
     <li>Use the drop down selector to limit the selection to a specific group of steps.</li> 
     <li>Select the Show Description icon <img src="assets/wf-stepinfo-icon.png" /> to show more details about the appropriate step.<br /> </li> 
    </ul> <img imageRotate="0" src="assets/wf-02.png" /></li> 
   <li><p>Drag the appropriate step(s) to the required location in the model.</p> <p>For example, a <strong>Participant Step</strong>.</p> <p>Once added to the flow you can <a href="#configuringaworkflowstep">configure the step</a>.<br /> </p> <img imageRotate="0" src="assets/wf-03.png" /></li> 
   <li><p>Add as many steps, or other updates, as required.</p> <p>At run time, steps are executed in the order in which they appear in the model. After adding step components, you can drag them to a different location in the model.</p> <p>You can also copy, cut, paste, group or delete existing steps; as with the <a href="../../../sites/authoring/using/editing-content.md">page editor.</a></p> <p>Split steps can also be collapsed/expanded using the toolbar option: <img src="assets/wf-collapseexpand-toolbar-icon.png" /> </p>  </li> 
   <li><p>Confirm the changes with <strong>Sync</strong> (editor toolbar) to generate the runtime model.<br /> </p> <p>See <a href="#syncyourworkflowgeneratearuntimemodel">Sync your Workflow</a> for details.</p> </li> 
  </ol> 
  <h3>Configuring a Workflow Step</h3> 
  <p>You can <strong>Configure</strong> and customize the behavior of a workflow step using the <strong>Step Properties</strong> dialogs.</p> 
  <ol> 
   <li><p>To open the <strong>Step Properties</strong> dialog for a step either:</p> 
    <ul> 
     <li>Click/tap the<em> </em>step in the workflow model and select <strong>Configure</strong> from the component toolbar.<br /> </li> 
     <li>Double-click on the step.</li> 
    </ul> 
    <note> 
     <p>For information about the primary step components that are installed with AEM, see <a href="../../../sites/developing/using/workflows-step-ref.md">Workflow Steps Reference</a>.</p> 
    </note></li> 
   <li><p>Configure the <strong>Step Properties</strong> as required; the properties available depend on the step type, there may also be several tabs available. For example, the default <strong>Participant Step</strong>, present in a new workflow as <span class="code">Step 1</span>:</p> <img imageRotate="0" src="assets/wf-11.png" /></li> 
   <li><p>Confirm your updates with the tick.</p> </li> 
   <li><p>Confirm the changes with <strong>Sync</strong> (editor toolbar) to generate the runtime model.<br /> </p> <p>See <a href="#syncyourworkflowgeneratearuntimemodel">Sync your Workflow</a> for details.</p> </li> 
  </ol> 
  <h3>Creating a Transient Workflow</h3> 
  <p>You can create a <a href="../../../sites/developing/using/workflows.md#transientworkflows">Transient</a> workflow model when creating a new model, or by editing an existing one:</p> 
  <ol> 
   <li><p>Open the workflow model for <a href="#editinganexistingworkflow">editing</a>.</p> </li> 
   <li><p>Select <strong>Workflow Model Properties</strong> from the toolbar.</p> </li> 
   <li><p>In the dialog activate <strong>Transient Workflow</strong> (or deactivate if required):</p> <img imageRotate="0" src="assets/wf-07.png" /></li> 
   <li><p>Confirm the change with <strong>Save &amp; Close</strong>; followed by <strong>Sync</strong> (editor toolbar) to generate the runtime model.<br /> </p> <p>See <a href="#syncyourworkflowgeneratearuntimemodel">Sync your Workflow</a> for details.</p> </li> 
  </ol> 
  <note> 
   <p>When you run a workflow in <a href="../../../sites/developing/using/workflows.md#transientworkflows">transient</a> mode AEM does not store any workflow history. Therefore, <a href="../../../sites/authoring/using/basic-handling.md#timeline">Timeline</a> does not display any information related to that workflow.<a href="../../../sites/authoring/using/basic-handling.md#timeline"></a></p> 
  </note> 
  <h3>Configuring a Workflow for Multi Resource Support</h3> 
  <p>You can configure a workflow model for <a href="../../../sites/developing/using/workflows.md#multiresourcesupport">Multi Resource Support</a> when creating a new model, or by editing an existing one:</p> 
  <ol> 
   <li><p>Open the workflow model for <a href="#editinganexistingworkflow">editing</a>.</p> </li> 
   <li><p>Select <strong>Workflow Model Properties</strong> from the toolbar.<br /> </p> </li> 
   <li><p>In the dialog activate <strong>Multi Resource Support</strong> (or deactivate if required):</p> <img imageRotate="0" src="assets/wf-08.png" /></li> 
   <li><p>Confirm the change with <strong>Save &amp; Close</strong>; followed by <strong>Sync</strong> (editor toolbar) to generate the runtime model.<br /> </p> <p>See <a href="#syncyourworkflowgeneratearuntimemodel">Sync your Workflow</a> for details.</p> </li> 
  </ol> 
  <h3>Configuring Workflow Stages (that show Workflow Progress)</h3> 
  <p><a href="../../../sites/developing/using/workflows.md#workflowstages">Workflow Stages</a> help visualize the progress of a workflow when handling tasks.</p> 
  <note> 
   <p>If workflow stages are defined in <strong>Page Properties</strong>, but not used for any of the workflow steps, then the progress bar will not show any progress (regardless of the current workflow step).</p> 
  </note> 
  <p>The stages to be available are defined in the workflow models; existing workflow models can be updated to include stage definitions. You can define any number of stages for the workflow model. </p> 
  <p>To define <strong>Stages</strong> for your workflow:</p> 
  <ol> 
   <li><p>Open your workflow model for editing.</p> </li> 
   <li><p>Select <strong>Workflow Model Properties</strong> from the toolbar. Then open the <strong>Stages</strong> tab.</p> </li> 
   <li><p>Add (and position) your required <strong>Stages</strong>. You can define any number of stages for the workflow model. </p> <p>For example:</p> <img imageRotate="0" src="assets/wf-08-1.png" /></li> 
   <li><p>Click <strong>Save &amp; Close</strong> to save the properties.</p> </li> 
   <li><p>Assign a stage to each of the steps in the workflow model. For example:</p> <img imageRotate="0" src="assets/wf-09.png" /><p>A stage can be assigned to more than one step. For example:</p> 
    <table border="1" cellpadding="1" cellspacing="0" width="50%"> 
     <tbody> 
      <tr> 
       <td><strong>Step</strong></td> 
       <td><strong>Stage</strong></td> 
      </tr> 
      <tr> 
       <td>Step 1</td> 
       <td>Create</td> 
      </tr> 
      <tr> 
       <td>Step 2</td> 
       <td>Create</td> 
      </tr> 
      <tr> 
       <td>Step 3</td> 
       <td>Review</td> 
      </tr> 
      <tr> 
       <td>Step 4</td> 
       <td>Approve</td> 
      </tr> 
      <tr> 
       <td>Step 5</td> 
       <td>Approve</td> 
      </tr> 
      <tr> 
       <td>Step 6</td> 
       <td>Complete</td> 
      </tr> 
     </tbody> 
    </table>  </li> 
   <li><p>Confirm the changes with <strong>Sync</strong> (editor toolbar) to generate the runtime model.<br /> </p> <p>See <a href="#syncyourworkflowgeneratearuntimemodel">Sync your Workflow</a> for details.</p> </li> 
  </ol> 
  <h2>Exporting a Workflow Model in a Package</h2> 
  <p>To export a workflow model in a package:<br /> </p> 
  <ol> 
   <li><p>Create a new package using the <a href="../../../sites/administering/using/package-manager.md#packagemanager">Package Manager</a>:</p> 
    <ol> 
     <li>Navigate to the Package Manager via <strong>Tools</strong>, <strong>Deployment</strong>, <strong>Packages</strong>.</li> 
     <li>Click <strong>Create Package</strong>.</li> 
     <li>Specify the <strong>Package Name</strong>, and any other details as required.</li> 
     <li>Click <strong>OK</strong>.</li> 
    </ol> </li> 
   <li><p>Click <strong>Edit</strong> on the toolbar of your new package.<br /> </p> </li> 
   <li><p>Open the <strong>Filters</strong> tab.<br /> </p> </li> 
   <li><p>Select <strong>Add Filter</strong> and specify the path of your workflow model <em>design</em>:</p>  <p>Click <strong>Done</strong>.</p> </li> 
   <li><p>Select <strong>Add Filter</strong> and specify the path of your <em>runtime</em> workflow model:</p>  <p>Click <strong>Done</strong>.</p> </li> 
   <li><p>Add additional filters for any custom scripts that are used by your model.</p> </li> 
   <li><p>Click <strong>Save</strong> to confirm your filter definitions.</p> </li> 
   <li><p>Select <strong>Build</strong> from the toolbar of your package definition.</p> </li> 
   <li><p>Select <strong>Download</strong> from the package toolbar.</p> </li> 
  </ol> 
  <h2>Using Workflows to Process Form Submissions</h2> 
  <p>You can configure a form to be processed by the selected workflow. When users submit the form, a new workflow instance is created with the data of the form submission as its payload.</p> 
  <p>To configure the workflow to be used with your form:</p> 
  <ol> 
   <li><p>Create a new page and open it for editing.</p> </li> 
   <li><p>Add a <strong>Form</strong> component to the page.</p> </li> 
   <li><p><strong>Configure</strong> the <strong>Form Start</strong> component that appeared in the page.</p>  </li> 
   <li><p>Use <strong>Start Workflow</strong> to select the desired workflow from those available:</p> <img imageRotate="0" src="assets/wf-12.png" /></li> 
   <li><p>Confirm the new form configuration with the tick.</p> </li> 
  </ol> 
  <h2>Testing Workflows</h2> 
  <p>It is a good practice when testing a workflow to use a variety of payload types; including types that are different to the one for which it has been developed. For example, if you intend your workflow to deal with Assets, test it by setting a Page as payload and make sure that it does not throw errors.</p> 
  <p>For example, test your new workflow as follows:</p> 
  <ol> 
   <li><a href="../../../sites/administering/using/workflows-starting.md">Start your workflow model</a> from the console.</li> 
   <li>Define the <strong>Payload</strong> and confirm.<br /> </li> 
   <li>Take actions as required so that the workflow proceeds.</li> 
   <li>Monitor the log files while the workflow is running.</li> 
  </ol> 
  <p>You can also configure AEM to display <strong>DEBUG</strong> messages in the log files. See <a href="../../../sites/deploying/using/configure-logging.md">Logging</a> for further information and when the development is finished, set the <strong>Log Level</strong> back to <strong>Info</strong>.<br /> </p> 
  <h2>Examples</h2> 
  <h3>Example: Creating a (Simple) Workflow to Accept or Reject a Request for Publication</h3> 
  <p>To illustrate some of the possibilities for creating a workflow, the following example creates a variation of the <span class="code">Publish Example</span> workflow.</p> 
  <ol> 
   <li><p><a href="#creatinganewworkflow">Create a new workflow model</a>.</p> <p>The new workflow will contain:</p> 
    <ul> 
     <li><strong>Flow Start</strong></li> 
     <li><span class="code">Step 1</span></li> 
     <li><strong>Flow End</strong></li> 
    </ul> </li> 
   <li><p>Delete <span class="code">Step 1</span> (as it is the wrong step type for this example):</p> 
    <ul> 
     <li>Click on the step and select <strong>Delete</strong> from the component toolbar. Confirm the action.</li> 
    </ul> </li> 
   <li><p>From the <strong>Workflow</strong> selection of the steps browser, drag a <strong>Participant Step</strong> onto the workflow and position it between <strong>Flow Start</strong> and <strong>Flow End</strong>.</p> </li> 
   <li><p>To open the properties dialog either:</p> 
    <ul> 
     <li>Click on the participant step and select <strong>Configure</strong> from the component toolbar.</li> 
     <li>Double-click on participant step.</li> 
    </ul> </li> 
   <li><p>In the <strong>Common</strong> tab enter <span class="code">Validate Content</span> for both the <strong>Title</strong> and <strong>Description</strong>.</p> </li> 
   <li><p>Open the <strong>User/Group</strong> tab:</p> 
    <ul> 
     <li>Activate <strong>Notify user via email</strong>.</li> 
     <li>Select <span class="code">Administrator</span> (<span class="code">admin</span>) for the <strong>User/Group</strong> field.</li> 
    </ul> 
    <note> 
     <p>For emails to be sent, <a href="../../../sites/administering/using/notification.md">the mail service and user account details need to be configured</a>.</p> 
    </note></li> 
   <li><p>Confirm the updates with the tick.</p> <p>You will be returned to the overview of the workflow model, here the participant step will have been renamed to <span class="code">Validate Content</span>.</p> </li> 
   <li><p>Drag an <strong>Or Split</strong> onto the workflow and position it between <span class="code">Validate Content</span> and <strong>Flow End</strong>.</p> </li> 
   <li><p>Open the <strong>Or Split</strong> for configuration.</p> </li> 
   <li><p>Configure:</p> 
    <ul> 
     <li><strong>Common</strong>: select <strong>2 Branches</strong></li> 
     <li><strong>Branch 1</strong>: select <strong>Default Route</strong>.</li> 
     <li><strong>Branch 2</strong>: ensure <strong>Default Route</strong> is not selected.</li> 
    </ul> </li> 
   <li><p>Confirm your updates to the <strong>OR Split</strong>.</p> </li> 
   <li><p>Drag a <strong>Participant Step</strong> to the left-hand branch, open the properties, specify the following values, then confirm the changes:</p> 
    <ul> 
     <li><strong>Title</strong>: <span class="code">Reject Publish Request</span></li> 
     <li><strong>User/Group</strong>: for example, <span class="code">projects-administrators</span></li> 
     <li><strong>Notify user via email</strong>: Activate to have the user notified by email.</li> 
    </ul> </li> 
   <li><p>Drag a <strong>Process Step</strong> to the right-hand branch, open the properties, specify the following values, then confirm the changes:</p> 
    <ul> 
     <li><strong>Title</strong>: <span class="code">Publish Page as Requested</span></li> 
     <li><strong>Process</strong>: select <span class="code">Activate Page</span>. This process publishes the selected page to the publisher instances.</li> 
    </ul> </li> 
   <li><p>Click <strong>Sync</strong> (editor toolbar) to generate the runtime model.</p> <p>See <a href="#syncyourworkflowgeneratearuntimemodel">Sync your Workflow</a> for details.</p> <p>Your new workflow model will look like:</p> <img imageRotate="0" src="assets/wf-13.png" /></li> 
   <li><p>Apply this workflow to your page, so that when the user moves to <strong>Complete</strong> the <strong>Validate Content</strong> step, they can select whether they want to <strong>Publish Page as Requested</strong>, or <strong>Reject Publish Request</strong>.</p> <img imageRotate="0" src="assets/chlimage_1-193.png" /></li> 
  </ol> 
  <h3>Example: Defining a Rule for an OR Split</h3> 
  <p><strong>OR Split</strong> steps allow you to introduce conditional processing paths into your workflow. </p> 
  <p>To define an OR rule, proceed as follows:</p> 
  <ol> 
   <li><p>Create two scripts and save them in the repository, for example under:</p>  
    <note> 
     <p>The scripts must have a <a href="#functioncheck">function <span class="code">check()</span></a> that returns a boolean.</p> 
    </note></li> 
   <li><p>Edit the workflow and add the <strong>OR Split</strong> to the model.</p> </li> 
   <li><p>Edit the properties of <strong>Branch 1</strong> of the <strong>OR Split</strong>:</p> 
    <ul> 
     <li>Define this as the <strong>Default Route</strong> by setting the <strong>Value</strong> to <span class="code">true</span>.<br /> </li> 
     <li>As <strong>Rule</strong>, set the path to the script. For example:<br /> <span class="code">/apps/myapp/workflow/scripts/myscript1.ecma</span></li> 
    </ul> 
    <note> 
     <p>You can switch the branch order if required.</p> 
    </note></li> 
   <li><p>Edit the properties of the <strong>Branch 2</strong> of the <strong>OR Split</strong>.<br /> </p> 
    <ul> 
     <li>As <strong>Rule</strong>, set the path to the other script. For example:<br /> <span class="code">/apps/myapp/workflow/scripts/myscript2.ecma</span></li> 
    </ul> </li> 
   <li><p>Set the properties of the individual steps in each branch. Make sure the <strong>User/Group</strong> is set.</p> </li> 
   <li><p>Click <strong>Sync</strong> (editor toolbar) to persist your changes to the runtime model.</p> <p>See <a href="#syncyourworkflowgeneratearuntimemodel">Sync your Workflow</a> for details.</p> </li> 
  </ol> 
  <h4>Function Check()</h4> 
  <note> 
   <p>See <a href="../../../sites/developing/using/workflows-customizing-extending.md#usingecmascript">Using ECMAScript</a>.</p> 
  </note> 
  <p>The following sample script returns <span class="code">true</span> if the node is a <span class="code">JCR_PATH</span> located under <span class="code">/content/we-retail/us/en</span>:</p>  
  <codeblock gutter="true" class="syntax js">
    function&amp;nbsp;check()&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&amp;nbsp;(workflowData.getPayloadType()&amp;nbsp;==&amp;nbsp;"JCR_PATH")&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;path&amp;nbsp;=&amp;nbsp;workflowData.getPayload().toString();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;node&amp;nbsp;=&amp;nbsp;jcrSession.getItem(path);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&amp;nbsp;(node.getPath().indexOf("/content/we-retail/us/en")&amp;nbsp;&gt;=&amp;nbsp;0)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;true;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;false;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;false;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!}!!discoiqbr!! 
  </codeblock> 
  <h3>Example: Customized Request for Activation</h3> 
  <p>You can customize any of the out-of-the-box workflows. To have customized behavior you overlay details of the appropriate workflow.</p> 
  <p>For example, <strong>Request for Activation</strong>. This workflow is used for publishing pages within <strong>Sites</strong> and is automatically triggered when a content author does not have the appropriate replication rights. See <a href="../../../sites/developing/using/customizing-page-authoring-touch.md#customizingtherequestforactivationworkflow">Customizing Page Authoring - Customizing the Request for Activation Workflow</a> for further details.</p> 
 </body> 
</html>