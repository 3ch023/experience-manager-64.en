<?xml version="1.1" encoding="UTF-8" standalone="yes"?> 
<html> 
 <head> 
  <meta content="true" name="jcr:isCheckedOut" /> 
  <meta content="audience:administering" name="primaryAudienceTag" /> 
  <meta content="2018-11-02T08:35:07.594-0400" name="cq:lastReplicated" /> 
  <meta content="2017-10-12T21:46:58.665-0400" name="mwpw_migration_script_version" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES;topic_tags:site-features;content_type:reference;topic_tags:best-practices" name="cq:tags" /> 
  <meta content="dist5" name="distType" /> 
  <meta content="/content/help/en/experience-manager/6-4/sites/administering/morehelp/site-features;/content/help/en/experience-manager/6-4/sites/administering/morehelp/best-practices;/content/help/en/experience-manager/6-4/sites/administering/morehelp/site-features;/content/help/en/experience-manager/6-4/sites/administering/morehelp/best-practices" name="moreHelpPaths" /> 
  <meta content="" name="jcr:baseVersion" /> 
  <meta content="2018-04-26T10:12:36.304-0400" name="locHandOffDate" /> 
  <meta content="2017-12-01T19:02:55.110-0500" name="jcr:created" /> 
  <meta content="2017-10-12T21:46:00.000-0400" name="qaDate" /> 
  <meta content="2017-10-31T16:24:45.227-0400" name="firstPublishExternalDate" /> 
  <meta content="admin" name="jcr:createdBy" /> 
  <meta content="light" name="gnavTheme" /> 
  <meta content="false" name="isReadyForLocalization" /> 
  <meta content="bohnert" name="cq:lastReplicatedBy" /> 
  <meta content="2018-06-25T09:43:56.266-0400" name="topicBrowsingSortDate" /> 
  <meta content="Activate" name="cq:lastReplicationAction" /> 
  <meta content="2018-06-25T09:43:56.266-0400" name="publishExternalDate" /> 
  <meta content="" name="jcr:primaryType" /> 
  <meta content="/content/docs/en/aem/6-3/administer/sites/msm/best-practices" name="qaNotes" /> 
  <meta content="mix:versionable" name="jcr:mixinTypes" /> 
  <meta content="Find best practices compiled by Adobe engineering and consulting teams to help get up and running with the AEM Multi Site Manager." name="seoDescription" /> 
  <meta content="1c3e8a54-263f-4578-ac51-792fd6dded93" name="jcr:predecessors" /> 
  <meta content="2018-11-02T08:33:56.089-0400" name="cq:lastModified" /> 
  <meta content="2018-06-25T09:43:56.266-0400" name="lastPublishExternalDate" /> 
  <meta content="" name="jcr:versionHistory" /> 
  <meta content="Guillaume Carlino" name="contentOwner" /> 
  <meta content="bohnert" name="cq:lastModifiedBy" /> 
  <meta content="/apps/help/templates/article-3" name="cq:template" /> 
  <meta content="en_us" name="jcr:language" /> 
  <meta content="MSM Best Practices" name="navTitle" /> 
  <meta content="MSM Best Practices" name="seoTitle" /> 
  <meta content="/etc/designs/help" name="cq:designPath" /> 
  <meta content="https://helpx.adobe.com/experience-manager/6-4/sites/administering/using/msm-best-practices.html" name="publishExternalURL" /> 
  <meta content="help/components/pages/article-3" name="sling:resourceType" /> 
  <meta content="MSM Best Practices" name="jcr:title" /> 
  <meta content="carlino@adobe.com" name="lr_lastReplicatedBy" /> 
  <meta content="ee7fea57-acf1-40d9-b41d-40042f0daea0" name="jcr:uuid" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/SITES" name="primaryProductTag" /> 
 </head> 
 <body> 
  <h2>General</h2> 
  <p>MSM is a configurable framework for automating content deployment. Implementations often involve major portions of a website and span organizations and geographies. It is therefore highly recommended to plan MSM implementations as carefully as you plan your website:</p> 
  <ul> 
   <li>Carefully <strong>plan structure and content flows</strong> before starting implementation. </li> 
   <li><strong>Customize as much as necessary, but as little as possible.</strong> While MSM supports a high degree of customization (e.g. rollout configurations) typically the best practice for the performance, reliability and upgradeability of your website is to minimize customization. </li> 
   <li>Establish a <strong>governance</strong> model early, and train users accordingly, to ensure success. A best practice from a governance point of view is to <strong>minimize the authority that local content producers have</strong> to allocate/connect content to other local users and their respective live copies. This is because un-governed, chained inheritances can significantly increase the complexity of a MSM structure and compromise its performance and reliability. </li> 
   <li>Once a plan exists for your structure, content flows, automation and governance - <strong>prototype and thoroughly test your system</strong>, before starting live implementation. </li> 
   <li>Keep in mind that <strong>Adobe Consulting and leading System Integrators</strong> have deep experience planning and implementing content automation with MSM, so they can help you both get started with your MSM project and throughout its entire implementation.</li> 
  </ul> 
  <note> 
   <p>Further information about working with MSM is available in the Knowledge Base articles:</p> 
   <ul> 
    <li><a href="https://helpx.adobe.com/experience-manager/kb/index/msm_faq.html">MSM FAQ</a></li> 
    <li><a href="https://helpx.adobe.com/experience-manager/kb/troubleshooting-aem-msm-issues.html">Troubleshooting MSM issues</a></li> 
   </ul> 
  </note> 
  <note> 
   <p>You can also use the <a href="../../../sites/authoring/using/default-components-foundation.md#reference">Reference component</a> to reuse a single page or paragraph. Keep in mind however:</p> 
   <ul> 
    <li>MSM is more flexible and allows fine-grained control over what content is synchronized and when.</li> 
    <li><a href="/content/help/en/experience-manager/core-components/user-guide">Core components</a> are now recommended over the foundation components.<br /> </li> 
   </ul> 
  </note> 
  <h2>Live Copy Sources and Blueprint Configurations</h2> 
  <p>Keep in mind that a live copy can be created using either <a href="../../../sites/administering/using/msm-livecopy.md#creatingalivecopyofapage">regular pages</a> or a <a href="../../../sites/administering/using/msm-livecopy.md#creatingalivecopyofasitefromablueprintconfiguration">blueprint configuration</a>. Both are valid use cases.</p> 
  <p>The additional benefits of using a blueprint configuration are that they:</p> 
  <ul> 
   <li>Allow the author to use the <strong>Rollout</strong> option on a blueprint - to (explicitly) push modifications to live copies that inherit from this blueprint. </li> 
   <li>Allow the author to use <strong>Create Site</strong>; this allows the user to easily select languages and configure the structure of the live copy.</li> 
   <li>Define a default rollout configuration for live copies that have a relationship with the blueprint.</li> 
  </ul> 
  <p>In the case that a blueprint configuration is not referenced, rollouts can only be initiated from the live copies themselves, essentially pulling content from source.</p> 
  <p>When creating a new site with live copy, it is advantageous to create blueprint configurations to ensure the availability of the full MSM feature set. </p> 
  <h2>Components and Container Synchronization</h2> 
  <p>In general, the rollout rule in MSM regarding the synchronization of components is:</p> 
  <ul> 
   <li>Components are rolled out syncing any resources contained in the blueprint.</li> 
   <li>Containers synchronize only the current resource.</li> 
  </ul> 
  <p>This means that components are treated as an aggregate, and in a rollout the component itself and all its children are replaced with those in the blueprints. This means that if a resource is added to such a component locally, it will be lost to the content of the blueprint at rollout.</p> 
  <p>To support the nesting of components such that locally added components are maintained in a rollout, the component must be declared as a container. As an example, the default parsys is declared as a container so it can support locally-added content.</p> 
  <note> 
   <p>Add the property <span class="code">cq:isContainer</span> to the component to designate it as a container.</p> 
  </note> 
  <h2>Create Site</h2> 
  <p>Notice that AEM has two main approaches for creating live copies:</p> 
  <ul> 
   <li>When <a href="../../../sites/administering/using/msm-livecopy.md#creatingalivecopyofapage">creating a <strong>Live Copy</strong></a><br /> This can be considered as the more generic approach, allowing you to create live copies from any page. The content structure of a live copy exactly matches the source.</li> 
   <li>When <a href="../../../sites/administering/using/msm-livecopy.md#creatingalivecopyofasitefromablueprintconfiguration">creating a <strong>Site</strong></a> <br /> This is a more specialized approach, primarily for creating websites with a multilingual structure.</li> 
  </ul> 
  <p>Following are a few considerations to keep in mind when creating a site:</p> 
  <ul> 
   <li>To create a new site, you need a <a href="../../../sites/administering/using/msm-livecopy.md#managingblueprintconfigurations">blueprint configuration</a>. </li> 
   <li>To allow the selection of language paths to create in a new site, the corresponding language roots must exist in the blueprint (source). </li> 
   <li>Once a <a href="../../../sites/administering/using/msm-livecopy.md#creatingalivecopyofasitefromablueprintconfiguration">new site has been created as a live copy</a> (using <strong>Create</strong>, then <strong>Site</strong>), the first two levels of this live copy are <i>shallow</i>. Children of the page do not belong to the live-relationship, but a roll-out will still descend if a live-relationship that matches the trigger is found.<br /> It helps avoid: 
    <ul> 
     <li>manually adding languages in the blueprint (below the first level)<br /> </li> 
     <li>manually adding content directly below the language root,<br /> </li> 
     <li>does not result in automatically carrying this new content over to the live copy on rollout.<br /> </li> 
    </ul> </li> 
  </ul> 
  <h2>MSM and Multilingual Websites</h2> 
  <p>MSM can assist in the creation of multilingual websites in two ways:</p> 
  <ul> 
   <li>When creating language masters. 
    <ul> 
     <li>While MSM itself <strong>does not provide content translation</strong>, it can be integrated with third-party translation connectors that do. Please note that: 
      <ul> 
       <li>MSM allows you to cancel inheritance at the page- and/or component- level. This helps prevent overwriting translated content (from a live copy, with not-yet-translated content from a blueprint) on the next rollout.</li> 
       <li>Some third-party translation connectors automate this management of MSM inheritances.<br /> Please check with your translation service provider for more information.</li> 
       <li>An alternative approach for creating and translating language masters is to use language copies in conjunction with AEM's out-of-the-box translation integration framework. </li> 
      </ul> </li> 
    </ul> </li> 
   <li>When rolling out content from language masters. 
    <ul> 
     <li>For example, from the French language master to country-specific sites, such as France/French, Canada/French, Switzerland/French.</li> 
    </ul> </li> 
  </ul> 
  <p>For more information see <a href="../../../sites/administering/using/translation.md">Translating Content for Multilingual Sites</a> and the <a href="../../../sites/administering/using/tc-bp.md">Translation Best Practices</a>.</p> 
  <h2>Structure Changes and Rollouts</h2> 
  <p>Modifications to the content structure in a blueprint/source tree are reflected differently in a live copy. This is dependent on the modification type:</p> 
  <ul> 
   <li><strong>Creating</strong> new pages in a blueprint will result in corresponding pages being created in live copies after rollout with the standard rollout configuration.<br /> </li> 
   <li><strong>Deleting</strong> pages in a blueprint will result in corresponding pages being deleted from live copies after rollout with standard rollout configuration.<br /> </li> 
   <li><strong>Moving</strong> pages in a blueprint will <strong>not</strong> result in corresponding pages being moved in live copies after rollout with standard rollout configuration: 
    <ul> 
     <li>The reason for this behavior is that a page move implicitly includes a page delete. This could potentionally lead to unexpected behavior on publish, as deleting pages on author automatically deactivates corresponding content on publish. This can also have a knock-on effect on related items such as links, bookmarks, and others.<br /> </li> 
     <li>Content inheritance in the respective live copy pages is updated to reflect the new location of their sources in the blueprint.</li> 
     <li>To fully realize a page move from a blueprint to live copies, consider the following best practices:</li> 
    </ul> </li> 
  </ul> 
  <note> 
   <p>This will work only with the <a href="/content/help/en/experience-manager/6-3/sites/administering/using/msm-sync#RolloutTriggers">On Rollout trigger</a>.</p> 
  </note> 
  <ul> 
   <li>Create a custom rollout configuration: 
    <ul> 
     <li>This new configuration must include the action:<br /> <span class="code">PageMoveAction</span><br /> Do not add other actions to this configuration.<br /> </li> 
    </ul> </li> 
   <li>Position the new configuration: 
    <ul> 
     <li>To fully roll out the page move, while deleting respective pages at their old location in the live copy: 
      <ul> 
       <li>Position the newly created configuration before the standard rollout configuration.<br /> The standard rollout configuration will take care of deleting the pages in their old location.<br /> </li> 
      </ul> </li> 
     <li>To roll out the page move while keeping respective pages in their old location in the live copies (essentially duplicating the content): 
      <ul> 
       <li>Position the newly created configuration after the standard rollout configuration.<br /> This will ensure no content is deleted in the live copy or deactivated from publish. </li> 
      </ul> </li> 
    </ul> </li> 
  </ul> 
  <h2>Customizing Rollouts</h2> 
  <p>MSM rollout configurations are highly customizable. You should be aware that automating rollouts can have far reaching consequences. As a best practice, you should plan <i>very</i> carefully before, for example:</p> 
  <ul> 
   <li>automating rollouts; for example, with <a href="#onmodify">onModify triggers</a>,</li> 
   <li>customizing <a href="#nodetypesproperties">node types/properties</a>,</li> 
   <li>starting subsequent workflows, </li> 
   <li>and/or activating content as part of rollouts.</li> 
  </ul> 
  <h3>onModify</h3> 
  <p>When using the <a href="../../../sites/administering/using/msm-sync.md#rollouttriggers">rollout trigger</a> <span class="code">onModify</span> you should consider that:</p> 
  <ul> 
   <li>Automating rollouts with <span class="code">onModify</span> triggers may have a negative impact on authoring performance as they trigger rollouts after <i>every</i> page modification. </li> 
   <li>The rollout result may differ from the one expected as: 
    <ul> 
     <li>You cannot specify the order of the resulting modify events.</li> 
     <li>The event-based architecture cannot guarantee the sequence of the events passed to the Rollout Manager.</li> 
    </ul> </li> 
   <li>Using such a rollout configuration could lead to commit conflicts if concurrent updates of the same resource occur.</li> 
  </ul> 
  <p>Therefore, it is recommended that you <i>only</i> use <span class="code">onModify</span> triggers if the benefits of automatic rollout initiation outweigh any potential performance issues. </p> 
  <h3>Node Types/Properties</h3> 
  <p>Remember that:<br /> </p> 
  <ul> 
   <li>In addition to customizing rollout actions, MSM also allows you to customize node properties that are being rolled out. The <a href="../../../sites/administering/using/msm-sync.md#excludingpropertiesandnodetypesfromsynchronization">MSM OSGi configuration allows you to exclude node types</a> from being copied from the source to the live copy.</li> 
  </ul> 
  <h2>Further Information</h2> 
  <p>This and the following pages cover the related issues:</p> 
  <ul> 
   <li><a href="../../../sites/administering/using/msm-livecopy.md">Creating and Synchronizing Live Copies</a></li> 
   <li><a href="../../../sites/administering/using/msm-livecopy-overview.md">Live Copy Overview Console</a></li> 
   <li><a href="../../../sites/administering/using/msm-sync.md">Configuring Live Copy Synchronization</a></li> 
   <li><a href="../../../sites/administering/using/msm-rollout-conflicts.md">MSM Rollout Conflicts</a></li> 
  </ul> 
 </body> 
</html>