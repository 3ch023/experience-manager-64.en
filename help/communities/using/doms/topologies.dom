<?xml version="1.1" encoding="UTF-8" standalone="yes"?>
<html>
 <head>
  <meta content="2017-10-12T21:46:00.000-0400" name="qaDate" />
  <meta content="help/components/pages/article-3" name="sling:resourceType" />
  <meta content="true" name="jcr:isCheckedOut" />
  <meta content="https://helpx.adobe.com/experience-manager/6-4/communities/using/topologies.html" name="publishExternalURL" />
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/COMMUNITIES;content_type:reference;topic_tags:deploying" name="cq:tags" />
  <meta content="2017-12-01T19:01:09.666-0500" name="jcr:created" />
  <meta content="Guillaume Carlino" name="contentOwner" />
  <meta content="da4be002-a95e-4d7a-95a5-ce692d57ff35" name="jcr:predecessors" />
  <meta content="2018-04-03T08:03:57.523-0400" name="topicBrowsingSortDate" />
  <meta content="mix:versionable" name="jcr:mixinTypes" />
  <meta content="2018-05-17T05:51:34.282-0400" name="locHandOffDate" />
  <meta content="2019-01-07T07:34:33.506-0500" name="cq:lastModified" />
  <meta content="Recommended Topologies for Communities" name="seoTitle" />
  <meta content="2017-10-31T16:33:09.893-0400" name="firstPublishExternalDate" />
  <meta content="2018-04-03T08:03:58.856-0400" name="cq:lastReplicated" />
  <meta content="" name="jcr:versionHistory" />
  <meta content="/content/docs/en/aem/6-3/deploy/communities/topologies" name="qaNotes" />
  <meta content="2018-04-03T08:03:57.523-0400" name="publishExternalDate" />
  <meta content="/etc/designs/help" name="cq:designPath" />
  <meta content="admin" name="jcr:createdBy" />
  <meta content="/apps/help/templates/article-3" name="cq:template" />
  <meta content="mgulati" name="cq:lastModifiedBy" />
  <meta content="2017-10-12T21:46:58.665-0400" name="mwpw_migration_script_version" />
  <meta content="Recommended Topologies for Communities" name="navTitle" />
  <meta content="" name="jcr:baseVersion" />
  <meta content="/content/help/en/experience-manager/6-4/communities/morehelp/deploying;/content/help/en/experience-manager/6-4/communities/morehelp/deploying" name="moreHelpPaths" />
  <meta content="en_us" name="jcr:language" />
  <meta content="0a092033-41fd-4336-a31c-0c39333bb6f9" name="jcr:uuid" />
  <meta content="Recommended Topologies for Communities" name="jcr:title" />
  <meta content="Activate" name="cq:lastReplicationAction" />
  <meta content="false" name="isReadyForLocalization" />
  <meta content="How to approach the handling of user-generated content (UGC)" name="seoDescription" />
  <meta content="carlino" name="cq:lastReplicatedBy" />
  <meta content="2018-04-03T08:03:57.523-0400" name="lastPublishExternalDate" />
  <meta content="" name="jcr:primaryType" />
  <meta content="carlino@adobe.com" name="lr_lastReplicatedBy" />
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/COMMUNITIES" name="primaryProductTag" />
 </head>
 <body>
  <p>As of AEM Communities 6.1, a unique approach has been adopted for handling 
   <g class="gr_ gr_16 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" data-gr-id="16" id="16">
    user generated
   </g> content (UGC) submitted by site visitors (members) from the 
   <g class="gr_ gr_19 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar multiReplace" data-gr-id="19" id="19">
    publish
   </g> environment. </p> 
  <p>This approach is fundamentally different from the way the AEM platform handles site content that is generally managed from the 
   <g class="gr_ gr_23 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar multiReplace" data-gr-id="23" id="23">
    author
   </g> environment. </p> 
  <p>The AEM platform uses a node store that replicates site content from author to publish, while AEM Communities uses a single, common store for UGC that is never replicated. </p> 
  <p>For the common UGC store, it is necessary to choose a <a href="../../communities/using/working-with-srp.md">storage resource provider (SRP)</a>. The recommended choices are:</p> 
  <ul> 
   <li><a href="../../communities/using/dsrp.md">DSRP - Relational Database Storage Resource Provider</a></li> 
   <li><a href="../../communities/using/msrp.md">MSRP - MongoDB Storage Resource Provider</a></li> 
   <li><a href="../../communities/using/asrp.md">ASRP - Adobe Storage Resource Provider</a></li> 
  </ul> 
  <p>One other SRP option, <a href="../../communities/using/jsrp.md">JSRP - JCR Storage Resource Provider</a>, does not support a common UGC store for the author and publish environments to both access.</p> 
  <p>Requiring 
   <g class="gr_ gr_17 gr-alert gr_gramm gr_hide gr_inline_cards gr_run_anim Grammar multiReplace replaceWithoutSep replaceWithoutSep" data-gr-id="17" id="17">
    a common store results
   </g> in the following recommended topologies.</p> 
  <note>
   <p>For AEM Communities, <a href="../../communities/using/working-with-srp.md#ugcneverreplicated">UGC is never replicated</a>. </p> 
   <p>When the deployment does not include a <a href="../../communities/using/working-with-srp.md">common store</a>, UGC will be visible only on the AEM publish or author instance on which it was entered.</p> 
  </note>
  <note>
   <p>For more information on the AEM platform, see <a href="../../sites/deploying/using/recommended-deploys.md">Recommended Deployments</a> and <a href="../../sites/deploying/using/data-store-config.md">Introduction to the AEM Platform</a>.</p> 
  </note>
  <h3>For Production</h3>
  <p>Establishing a common store for UGC is essential, and thus the underlying deployment is contingent on its ability to support a common store.</p> 
  <p>Two examples :</p> 
  <p style="margin-left: 40px;">1) If the expected volume of UGC is high and a local MongoDB instance is possible, then the choice would be <a href="../../communities/using/msrp.md">MSRP</a>.</p> 
  <p style="margin-left: 40px;">2) For optimal performance for page content, the choice of a <a href="../../sites/deploying/using/recommended-deploys.md#tarmkfarm">publish farm</a> and <a href="../../communities/using/asrp.md">ASRP</a> would provide optimal scaling of UGC with relatively straightforward operations.</p> 
  <p>For both, the deployment may be based on any OAK microkernel.</p> 
  <p>To choose the appropriate common store, carefully consider the unique <a href="../../communities/using/working-with-srp.md#srpoptionscharacteristics">characteristics</a> of each.</p> 
  <p>For more details on Oak microkernals, visit <a href="../../sites/deploying/using/recommended-deploys.md">Recommended Deployments</a>.</p> 
  <h4>TarMK Publish Farm</h4>
  <p>When the topology is a publish farm, relevant topics of importance are</p> 
  <ul> 
   <li><a href="../../communities/using/sync.md">User Synchronization</a></li> 
   <li><a href="../../communities/using/users.md">Managing Users and User Groups</a></li> 
  </ul> 
  <h4>Recommended : DSRP, MSRP or ASRP</h4>
  <table border="1" cellpadding="2" cellspacing="2" width="100%"> 
   <tbody>
    <tr>
     <td style="text-align: center;">MicroKernel</td> 
     <td style="text-align: center;">SITE CONTENT<br /> REPOSITORY</td> 
     <td style="text-align: center;">USER GENERATED CONTENT<br /> REPOSITORY</td> 
     <td style="text-align: center;">STORAGE RESOURCE PROVIDER</td> 
     <td style="text-align: center;">COMMON STORE </td> 
    </tr>
    <tr>
     <td style="text-align: center;">any</td> 
     <td style="text-align: center;">JCR</td> 
     <td style="text-align: center;">MySQL</td> 
     <td style="text-align: center;">DSRP</td> 
     <td style="text-align: center;">Yes</td> 
    </tr>
    <tr>
     <td style="text-align: center;">any</td> 
     <td style="text-align: center;">JCR</td> 
     <td style="text-align: center;">MongoDB</td> 
     <td style="text-align: center;">MSRP</td> 
     <td style="text-align: center;">Yes</td> 
    </tr>
    <tr>
     <td style="text-align: center;">any</td> 
     <td style="text-align: center;">JCR</td> 
     <td style="text-align: center;">Adobe on-demand<br /> storage</td> 
     <td style="text-align: center;">ASRP</td> 
     <td style="text-align: center;">Yes</td> 
    </tr>
   </tbody>
  </table> 
  <h4>JSRP</h4>
  <table border="1" cellpadding="2" cellspacing="2" width="100%"> 
   <tbody>
    <tr>
     <td style="text-align: center;">Deployment</td> 
     <td style="text-align: center;">SITE CONTENT<br /> REPOSITORY</td> 
     <td style="text-align: center;">USER GENERATED CONTENT<br /> REPOSITORY</td> 
     <td style="text-align: center;">STORAGE RESOURCE PROVIDER</td> 
     <td style="text-align: center;">COMMON STORE </td> 
    </tr>
    <tr>
     <td style="text-align: center;">TarMK Farm (default)</td> 
     <td style="text-align: center;">JCR</td> 
     <td style="text-align: center;">JCR</td> 
     <td style="text-align: center;">JSRP</td> 
     <td style="text-align: center;">No<br /> </td> 
    </tr>
    <tr>
     <td style="text-align: center;">Oak Cluster</td> 
     <td style="text-align: center;">JCR</td> 
     <td style="text-align: center;">JCR</td> 
     <td style="text-align: center;">JSRP</td> 
     <td style="text-align: center;">Yes<br /> for publish environment only</td> 
    </tr>
   </tbody>
  </table> 
  <h3>For Development</h3>
  <p>For non-production environments, <a href="../../communities/using/jsrp.md">JSRP</a> provides simplicity in setting up a development environment with one author instance and one publish instance.</p> 
  <p>If choosing <a href="../../communities/using/asrp.md">ASRP</a>, <a href="../../communities/using/dsrp.md">DSRP</a> or <a href="../../communities/using/msrp.md">MSRP</a> for production, it is also possible to setup a similar development environment using Adobe on-demand storage or MongoDB. For an example, see <a href="../../communities/using/demo-mongo.md">HowTo Setup MongoDB for Demo</a>.</p> 
  <h3>References</h3>
  <ul> 
   <li><a href="../../communities/using/sync.md">User Synchronization</a><br /> Discusses scynchronization of user data among publish farm instances.</li> 
   <li><a href="../../communities/using/users.md">Managing Users and User Groups</a><br /> Discusses the roles of users and user groups in the author and publish environments.</li> 
   <li>UGC <a href="../../communities/using/working-with-srp.md">common store</a><br /> Describes the storage of community content separate from site content</li> 
   <li><a href="../../sites/deploying/using/data-store-config.md">Node Stores and Data Stores</a><br /> Basically, site content is stored in a node store. For Assets, a data store can be configured to store binary data. For Communities, a common store must be configured to select the SRP.</li> 
   <li><a href="../../sites/deploying/using/storage-elements-in-aem-6.md">Storage Elements in AEM 6.3</a><br /> Describes the two node storage implementations : Tar and MongoDB.</li> 
  </ul> 
 </body>
</html>