<?xml version="1.1" encoding="UTF-8" standalone="yes"?> 
<html> 
 <head> 
  <meta content="https://helpx.adobe.com/experience-manager/6-4/communities/using/troubleshooting.html" name="publishExternalURL" /> 
  <meta content="/apps/help/templates/article-3" name="cq:template" /> 
  <meta content="false" name="isReadyForLocalization" /> 
  <meta content="admin" name="jcr:createdBy" /> 
  <meta content="Activate" name="cq:lastReplicationAction" /> 
  <meta content="2017-12-01T19:03:34.246-0500" name="jcr:created" /> 
  <meta content="2018-05-17T05:56:33.856-0400" name="locHandOffDate" /> 
  <meta content="2017-10-12T21:46:58.665-0400" name="mwpw_migration_script_version" /> 
  <meta content="Troubleshooting Community including Known Issues" name="seoDescription" /> 
  <meta content="carlino" name="cq:lastReplicatedBy" /> 
  <meta content="2018-04-03T08:04:24.977-0400" name="lastPublishExternalDate" /> 
  <meta content="Troubleshooting" name="jcr:title" /> 
  <meta content="/content/docs/en/aem/6-3/develop/communities/troubleshooting" name="qaNotes" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/COMMUNITIES" name="primaryProductTag" /> 
  <meta content="2018-04-03T08:04:24.977-0400" name="publishExternalDate" /> 
  <meta content="" name="jcr:primaryType" /> 
  <meta content="carlino@adobe.com" name="lr_lastReplicatedBy" /> 
  <meta content="2bf890af-d9a7-4634-a218-4f98b81082e1" name="jcr:predecessors" /> 
  <meta content="en_us" name="jcr:language" /> 
  <meta content="carlino" name="cq:lastModifiedBy" /> 
  <meta content="/etc/designs/help" name="cq:designPath" /> 
  <meta content="mix:versionable" name="jcr:mixinTypes" /> 
  <meta content="2018-05-17T05:56:33.856-0400" name="cq:lastModified" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/COMMUNITIES;topic_tags:developing;content_type:reference" name="cq:tags" /> 
  <meta content="Guillaume Carlino" name="contentOwner" /> 
  <meta content="help/components/pages/article-3" name="sling:resourceType" /> 
  <meta content="2017-10-12T21:46:58.665-0400" name="qaDate" /> 
  <meta content="75aa11ff-4339-4a1e-a53c-9a9914a4ceb4" name="jcr:uuid" /> 
  <meta content="2018-04-03T08:04:25.978-0400" name="cq:lastReplicated" /> 
  <meta content="" name="jcr:baseVersion" /> 
  <meta content="Troubleshooting" name="seoTitle" /> 
  <meta content="/content/help/en/experience-manager/6-4/communities/morehelp/developing;/content/help/en/experience-manager/6-4/communities/morehelp/developing" name="moreHelpPaths" /> 
  <meta content="2017-10-31T16:33:09.250-0400" name="firstPublishExternalDate" /> 
  <meta content="Troubleshooting" name="navTitle" /> 
  <meta content="true" name="jcr:isCheckedOut" /> 
  <meta content="2018-04-03T08:04:24.977-0400" name="topicBrowsingSortDate" /> 
  <meta content="" name="jcr:versionHistory" /> 
 </head> 
 <body> 
  <table cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <td style="text-align: left;"><strong><a href="../../communities/using/scf.md">⇐ Social Component Framework</a></strong></td> 
     <td style="text-align: right;"><strong><a href="../../communities/using/essentials.md">Feature Essentials ⇒</a></strong></td> 
    </tr> 
   </tbody> 
  </table> 
  <p>This section contains common concerns and known issues.</p> 
  <h2>Known Issues</h2> 
  <h3>Dispatcher Refetch Fails</h3> 
  <p>When using Dispatcher 4.1.5 with a newer version of Jetty, a refetch may result in 'Unable to receive response from remote server' after waiting for the request to timeout.</p> 
  <p>Using Dispatcher 4.1.6 or later will resolve this issue.<br /> </p> 
  <h3>Cannot Access Forum Post After Upgrading from CQ 5.4</h3> 
  <p>If a forum was created on CQ 5.4 and topics posted , and then the site was upgraded to AEM 5.6.1 or later, attempting to view the existing posts may result in an error on the page :</p> 
  <p style="margin-left: 40px;">illegal pattern character "'a'<br /> Cannot serve request to /content/demoforums/forum-test.html on this server</p> 
  <p>And the logs contain the following:</p> 
  <codeblock class="syntax xml">
    20.03.2014&amp;nbsp;22:49:35.805&amp;nbsp;ERROR&amp;nbsp;[10.177.45.32&amp;nbsp;[1395380975744]&amp;nbsp;GET&amp;nbsp;/content/demoforums/forum-test.html&amp;nbsp;HTTP/1.1]&amp;nbsp;com.day.cq.wcm.tags.IncludeTag&amp;nbsp;Error&amp;nbsp;while&amp;nbsp;executing&amp;nbsp;script&amp;nbsp;content.jsp!!discoiqbr!!org.apache.sling.api.scripting.ScriptEvaluationException:&amp;nbsp;!!discoiqbr!!at&amp;nbsp;org.apache.sling.scripting.core.impl.DefaultSlingScript.call(DefaultSlingScript.java:388)!!discoiqbr!!at&amp;nbsp;org.apache.sling.scripting.core.impl.DefaultSlingScript.eval(DefaultSlingScript.java:171)!!discoiqbr!! 
  </codeblock> 
  <p>The issue is that the format string for com.day.cq.commons.date.RelativeTimeFormat was changed between 5.4 and 5.5 such that the "a" for "ago" is no longer accepted.</p> 
  <p>Thus, any code using RelativeTimeFormat() API would need to change<br /> </p> 
  <ul> 
   <li>from : final RelativeTimeFormat fmt = new RelativeTimeFormat("r a", resourceBundle);</li> 
   <li> to :<br _rte_temp_br="brEOB" /> final RelativeTimeFormat fmt = new RelativeTimeFormat("r", resourceBundle);</li> 
  </ul> 
  <p>The failure is different on author and publish. On author it fails silently and simply does not display the forum topics. On publish it throws up the error on the page.</p> 
  <p>See the <a href="/sites/developing/using/reference-materials/javadoc/com/day/cq/commons/date/RelativeTimeFormat">com.day.cq.commons.date.RelativeTimeFormat</a> API for more information.</p> 
  <h2>Common Concerns</h2> 
  <h3>Warning in Logs : Handlebars Deprecated</h3> 
  <p>During startup (not the 1st - but every one after that) the following warning may be seen in the logs:</p> 
  <ul> 
   <li>11.04.2014 08:38:07.223 <strong>WARN</strong> [FelixStartLevel]com.github.jknack.handlebars.Handlebars Helper 'i18n' has been replaced by 'com.adobe.cq.social.handlebars.I18nHelper@15bac645'</li> 
  </ul> 
  <p>This warning can be safely ignored as jknack.handlebars.Handlebars, used by <a href="../../communities/using/scf.md#handlebarsjavascripttemplatinglanguage">SCF</a>, comes with its own i18n helper utility. On start up, it is replaced with an AEM specific <a href="../../communities/using/handlebars-helpers.md#i18n">i18n helper</a>. This warning is generated by the third party library to confirm the override of an existing helper.<br /> </p> 
  <h3>Warning in Logs : OakResourceListener processOsgiEventQueue</h3> 
  <p>Posting a number of Social Communities forum topics may result in huge quantities of warning and info logs from OakResourceListener processOsgiEventQueue.</p> 
  <p>These warnings can be safely ignored.</p> 
  <codeblock class="syntax xml">
    23.04.2014&amp;nbsp;14:21:18.900&amp;nbsp;*WARN*&amp;nbsp;[pool-5-thread-3]&amp;nbsp;org.apache.sling.jcr.resource.internal.OakResourceListener&amp;nbsp;processOsgiEventQueue:&amp;nbsp;Resource&amp;nbsp;at&amp;nbsp;/var/search-collections/ugc-sc/_m.frq/jcr:content&amp;nbsp;not&amp;nbsp;found,&amp;nbsp;which&amp;nbsp;is&amp;nbsp;not&amp;nbsp;expected&amp;nbsp;for&amp;nbsp;an&amp;nbsp;added&amp;nbsp;or&amp;nbsp;modified&amp;nbsp;node!!discoiqbr!!23.04.2014&amp;nbsp;14:21:18.908&amp;nbsp;*WARN*&amp;nbsp;[pool-5-thread-3]&amp;nbsp;org.apache.sling.jcr.resource.internal.OakResourceListener&amp;nbsp;processOsgiEventQueue:&amp;nbsp;Resource&amp;nbsp;at&amp;nbsp;/var/search-collections/ugc-sc/_m.prx/jcr:content&amp;nbsp;not&amp;nbsp;found,&amp;nbsp;which&amp;nbsp;is&amp;nbsp;not&amp;nbsp;expected&amp;nbsp;for&amp;nbsp;an&amp;nbsp;added&amp;nbsp;or&amp;nbsp;modified&amp;nbsp;node!!discoiqbr!!23.04.2014&amp;nbsp;14:21:18.909&amp;nbsp;*WARN*&amp;nbsp;[pool-5-thread-3]&amp;nbsp;org.apache.sling.jcr.resource.internal.OakResourceListener&amp;nbsp;processOsgiEventQueue:&amp;nbsp;Resource&amp;nbsp;at&amp;nbsp;/var/replication/data/1f799fb4-0aeb-4660-aadb-705657f16048/67/67699ab5-9d57-4c79-a755-2727ba9e6452/jcr:content&amp;nbsp;not&amp;nbsp;found,&amp;nbsp;which&amp;nbsp;is&amp;nbsp;not&amp;nbsp;expected&amp;nbsp;for&amp;nbsp;an&amp;nbsp;added&amp;nbsp;or&amp;nbsp;modified&amp;nbsp;node!!discoiqbr!!23.04.2014&amp;nbsp;14:21:18.909&amp;nbsp;*WARN*&amp;nbsp;[pool-5-thread-3]&amp;nbsp;org.apache.sling.jcr.resource.internal.OakResourceListener&amp;nbsp;processOsgiEventQueue:&amp;nbsp;Resource&amp;nbsp;at&amp;nbsp;/var/replication/data/1f799fb4-0aeb-4660-aadb-705657f16048/67/67699ab5-9d57-4c79-a755-2727ba9e6452/jcr:content&amp;nbsp;not&amp;nbsp;found,&amp;nbsp;which&amp;nbsp;is&amp;nbsp;not&amp;nbsp;expected&amp;nbsp;for&amp;nbsp;an&amp;nbsp;added&amp;nbsp;or&amp;nbsp;modified&amp;nbsp;node!!discoiqbr!!23.04.2014&amp;nbsp;14:21:18.990&amp;nbsp;*WARN*&amp;nbsp;[pool-5-thread-3]&amp;nbsp;org.apache.sling.jcr.resource.internal.OakResourceListener&amp;nbsp;processOsgiEventQueue:&amp;nbsp;Resource&amp;nbsp;at&amp;nbsp;/var/replication/data/1f799fb4-0aeb-4660-aadb-705657f16048/b9/b91f1690-87e8-41d8-a78e-cd2259f837c8/jcr:content&amp;nbsp;not&amp;nbsp;found,&amp;nbsp;which&amp;nbsp;is&amp;nbsp;not&amp;nbsp;expected&amp;nbsp;for&amp;nbsp;an&amp;nbsp;added&amp;nbsp;or&amp;nbsp;modified&amp;nbsp;node!!discoiqbr!!23.04.2014&amp;nbsp;14:21:18.990&amp;nbsp;*WARN*&amp;nbsp;[pool-5-thread-3]&amp;nbsp;org.apache.sling.jcr.resource.internal.OakResourceListener&amp;nbsp;processOsgiEventQueue:&amp;nbsp;Resource&amp;nbsp;at&amp;nbsp;/var/replication/data/1f799fb4-0aeb-4660-aadb-705657f16048/b9/b91f1690-87e8-41d8-a78e-cd2259f837c8/jcr:content&amp;nbsp;not&amp;nbsp;found,&amp;nbsp;which&amp;nbsp;is&amp;nbsp;not&amp;nbsp;expected&amp;nbsp;for&amp;nbsp;an&amp;nbsp;added&amp;nbsp;or&amp;nbsp;modified&amp;nbsp;node!!discoiqbr!! 
  </codeblock> 
  <h3>Error in Logs : NoClassDefFoundError for IndexElementFactory</h3> 
  <p>Upgrading AEM 5.6.1 GA to latest cq-socialcommunities-pkg-1.4.x or to AEM 6.0 results in errors in the log file during startup for a condition which will resolve itself as evidenced by the error not being seen upon restart.</p> 
  <codeblock class="syntax xml">
    14.11.2013&amp;nbsp;20:52:39.453&amp;nbsp;ERROR&amp;nbsp;[Apche&amp;nbsp;Sling&amp;nbsp;JCR&amp;nbsp;Resource&amp;nbsp;Event&amp;nbsp;Queue&amp;nbsp;Processor&amp;nbsp;for&amp;nbsp;path&amp;nbsp;'/']&amp;nbsp;com.adobe.cq.social.storage.index.impl.IndexService&amp;nbsp;Error&amp;nbsp;occured&amp;nbsp;while&amp;nbsp;processing&amp;nbsp;event&amp;nbsp;java.util.ConcurrentModificationException!!discoiqbr!!14.11.2013&amp;nbsp;20:52:40.716&amp;nbsp;ERROR&amp;nbsp;[OsgiInstallerImpl]&amp;nbsp;com.adobe.cq.social.cq-social-commons&amp;nbsp;[CommentListProvider]&amp;nbsp;Error&amp;nbsp;during&amp;nbsp;instantiation&amp;nbsp;of&amp;nbsp;the&amp;nbsp;implementation&amp;nbsp;object&amp;nbsp;(java.lang.NoClassDefFoundError:&amp;nbsp;com/adobe/cq/social/storage/index/IndexElementFactory)&amp;nbsp;java.lang.NoClassDefFoundError:&amp;nbsp;com/adobe/cq/social/storage/index/IndexElementFactory!!discoiqbr!!14.11.2013&amp;nbsp;20:52:40.717&amp;nbsp;ERROR&amp;nbsp;[OsgiInstallerImpl]&amp;nbsp;com.adobe.cq.social.cq-social-commons&amp;nbsp;[CommentListProvider]&amp;nbsp;Failed&amp;nbsp;creating&amp;nbsp;the&amp;nbsp;component&amp;nbsp;instance;&amp;nbsp;see&amp;nbsp;log&amp;nbsp;for&amp;nbsp;reason 
  </codeblock> 
  <table cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <td style="text-align: left;"><strong><a href="../../communities/using/scf.md">⇐ Social Component Framework</a></strong></td> 
     <td style="text-align: right;"><strong><a href="../../communities/using/essentials.md">Feature Essentials ⇒</a></strong></td> 
    </tr> 
   </tbody> 
  </table> 
 </body> 
</html>