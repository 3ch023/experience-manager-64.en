<?xml version="1.1" encoding="UTF-8" standalone="yes"?>
<html>
 <head>
  <meta content="true" name="jcr:isCheckedOut" />
  <meta content="User" name="contentOwner" />
  <meta content="/content/help/en/experience-manager/6-4/mobile/morehelp/developing-adobe-phonegap-enterprise;/content/help/en/experience-manager/6-4/mobile/morehelp/developing-adobe-phonegap-enterprise" name="moreHelpPaths" />
  <meta content="Configuring Adobe Target Cloud Service" name="navTitle" />
  <meta content="admin" name="jcr:createdBy" />
  <meta content="2018-05-04T05:12:30.758-0400" name="topicBrowsingSortDate" />
  <meta content="/content/docs/en/aem/6-3/develop/mobile-apps/developing-in-phonegap/developing-mobile-applications/aem-mobile-content-personalization/configuring-target-cloud-service" name="qaNotes" />
  <meta content="help/components/pages/article-3" name="sling:resourceType" />
  <meta content="Configuring Adobe Target Cloud Service" name="seoTitle" />
  <meta content="" name="jcr:primaryType" />
  <meta content="06c8a263-57df-4811-95c8-5b6726654aef" name="jcr:predecessors" />
  <meta content="Configuring Adobe Target Cloud Service" name="jcr:title" />
  <meta content="Follow this page to understand how to get right set of permissions for users and groups, creating cloud services, configuring the application for the activity, and finally generating the content." name="seoDescription" />
  <meta content="2017-10-31T16:26:38.034-0400" name="firstPublishExternalDate" />
  <meta content="bohnert" name="cq:lastModifiedBy" />
  <meta content="bohnert@adobe.com" name="lr_lastReplicatedBy" />
  <meta content="2018-05-04T05:12:30.758-0400" name="publishExternalDate" />
  <meta content="" name="jcr:versionHistory" />
  <meta content="/etc/designs/help" name="cq:designPath" />
  <meta content="en_us" name="jcr:language" />
  <meta content="2018-05-04T05:12:30.758-0400" name="lastPublishExternalDate" />
  <meta content="bohnert" name="cq:lastReplicatedBy" />
  <meta content="/apps/help/templates/article-3" name="cq:template" />
  <meta content="content_type:reference;products:SG_EXPERIENCEMANAGER/6.4/MOBILE;topic_tags:developing-adobe-phonegap-enterprise" name="cq:tags" />
  <meta content="mix:versionable" name="jcr:mixinTypes" />
  <meta content="2018-05-11T10:01:15.061-0400" name="cq:lastModified" />
  <meta content="2017-10-12T21:46:58.665-0400" name="mwpw_migration_script_version" />
  <meta content="Activate" name="cq:lastReplicationAction" />
  <meta content="2e94e598-5a24-4ac0-9e44-daa8f3f0028e" name="jcr:uuid" />
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/MOBILE" name="primaryProductTag" />
  <meta content="2018-05-11T10:01:15.060-0400" name="locHandOffDate" />
  <meta content="2018-05-04T05:12:31.043-0400" name="cq:lastReplicated" />
  <meta content="false" name="isReadyForLocalization" />
  <meta content="https://helpx.adobe.com/experience-manager/6-4/mobile/using/aem-mobile-configuring-cloud-service.html" name="publishExternalURL" />
  <meta content="2017-10-12T21:46:00.000-0400" name="qaDate" />
  <meta content="" name="jcr:baseVersion" />
  <meta content="2017-12-13T19:01:32.320-0500" name="jcr:created" />
 </head>
 <body>
  <note>
   <p>Adobe recommends using the SPA Editor for projects that require single page application framework-based client-side rendering (e.g. React). <a href="../../sites/developing/using/spa-overview.md">Learn more</a>.</p>
  </note>
  <note>
   <p>This document is part of the <a href="../../mobile/using/getting-started-aem-mobile.md">Getting Started with AEM Mobile</a> Guide, a recommended starting point for AEM Mobile reference.</p> 
  </note>
  <p>There's a number of steps that need to come together before content authors can start to generate targeted content for mobile apps: There's getting the right set of permissions for users and groups, creating cloud services, configuring the application for the activity, and finally generating the content.</p> 
  <p>The assumption going forward is that the <a href="https://github.com/Adobe-Marketing-Cloud-Apps/aem-mobile-hybrid-reference">AEM Mobile Hybrid Reference Application</a> has been successfully deployed and accessible via the AEM Mobile Dashboard.</p> 
  <h2>Permissions</h2>
  <p>Users that need access to the personalization console need to be part of the `target-activity-authors` group. It is suggested that as part of the users and group setup that the target-activity-group should be added to the apps-admins group. By adding the target-activity-authors group this will allow users ability to see the Personalization navigation menu entry.</p> 
  <p>Forgetting to add the users or groups that you want to have access to the personalization admin console to the target-activity-authors group will prevent users from seeing the personalization console.</p> 
  <h2>Cloud Services</h2>
  <p>To get targeted content working for mobile applications there are two services that need to be configured: The Adobe Target Service and the Adobe Mobile Services service. The Adobe Target Service provides the engine for processing client requests and returning the personalized content. The Adobe Mobile Services service provides the connection between the Adobe services and the mobile application via the ADBMobileConfig.json file which is consumed by the AMS Cordova plugin. From the AEM Mobile Dashboard you can configure your application by adding the two services. </p> 
  <h2>Adobe Target Cloud Service</h2>
  <p>From the AEM Mobile Dashboard locate the Manage Cloud Services and click the + button. </p> 
  <img imageRotate="0" src="assets/chlimage_1-8.png" />
  <p> </p> 
  <p> From the Add Cloud Service wizard select the "Adobe Target" cloud service card and click Next.</p> 
  <img imageRotate="0" src="assets/chlimage_1-9.png" />
  <p><br /> From the Select a Configuration dropdown you can either create a new configuration or select from an existing one. To create a new configuration select "Create Configuration" from the dropdown. Enter a title for the Target configuration. Enter your client code, email, and password that are associated with your Target account. If you do not know the values for these fields contact the Adobe Target support. Click the "Verify" button to validate the credentials. Once verified, click the Submit button to create the cloud service.</p> 
  <p>The cloud service that gets created is automatically associated with the mobile application via the wizard. The cq:cloudserviceconfigs property value gets set on the jcr:content node of the apps group node. For the hybrid app sample it gets set on /content/mobileapps/hybrid-reference-app/jcr:content with the value pointing to the automatically generated framework node located at /etc/cloudservices/testandtarget/adobe-target---aem-apps/framework. The framework node has two properties set by default, gender and age. The framework is only used by AEM previewing and does not have any impact on the device.</p> 
  <p>After completion of the wizard the Manage Cloud Service tile will contain the Target cloud service, however it contains a warning about a missing Adobe Mobile Service account. </p> 
  <img imageRotate="0" src="assets/chlimage_1-10.png" />
  <h2>Adobe Mobile Service</h2>
  <p>It is necessary to link a Adobe Mobile Services (AMS) account to the application as well, the AMS service provides the required ADBMobileConfig.json file which contains the Target client code information. Before creating an association with the AMS account, the AMS account needs to be modified by a user that has permissions to AMS. </p> 
  <h4>Client Code</h4>
  <p>To login to the AMS services visit <a href="https://mobilemarketing.adobe.com/">https://mobilemarketing.adobe.com</a>, select the mobile application and click the settings. Locate the SDK Target Options field and place the client code into the field and click Save. </p> 
  <img imageRotate="0" src="assets/chlimage_1-11.png" />
  <p> </p> 
  <p>Now that the client code has been associated with the mobile application, when the AMS cloud service is configured via the Adobe Mobile Dashboard the settings for the service settings will be delivered via the ADBMobileConfig.json file.</p> 
  <h4>Adobe Mobile Service Could Service</h4>
  <p>Now that AMS has been configured, it's time to associate the mobile application in the Adobe Mobile Dashboard. From the AEM Mobile Dashboard locate the Manage Cloud Services and click the + button. </p> 
  <img imageRotate="0" src="assets/chlimage_1-12.png" />
  <p><br /> Select the Adobe Mobile Services card and click Next.</p> 
  <img imageRotate="0" src="assets/chlimage_1-13.png" />
  <p><br /> From the Create or Select wizard step select the Mobile Service dropdown and select the Create Configuration entry. Provide a title, company, username, password and select the appropriate data center. If you do not know these values contact your Adobe Mobile Service administrator to obtain them. Once all fields have been filled out click the Verify button. The verification process goes to AMS and verifies the credentials for the account, and upon successful validation, a list of Mobile Applications will be populated where you select the associated mobile application from the dropdown. Click the Submit button to complete the wizard. The process may take a bit of time to obtain the configuration data and any associated analytics with the application. Once the process is complete click the Done button from the modal to return back to the Adobe Mobile Dashboard.</p> 
  <p>Returning back to the Mobile Dashboard the Manage Cloud Services tile will contain the AMS cloud service. You will also note that the Analyze Metrics tile will be populated with lifecycle reports.</p> 
  <img imageRotate="0" src="assets/chlimage_1-14.png" />
  <p> </p> 
  <h2>Target Content Sync Handlers</h2> 
  <p>To deliver content to the user's device content is generated by rendering the offers which are created by AEM content authors. To handle the rendering of target offers there is a new content sync handler that will process the offers. Using the Hybrid Reference Application as our sample, the en (english) content package contains the ContentSyncConfig with a <a href="https://github.com/Adobe-Marketing-Cloud-Apps/aem-mobile-hybrid-reference/blob/master/aem-package/content-author/src/main/content/jcr_root/content/mobileapps/hybrid-reference-app/en/_jcr_content/pge-app/app-config-dev/targetOffers/.content.xml">mobileappoffers</a> handler. The next step is crucial for rendering offers to the device. The mobileappoffers handler has a path property that identifies the path to the personalization activity that are to be used for the application. </p> 
  <p>For example if there is an activity that is located at <i>/content/campaigns/hybridref</i> copy this path and paste it as the value to the <i>path</i> property of the mobileappoffers handler.</p> 
  <p>For the Hybrid Reference Application there are two mobileappoffers handlers one for the dev and one for productions.</p> 
  <p>Once the activities path has been set in the mobileappoffers handler's path property save the handler. The handler will now be ready to start rendering offers for our mobile devices.</p> 
  <h3>Render Mode</h3> 
  <p>The mobileappoffers handler is configured differently for publish and dev setups. For publish setups there is a property called <i>renderMode</i> with a value of <i>publish</i> set on the cq:ContentSyncConfig node. The mobileappoffers handler references the renderMode and, if set to publish, will modify the mbox id that gets created. By default, mboxes that are created by AEM have an --author value appended to the mbox id. This identifies that the activity has not been published and should use the unpublished campaign for offer resolutions. </p> 
  <p>When content is staged via the Adobe Mobile Dashboard, staged content is considered production ready content and is rendered via the non-dev Content Sync Config. Rendering this way will cause the --author to be removed from all mbox ids and expect a published activity to be available on the Target server. Before testing staged content make sure the activity has been published.</p> 
  <h2>Creating Content</h2> 
  <p>Now that the cloud services have been created and the mobileappoffers handler has been configured, content authors can now start generating targeted experiences. </p> 
 </body>
</html>