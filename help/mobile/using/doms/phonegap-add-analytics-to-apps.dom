<?xml version="1.1" encoding="UTF-8" standalone="yes"?> 
<html> 
 <head> 
  <meta content="/content/help/en/experience-manager/6-4/mobile/morehelp/developing-adobe-phonegap-enterprise;/content/help/en/experience-manager/6-4/mobile/morehelp/developing-adobe-phonegap-enterprise" name="moreHelpPaths" /> 
  <meta content="User" name="contentOwner" /> 
  <meta content="53f26525-f488-4fb9-a18b-b4f02708104a" name="jcr:predecessors" /> 
  <meta content="https://helpx.adobe.com/experience-manager/6-4/mobile/using/phonegap-add-analytics-to-apps.html" name="publishExternalURL" /> 
  <meta content="bohnert@adobe.com" name="lr_lastReplicatedBy" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/MOBILE" name="primaryProductTag" /> 
  <meta content="Add Adobe Analytics to your Mobile Application" name="navTitle" /> 
  <meta content="Add Adobe Analytics to your Mobile Application" name="jcr:title" /> 
  <meta content="false" name="isReadyForLocalization" /> 
  <meta content="2017-10-12T21:46:58.665-0400" name="mwpw_migration_script_version" /> 
  <meta content="content_type:reference;products:SG_EXPERIENCEMANAGER/6.4/MOBILE;topic_tags:developing-adobe-phonegap-enterprise" name="cq:tags" /> 
  <meta content="2018-05-04T05:13:29.008-0400" name="publishExternalDate" /> 
  <meta content="trushton" name="cq:lastModifiedBy" /> 
  <meta content="2017-12-13T19:01:36.482-0500" name="jcr:created" /> 
  <meta content="2017-10-12T21:46:00.000-0400" name="qaDate" /> 
  <meta content="8b9275da-a20f-41b5-a820-112060c8d48f" name="jcr:uuid" /> 
  <meta content="/etc/designs/help" name="cq:designPath" /> 
  <meta content="" name="jcr:versionHistory" /> 
  <meta content="/apps/help/templates/article-3" name="cq:template" /> 
  <meta content="Activate" name="cq:lastReplicationAction" /> 
  <meta content="2018-05-11T10:02:00.383-0400" name="cq:lastModified" /> 
  <meta content="" name="jcr:primaryType" /> 
  <meta content="2018-05-04T05:13:29.271-0400" name="cq:lastReplicated" /> 
  <meta content="/content/docs/en/aem/6-3/develop/mobile-apps/developing-in-phonegap/developing-mobile-applications/add-analytics-to-apps" name="qaNotes" /> 
  <meta content="2018-05-11T10:02:00.382-0400" name="locHandOffDate" /> 
  <meta content="true" name="jcr:isCheckedOut" /> 
  <meta content="en_us" name="jcr:language" /> 
  <meta content="2018-05-04T05:13:29.008-0400" name="lastPublishExternalDate" /> 
  <meta content="bohnert" name="cq:lastReplicatedBy" /> 
  <meta content="help/components/pages/article-3" name="sling:resourceType" /> 
  <meta content="" name="jcr:baseVersion" /> 
  <meta content="2017-10-31T16:26:21.530-0400" name="firstPublishExternalDate" /> 
  <meta content="admin" name="jcr:createdBy" /> 
  <meta content="mix:versionable" name="jcr:mixinTypes" /> 
  <meta content="Add Adobe Analytics to your Mobile Application" name="seoTitle" /> 
  <meta content="2018-05-04T05:13:29.008-0400" name="topicBrowsingSortDate" /> 
  <meta content="Follow this page to learn about how you can use Mobile App Analytics in your AEM Apps by integrating with Adobe Mobile Services." name="seoDescription" /> 
 </head> 
 <body> 
  <note> 
   <p>Adobe recommends using the SPA Editor for projects that require single page application framework-based client-side rendering (e.g. React). <a href="../../sites/developing/using/spa-overview.md">Learn more</a>.</p> 
  </note> 
  <p>Want to build engaging and relevent experiences for your mobile application users? If you're not using the Adobe Mobile Services SDK to monitor and measure application lifecycle and usage, then on what are you basing your decisions? Where are your most loyal customers? How can you gurantee you're staying relevent and and optimizing conversions?</p> 
  <p>Are your users accessing all the content? Are they abandoning the app, and if so, where? How often do they stay in the app and how often to they come back to use the app? What changes can you introduce and then measure that increase retention? What about crash rates, is your app crashing for your users?</p> 
  <p>Take advantage of <a href="http://www.adobe.com/ca/solutions/digital-analytics/mobile-web-apps-analytics.html">Mobile App Analytics</a> in your AEM Apps by integrating with <a href="http://www.adobe.com/marketing-cloud/mobile-marketing.html">Adobe Mobile Services</a>.</p> 
  <p>Instrument your AEM Apps to track, report and understand how you users engage with your mobile app and content and to measure key lifecycle metrics such as launches, time in app, and crash rate.</p> 
  <p>This section describes how AEM <i>Developers</i> can:</p> 
  <ul> 
   <li>Integrate Mobile Analytics into your mobile application</li> 
   <li>Test your analytics tracking with Bloodhound</li> 
  </ul> 
  <h2>Prerequisties</h2> 
  <p>AEM Mobile requires an Adobe Analytics account to collect and report tracking data in your app. As part of the the configuration the AEM <i>Administrator</i> will first need to :</p> 
  <ul> 
   <li>Setup an Adobe Analytics account and create a report suite for your application in Mobile Services.</li> 
   <li>Configure an AMS Cloud Service in Adobe Experience Manager (AEM).</li> 
  </ul> 
  <h2>For Developers - Integrate Mobile Analytics into your app</h2> 
  <h3>Configure ContentSync to pull in configuration file</h3> 
  <p>After the Analytics account is setup you will need to create a Content Sync configuration to pull in the content into your Mobile Application. </p> 
  <p>For additional details refer to Configuring the Content Sync Content. The configuration will need to instruct Content Sync to put the ADBMobileConfig into the /www directory. For example in the Geometrixx Outdoors App the Content Sync configuration is located at: <i>/content/phonegap/geometrixx-outdoors/shell/jcr:content/pge-app/app-config/ams-ADBMobileConfig</i>. There is a configuration for development as well; however, it is identical to the non-development configuration in the case of Geometrixx Outdoors.</p> 
  <p>For further details on how to download the ADBMobileConfig from your Mobile Application AEM Apps dashboard, refer to Analytics - Mobile Services - Adobe Mobile Services SDK Config File.</p> 
  <codeblock class="syntax xml">
    &lt;jcr:root&amp;nbsp;xmlns:jcr="http://www.jcp.org/jcr/1.0"&amp;nbsp;xmlns:nt="http://www.jcp.org/jcr/nt/1.0"!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;jcr:primaryType="nt:unstructured"!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;extension="json"!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;path="../../../.."&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;selector="ADBMobileConfig"!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;targetRootDirectory="www"!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;type="mobileADBMobileConfigJSON"/&gt; 
  </codeblock> 
  <p>Each platform requires the ADBMobileConfig to be copied to a specific location. </p> 
  <p>If building with the PhoneGap CLI this can be done with an cordova build hook scripts. This can be seen in the the Geometrixx Outdoors App at:<i>content/phonegap/geometrixx-outdoors/shell/_jcr_content/pge-app/app-content/phonegap/scripts/restore_plugins.js.</i> </p> 
  <p>For iOS the file will need to be copied to the XCode project's <strong>Resources</strong> directory (eg. "platforms/ios/Geometrixx/Resources/ADBMobileConfig.json"). If the App is targeted for Android then the path to copy to is "platforms/android/assets/ADBMobileConfig.json". For further details on using hooks during the PhoneGap CLI build refer to <a href="http://devgirl.org/2013/11/12/three-hooks-your-cordovaphonegap-project-needs/">Three hooks your Cordova/PhoneGap project needs</a>.</p> 
  <codeblock class="syntax xml">
    ///////////////////////////!!discoiqbr!!//&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;iOS!!discoiqbr!!///////////////////////////!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ios&amp;nbsp;:&amp;nbsp;[!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"www/ADBMobileConfig.json":&amp;nbsp;"platforms/ios/&lt;YOUR_APP_NAME&gt;/Resources/ADBMobileConfig.json"!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;],!!discoiqbr!!///////////////////////////!!discoiqbr!!//&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ANDROID!!discoiqbr!!///////////////////////////!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;android:&amp;nbsp;[!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"www/ADBMobileConfig.json":&amp;nbsp;"platforms/android/assets/ADBMobileConfig.json"!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;] 
  </codeblock> 
  <h3>Add the AMS plugin in the App</h3> 
  <p>For the App to collect the data the Adobe Mobile Services (AMS) plugin needs to be included as part of the app. By including the plugin as a feature in the app's config.xml another Cordova hook can be used to automatically add the plugin during the PhoneGap build process.</p> 
  <codeblock class="syntax xml">
    &lt;feature&amp;nbsp;name="ADBMobile"&gt;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;param&amp;nbsp;name="id"&amp;nbsp;value="https://github.com/Adobe-Marketing-Cloud/mobile-services#0482f9cedf90c98a8d4b07219ece1933b2e46a60"/&gt;!!discoiqbr!!&lt;/feature&gt; 
  </codeblock> 
  <p>The Geometrixx Outdoors App config.xml is located at <i>/content/phonegap/geometrixx-outdoors/shell/jcr:content/pge-app/app-content/phonegap/www/config.xml</i>. The example above requests a specific version of the plugin to be used by adding a '#' and then a tag value after the plugin URL. This is a good practice to follow to ensure unanticipated issues do not appear due to untested plugins being added during a build.</p> 
  <p>After performing these steps your app will be enabled to report all the lifecycle metrics provide by Adobe Analytics. This includes data such as launches, crashes and installs. If that's the only data which you care about then you are done. If you want to collect custom data then you will need to instrument you code.</p> 
  <h3>Instrument your code for full App tracking</h3> 
  <p>There are several tracking APIs provided in the <a href="https://marketing.adobe.com/resources/help/en_US/mobile/ios/phonegap_methods.html">AMS Phonegap Plugin API.</a></p> 
  <p>These will allow you to track states and actions such as where pages your users are navigating to in your app, which controls are being used the most. The easiest way to instrument you app for tracking is to make use of the Analytics APIs provided by the AMS plugin. </p> 
  <ul> 
   <li>ADB.trackState()</li> 
   <li>ADB.trackAction()</li> 
  </ul> 
  <p>For reference you can take a look at the code in the Geometrixx Outdoors app. In the Geometrixx Outdoors app all of the page navigations are tracked using the ADB.trackState() method. For further details take a look at the source code for /libs/mobileapps/components/angular/ng-page/clientlibs/app-navigation.js</p> 
  <p>By instrumenting your source code with these method calls you are able to collect full metrics against your application.</p> 
  <h3>Testing Analytics tracking with Bloodhound </h3> 
  <img imageRotate="0" src="assets/chlimage_1-1.jpeg" /> 
  <p>Optionally before deploying to production you can use the Adobe tool <a href="https://marketing.adobe.com/developer/gallery/bloodhound-app-measurement-qa-tool-1">Bloodhound</a> to test your analytics configuration. In order to test you analytics configuration you will need to edit your ADBMobileConfig.json file to point to the server where Bloodhound is running instead of the actual Analytics server. To make this change, from your ADBMobileConfig.json change the following entry.</p> 
  <codeblock class="syntax xml">
    ...!!discoiqbr!!"analytics":&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"rsids":&amp;nbsp;"YOUR_RSID",!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"server":&amp;nbsp;"YOUR_TRACKING_SERVER:YOUR_TRACKING_PORT",!!discoiqbr!!... 
  </codeblock> 
  <p>Change to match this entry:</p> 
  <codeblock class="syntax xml">
    ...!!discoiqbr!!"analytics":&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"rsids":&amp;nbsp;"YOUR_RSID",!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"server":&amp;nbsp;"localhost:50000",!!discoiqbr!!... 
  </codeblock> 
  <p>This will redirect all the data collected by the AMS plugin to Bloodhound so that you can view the results.</p> 
  <h4>Properties for Connecting to AMS</h4> 
  <p><i>com.adobe.cq.mobile.mobileservices.impl.service.MobileServicesHttpClientImp</i>l exposes the following properties for connecting to AMS:</p> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <td><strong>Label</strong></td> 
     <td><strong>Description</strong></td> 
     <td><strong>Default</strong></td> 
    </tr> 
    <tr> 
     <td>API Endpoint</td> 
     <td>The base URL of the Adobe Mobile Services HTTP APIs</td> 
     <td>https://api.omniture.com</td> 
    </tr> 
    <tr> 
     <td>Config Endpoint</td> 
     <td>The URL used to retrieve the ADB Mobile Config for the given report suite id</td> 
     <td>/ams/1.0/app/config/</td> 
    </tr> 
    <tr> 
     <td>Mobile Service Apps</td> 
     <td>Get a list of apps within the users company</td> 
     <td>/ams/1.0/apps</td> 
    </tr> 
   </tbody> 
  </table> 
 </body> 
</html>